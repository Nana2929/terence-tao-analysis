\section{The Riemann-Stieltjes integral}\label{sec 11.8}

\begin{definition}[\(\alpha\)-length]\label{11.8.1}
    Let \(I\) be a bounded interval, and let \(\alpha : X \to \mathbf{R}\) be a monotone increasing function defined on some interval \(X\) which contains \(I\).
    Then we define the \emph{\(\alpha\)-length} \(\alpha[I]\) of \(I\) as follows.
    If \(I\) is the empty set, we set \(\alpha[I] = 0\).
    If \(I\) is a point of the form \(\{a\}\) a point for some real number \(a\), we set
    \[
        \alpha[\{\alpha\}] \coloneqq \lim_{x \to a^+ ; x \in X} \alpha(x) - \lim_{x \to a^- ; x \in X} \alpha(x),
    \]
    with the convention that \(\lim_{x \to a^+ ; x \in X} \alpha(x)\) (resp. \(\lim_{x \to a^- ; x \in X} \alpha(x)\)) is \(\alpha(a)\) when \(a\) is the right (resp. left) endpoint of \(X\).
    If \(I\) is an interval of the form \((a, b)\) for some real numbers \(b > a\), set
    \[
        \alpha[(a, b)] \coloneqq \lim_{x \to b^- ; x \in X} \alpha(x) - \lim_{x \to a^+ ; x \in X} \alpha(x).
    \]
    If \(I\) is an interval of the form \([a, b)\), \((a, b]\), or \([a, b]\) for some real numbers \(b > a\), then we set
    \[
        \alpha[I] = \begin{cases}
            \alpha(\{a\}) + \alpha((a, b))                 & \text{if } I = [a, b) \\
            \alpha((a, b)) + \alpha(\{b\})                 & \text{if } I = (a, b] \\
            \alpha(\{a\}) + \alpha((a, b)) + \alpha(\{b\}) & \text{if } I = [a, b]
        \end{cases}
    \]
\end{definition}

\begin{note}
    In the special case when \(\alpha\) is continuous, the definition of \(\alpha[I]\) where \(I\) is of the form \((a, b)\), \([a, b)\), \((a, b]\), or \([a, b]\) simplifies to \(\alpha[I] = \alpha(b) - \alpha(a)\).
\end{note}

\begin{note}
    We sometimes write \(\alpha\big|_a^b\) or \(\alpha(x)\big|_{x = a}^{x = b}\) instead of \(\alpha[[a, b]]\).
\end{note}

\setcounter{theorem}{3}
\begin{lemma}\label{11.8.4}
    Let \(I\) be a bounded interval, let \(\alpha : X \to \mathbf{R}\) be a monotone increasing function defined on some interval \(X\) which contains \(I\), and let \(\mathbf{P}\) be a partition of \(I\).
    Then we have
    \[
        \alpha[I] = \sum_{J \in \mathbf{P}} \alpha[J].
    \]
\end{lemma}

\begin{proof}
    We prove this by induction on \(n\).
    More precisely, we let \(P(n)\) be the property that whenever \(I\) is a bounded interval, and whenever \(\mathbf{P}\) is a partition of \(I\) with cardinality \(n\), that \(\alpha[I] = \sum_{J \in \mathbf{P}} \alpha[J]\).

    The base case \(P(0)\) is trivial;
    the only way that \(I\) can be partitioned into an empty partition is if \(I\) is itself empty, so by Definition \ref{11.8.1} \(\alpha[I] = 0\).
    The case \(P(1)\) is also very easy;
    the only way that \(I\) can be partitioned into a singleton set \(\{J\}\) is if \(J = I\), at which point the claim is again very easy.

    Now suppose inductively that \(P(n)\) is true for some \(n \geq 1\), and now we prove \(P(n + 1)\).
    Let \(I\) be a bounded interval, and let \(\mathbf{P}\) be a partition of \(I\) of cardinality \(n + 1\).

    If \(I\) is the empty set or a point, then all the intervals in \(\mathbf{P}\) must also be either the empty set or a point, and by Definition \ref{11.8.1} every interval either has \(\alpha\)-length zero or
    \[
        \alpha[\{a\}] = \lim_{x \to a^+ ; x \in X} \alpha(x) - \lim_{x \to a^- ; x \in X} \alpha(x),
    \]
    and the claim is trivial.
    Thus we will assume that \(I\) is an interval of the form \((a, b)\), \((a, b]\), \([a, b)\), or \([a, b]\).

            Let us first suppose that \(b \in I\), i.e., \(I\) is either \((a, b]\) or \([a, b]\).
    Since \(b \in I\), we know that one of the intervals \(K\) in \(\mathbf{P}\) contains \(b\).
    Since \(K\) is contained in \(I\), it must therefore be of the form \((c, b]\), \([c, b]\), or \(\{b\}\) for some real number \(c\), with \(a \leq c \leq b\) (in the latter case of \(K = \{b\}\), we set \(c \coloneqq b\)).
    In particular, this means that the set \(I \setminus K\) is also an interval of the form \([a, c]\), \((a, c)\), \((a, c]\), \([a, c)\) when \(c > a\), or a point or empty set when \(a = c\).
            Either way, by Definition \ref{11.8.1} we see that
            \begin{align*}
                \alpha[I] & = \alpha[(a, b)] + \alpha(\{b\})                                                              \\
                          & = \lim_{x \to b^- ; x \in X} \alpha(x) - \lim_{x \to a^+ ; x \in X} \alpha(x) + \alpha(\{b\}) \\
                          & = \lim_{x \to b^- ; x \in X} \alpha(x) - \lim_{x \to c^+ ; x \in X} \alpha(x)                 \\
                          & + \lim_{x \to c^+ ; x \in X} \alpha(x) - \lim_{x \to c^- ; x \in X} \alpha(x)                 \\
                          & + \lim_{x \to c^- ; x \in X} \alpha(x) - \lim_{x \to a^+ ; x \in X} \alpha(x) + \alpha(\{b\}) \\
                          & = \alpha[(c, b)] + \alpha[\{c\}] + \alpha[(a, c)] + \alpha(\{b\})                             \\
                          & = \alpha[(a, c)] + \alpha[[c, b]]                                                             \\
                          & = \alpha[K] + \alpha[I \setminus K]
            \end{align*}
            when \(I = (a, b]\) and
    \begin{align*}
        \alpha[I] & = \alpha(\{a\}) + \alpha[(a, b)] + \alpha(\{b\})                                                              \\
                  & = \alpha(\{a\}) + \lim_{x \to b^- ; x \in X} \alpha(x) - \lim_{x \to a^+ ; x \in X} \alpha(x) + \alpha(\{b\}) \\
                  & = \alpha(\{a\}) + \lim_{x \to b^- ; x \in X} \alpha(x) - \lim_{x \to c^+ ; x \in X} \alpha(x)                 \\
                  & + \lim_{x \to c^+ ; x \in X} \alpha(x) - \lim_{x \to c^- ; x \in X} \alpha(x)                                 \\
                  & + \lim_{x \to c^- ; x \in X} \alpha(x) - \lim_{x \to a^+ ; x \in X} \alpha(x) + \alpha(\{b\})                 \\
                  & = \alpha(\{a\}) + \alpha[(c, b)] + \alpha[\{c\}] + \alpha[(a, c)] + \alpha(\{b\})                             \\
                  & = \alpha[[a, c)] + \alpha[[c, b]]                                                                             \\
                  & = \alpha[K] + \alpha[I \setminus K].
    \end{align*}
    when \(I = [a, b]\).
    On the other hand, since \(\mathbf{P}\) forms a partition of \(I\), we see that \(\mathbf{P} \setminus \{K\}\) forms a partition of \(I \setminus K\).
    By the induction hypothesis, we thus have
    \[
        \alpha[I \setminus K] = \sum_{J \in \mathbf{P} \setminus \{K\}} \alpha[J].
    \]
    Combining these two identities (and using the laws of addition for finite sets, see Proposition \ref{7.1.11}(e)) we obtain
    \[
        \alpha[I] = \sum_{J \in \mathbf{P}} \alpha[J]
    \]
    as desired.

    Now suppose that \(b \notin I\), i.e., \(I\) is either \((a, b)\) or \([a, b)\).
    Then one of the intervals \(K\) also is of the form \((c, b)\) or \([c, b)\) (see Exercise \ref{ex 11.1.3}).
            In particular, this means that the set \(I \setminus K\) is also an interval of the form \([a, c]\), \((a, c)\), \((a, c]\), \([a, c)\) when \(c > a\), or a point or empty set when \(a = c\).
    By Definition \ref{11.8.1} we see that
    \begin{align*}
        \alpha[I] & = \alpha[(a, b)]                                                              \\
                  & = \lim_{x \to b^- ; x \in X} \alpha(x) - \lim_{x \to a^+ ; x \in X} \alpha(x) \\
                  & = \lim_{x \to b^- ; x \in X} \alpha(x) - \lim_{x \to c^+ ; x \in X} \alpha(x) \\
                  & + \lim_{x \to c^+ ; x \in X} \alpha(x) - \lim_{x \to c^- ; x \in X} \alpha(x) \\
                  & + \lim_{x \to c^- ; x \in X} \alpha(x) - \lim_{x \to a^+ ; x \in X} \alpha(x) \\
                  & = \alpha[(c, b)] + \alpha[\{c\}] + \alpha[(a, c)]                             \\
                  & = \alpha[(a, c)] + \alpha[[c, b)]                                             \\
                  & = \alpha[K] + \alpha[I \setminus K]
    \end{align*}
    when \(I = (a, b)\) and
    \begin{align*}
        \alpha[I] & = \alpha(\{a\}) + \alpha[(a, b)]                                                              \\
                  & = \alpha(\{a\}) + \lim_{x \to b^- ; x \in X} \alpha(x) - \lim_{x \to a^+ ; x \in X} \alpha(x) \\
                  & = \alpha(\{a\}) + \lim_{x \to b^- ; x \in X} \alpha(x) - \lim_{x \to c^+ ; x \in X} \alpha(x) \\
                  & + \lim_{x \to c^+ ; x \in X} \alpha(x) - \lim_{x \to c^- ; x \in X} \alpha(x)                 \\
                  & + \lim_{x \to c^- ; x \in X} \alpha(x) - \lim_{x \to a^+ ; x \in X} \alpha(x)                 \\
                  & = \alpha(\{a\}) + \alpha[(c, b)] + \alpha[\{c\}] + \alpha[(a, c)]                             \\
                  & = \alpha[[a, c)] + \alpha[[c, b)]                                                             \\
                  & = \alpha[K] + \alpha[I \setminus K].
    \end{align*}
    when \(I = [a, b)\).
    The rest of the argument then proceeds as above.
\end{proof}

\begin{definition}[piecewise constant Riemann-Stieltjes integral]\label{11.8.5}
    Let \(I\) be a bounded interval, and let \(\mathbf{P}\) be a partition of \(I\).
    Let \(\alpha : X \to \mathbf{R}\) be a monotone increasing function defined on some interval \(X\) which contains \(I\), and let \(f : I \to \mathbf{R}\) be a function which is piecewise constant with respect to \(\mathbf{P}\).
    Then we define
    \[
        p.c. \int_{[\mathbf{P}]} f \; d \alpha \coloneqq \sum_{J \in \mathbf{P}} c_J \alpha[J]
    \]
    where \(c_J\) is the constant value of \(f\) on \(J\).
\end{definition}

\setcounter{theorem}{6}
\begin{example}\label{11.8.7}
    Let \(\alpha : \mathbf{R} \to \mathbf{R}\) be the identity function \(\alpha(x) \coloneqq x\).
    Then for any bounded interval \(I\), any partition \(\mathbf{P}\) of \(I\), and any function \(f\) that is piecewise constant with respect to \(P\), we have \(p.c. \int_{[\mathbf{P}]} f \; d \alpha = p.c. \int_{[\mathbf{P}]} f\).
\end{example}

\begin{proposition}\label{11.8.8}
    Let \(I\) be a bounded interval, let \(\alpha : X \to \mathbf{R}\) be a monotone increasing function defined on some interval \(X\) which contains \(I\), and let \(f : I \to \mathbf{R}\) be a function.
    Suppose that \(\mathbf{P}\) and \(\mathbf{P}'\) are partitions of \(I\) such that \(f\) is piecewise constant both with respect to \(\mathbf{P}\) and with respect to \(\mathbf{P}'\).
    Then \(p.c. \int_{[\mathbf{P}]} f \; d \alpha = p.c. \int_{[\mathbf{P}']} f \; d \alpha\).
\end{proposition}

\begin{proof}
    By Lemma \ref{11.1.18} we know that \(\mathbf{P} \# \mathbf{P}'\) is a partition of \(I\) and is both finer than \(\mathbf{P}\) and finer than \(\mathbf{P}'\), thus by Definition \ref{11.8.5} we have
    \[
        p.c. \int_{[\mathbf{P} \# \mathbf{P}']} f \; d \alpha = \sum_{J \in \mathbf{P} \# \mathbf{P}'} c_J \alpha[J].
    \]
    By Lemma \ref{11.8.4}, we know that
    \[
        \alpha[I] = \sum_{J \in \mathbf{P}} \alpha[J] = \sum_{J \in \mathbf{P} \# \mathbf{P}'} \alpha[J].
    \]
    By Definition \ref{11.1.14}, \(\forall\ S \in \mathbf{P} \# \mathbf{P}'\), \(\exists\ K \in \mathbf{P}\) such that \(S \subseteq K\).
    Now we fix such \(K\) and let \(\mathbf{P}_K\) be the set
    \[
        \mathbf{P}_K = \{S \in \mathbf{P} \# \mathbf{P}' : S \subseteq K\}.
    \]
    We know that \(\mathbf{P}_K\) is a partition of \(K\) and \(\bigcup_{K \in \mathbf{P}} \mathbf{P}_K = \mathbf{P} \# \mathbf{P}'\).
    (See the proof of Proposition \ref{11.2.13})
    Since \(f\) is piecewise constant with respect to \(\mathbf{P}\), by Lemma \ref{11.2.7} we know that \(f\) is piecewise constant with respect to \(\mathbf{P} \# \mathbf{P}'\).
    So we have
    \begin{align*}
        p.c. \int_{[\mathbf{P} \# \mathbf{P}']} f \; d \alpha & = \sum_{J \in \mathbf{P} \# \mathbf{P}'} c_J \alpha[J]                        & \text{(by Definition \ref{11.8.5})}     \\
                                                              & = \sum_{J \in \bigcup_{K \in \mathbf{P}} \mathbf{P}_K} c_J \alpha[J]                                                    \\
                                                              & = \sum_{K \in \mathbf{P}} \sum_{J \in \mathbf{P}_K} c_J \alpha[J]             & \text{(by Proposition \ref{7.1.11}(e))} \\
                                                              & = \sum_{K \in \mathbf{P}} \sum_{J \in \mathbf{P}_K} c_K \alpha[J]             & (J \subseteq K)                         \\
                                                              & = \sum_{K \in \mathbf{P}} c_K \bigg(\sum_{J \in \mathbf{P}_K} \alpha[J]\bigg)                                           \\
                                                              & = \sum_{K \in \mathbf{P}} c_K \alpha[K]                                       & \text{(by Lemma \ref{11.8.4})}          \\
                                                              & = p.c. \int_{[\mathbf{P}]} f \; d \alpha.                                     & \text{(by Definition \ref{11.8.5})}
    \end{align*}
    Using similar arguments we can show that \(p.c. \int_{[\mathbf{P}']} f \; d \alpha = p.c. \int_{[\mathbf{P} \# \mathbf{P}']} f \; d \alpha\).
    Thus we have \(p.c. \int_{[\mathbf{P}]} f \; d \alpha = p.c. \int_{[\mathbf{P}']} f \; d \alpha\).
\end{proof}

\begin{definition}\label{11.8.9}
    Let \(I\) be a bounded interval, let \(\alpha : X \to \mathbf{R}\) be a monotone increasing function defined on some interval \(X\) which contains \(I\), and let \(f : I \to \mathbf{R}\) be a piecewise constant function on \(I\).
    Then we define
    \[
        p.c. \int_I f \; d \alpha \coloneqq p.c. \int_{[\mathbf{P}]} f \; d \alpha,
    \]
    where \(\mathbf{P}\) is any partition of \(I\) with respect to which \(f\) is piecewise constant.
    (Note that Proposition \ref{11.8.8} tells us that the precise choice of this partition is irrelevant.)
\end{definition}

\begin{theorem}\label{11.8.10}
    Let \(I\) be a bounded interval, let \(\alpha : X \to \mathbf{R}\) be a monotone increasing function defined on some interval \(X\) which contains \(I\), and let \(f : I \to \mathbf{R}\) and \(g : I \to \mathbf{R}\) be piecewise constant functions on \(I\).
    \begin{enumerate}
        \item We have \(p.c. \int_I (f + g) \; d \alpha = p.c. \int_I f \; d \alpha + p.c. \int_I g \; d \alpha\).
        \item For any real number \(c\), we have \(p.c. \int_I (cf) \; d \alpha = c (p.c. \int_I f \; d \alpha)\).
        \item We have \(p.c. \int_I (f - g) \; d \alpha = p.c. \int_I f \; d \alpha - p.c. \int_I g \; d \alpha\).
        \item If \(f(x) \geq 0\) for all \(x \in I\), then \(p.c. \int_I f \; d \alpha \geq 0\).
        \item If \(f(x) \geq g(x)\) for all \(x \in I\), then \(p.c. \int_I f \; d \alpha \geq p.c. \int_I g \; d \alpha\).
        \item If \(f\) is the constant function \(f(x) = c\) for all \(x \in I\), then \(p.c. \int_I f \; d \alpha = c \alpha[I]\).
        \item Let \(J\) be a bounded interval containing \(I\) (i.e., \(I \subseteq J\)), and let \(F : J \to \mathbf{R}\) be the function
              \[
                  F(x) \coloneqq \begin{cases}
                      f(x) & \text{if } x \in I    \\
                      0    & \text{if } x \notin I
                  \end{cases}
              \]
              Then \(F\) is piecewise constant on \(J\), and \(p.c. \int_J F \; d \alpha = p.c. \int_I f \; d \alpha\).
        \item Suppose that \(\{J, K\}\) is a partition of \(I\) into two intervals \(J\) and \(K\).
              Then the function \(f|_J : J \to \mathbf{R}\) and \(f|_K : K \to \mathbf{R}\) are piecewise constant on \(J\) and \(K\) respectively, and we have
              \[
                  p.c. \int_I f \; d \alpha = p.c. \int_J f|_J \; d \alpha + p.c. \int_K f|_K \; d \alpha.
              \]
    \end{enumerate}
\end{theorem}

\begin{proof}{(a)}
    Since \(f, g\) are both piecewise constant on \(I\), by Lemma \ref{11.2.8} \(f + g\) is also piecewise constant on \(I\).
    By Definition \ref{11.2.3}, \(\exists\ \mathbf{P}_f, \mathbf{P}_g\) such that \(\mathbf{P}_f, \mathbf{P}_g\) are partitions of \(I\), \(f\) is piecewise constant with respect to \(\mathbf{P}_f\) and \(g\) is piecewise constant with respect to \(\mathbf{P}_g\).
    Let \(\mathbf{P} = \mathbf{P}_f \# \mathbf{P}_g\).
    Then by Lemma \ref{11.1.18} we know that \(\mathbf{P}\) is also a partition of \(I\) and by Lemma \ref{11.2.7} \(f, g\) are piecewise constant with respect to \(\mathbf{P}\).
    Now let \(J \in \mathbf{P}\), let \(f_J \in \mathbf{R}\) be the constant value of \(f\) on \(J\) and \(g_J \in \mathbf{R}\) be the constant value of \(g\) on \(J\).
    Then by Definition \ref{11.2.1} \(f_J + g_J\) is also a constant of \(f + g\) on \(J\).
    Thus we have \(f + g\) is piecewise constant with respect to \(\mathbf{P}\) and
    \begin{align*}
        p.c. \int_I f \; d \alpha + p.c. \int_I g \; d \alpha & = p.c. \int_{[\mathbf{P}]} f \; d \alpha + p.c. \int_{[\mathbf{P}]} g \; d \alpha & \text{(by Definition \ref{11.8.9})}     \\
                                                              & = \sum_{J \in \mathbf{P}} f_J \alpha[J] + \sum_{J \in \mathbf{P}} g_J \alpha[J]   & \text{(by Definition \ref{11.8.5})}     \\
                                                              & = \sum_{J \in \mathbf{P}} (f_J + g_J) \alpha[J]                                   & \text{(by Proposition \ref{7.1.11}(f))} \\
                                                              & = p.c. \int_{[\mathbf{P}]} (f_J + g_J) \; d \alpha                                & \text{(by Definition \ref{11.8.5})}     \\
                                                              & = p.c. \int_I (f_J + g_J) \; d \alpha.                                            & \text{(by Definition \ref{11.8.9})}
    \end{align*}
\end{proof}

\begin{proof}{(b)}
    Since \(f\) is piecewise constant on \(I\), by Lemma \ref{11.2.8} \(cf\) is also piecewise constant on \(I\) (since \(c\) is constant on \(I\)).
    By Definition \ref{11.2.3}, \(\exists\ \mathbf{P}\) such that \(\mathbf{P}\) is a partition of \(I\) and \(f\) is piecewise constant with respect to \(\mathbf{P}\).
    Now let \(J \in \mathbf{P}\) and let \(f_J \in \mathbf{R}\) be the constant value of \(f\) on \(J\).
    Then by Definition \ref{11.2.1} \(c f_J\) is also a constant of \(cf\) on \(J\).
    Thus we have \(cf\) is piecewise constant with respect to \(\mathbf{P}\) and
    \begin{align*}
        c (p.c. \int_I f \; d \alpha) & = c (p.c. \int_{[\mathbf{P}]} f \; d \alpha) & \text{(by Definition \ref{11.8.9})}     \\
                                      & = c (\sum_{J \in \mathbf{P}} f_J \alpha[J])  & \text{(by Definition \ref{11.8.5})}     \\
                                      & = \sum_{J \in \mathbf{P}} c f_J \alpha[J]    & \text{(by Proposition \ref{7.1.11}(g))} \\
                                      & = p.c. \int_{[\mathbf{P}]} (c f) \; d \alpha & \text{(by Definition \ref{11.8.5})}     \\
                                      & = p.c. \int_I (c f) \; d \alpha.             & \text{(by Definition \ref{11.8.9})}
    \end{align*}
\end{proof}

\begin{proof}{(c)}
    We have
    \begin{align*}
        p.c. \int_I f \; d \alpha - p.c. \int_I g \; d \alpha & = p.c. \int_I f \; d \alpha + (-1) p.c. \int_I g \; d \alpha                                        \\
                                                              & = p.c. \int_I f \; d \alpha + p.c. \int_I (-g) \; d \alpha   & \text{(by Theorem \ref{11.8.10}(b))} \\
                                                              & = p.c. \int_I (f + (-g)) \; d \alpha                         & \text{(by Theorem \ref{11.8.10}(a))} \\
                                                              & = p.c. \int_I (f - g) \; d \alpha.                           & \text{(by Definition \ref{9.2.1})}
    \end{align*}
\end{proof}


\exercisesection

\begin{exercise}\label{ex 11.8.1}
    Prove Lemma \ref{11.8.4}.
\end{exercise}

\begin{proof}
    See Lemma \ref{11.8.4}.
\end{proof}

\begin{exercise}\label{ex 11.8.2}
    State and prove a version of Proposition \ref{11.2.13} for the Riemann-Stieltjes integral.
\end{exercise}

\begin{proof}
    See Proposition \ref{11.8.8}.
\end{proof}

\begin{exercise}\label{ex 11.8.3}
    State and prove a version of Theorem \ref{11.2.16} for the Riemann-Stieltjes integral.
\end{exercise}

\begin{exercise}\label{ex 11.8.4}
    State and prove a version of Theorem \ref{11.5.1} for the Riemann-Stieltjes integral.
\end{exercise}

\begin{exercise}\label{ex 11.8.5}
    Let \(\text{sgn} : \mathbf{R} \to \mathbf{R}\) be the signum function
    \[
        \text{sgn}(x) = \begin{cases}
            1  & \text{when } x > 0  \\
            0  & \text{when } x = 0  \\
            -1 & \text{when } x < 0.
        \end{cases}
    \]
    Let \(f : [-1, 1] \to \mathbf{R}\) be a continuous function.
    Show that \(f\) is Riemann-Stieltjes integrable with respect to \(\text{sgn}\), and that
    \[
        \int_{[-1, 1]} f \; d \, \text{sgn} = 2f(0).
    \]
\end{exercise}