\section{Summation on infinite sets}\label{sec 8.2}

\begin{definition}[Series on countable sets]\label{8.2.1}
    Let \(X\) be a countable set, and let \(f : X \to \mathbf{R}\) be a function.
    We say that the series \(\sum_{x \in X} f(x)\) is absolutely convergent iff for some bijection \(g : \mathbf{N} \to X\), the sum \(\sum_{n = 0}^\infty f(g(n))\) is absolutely convergent.
    We then define the sum of \(\sum_{x \in X} f(x)\) by the formula
    \[
        \sum_{x \in X} f(x) = \sum_{n = 0}^\infty f(g(n)).
    \]
\end{definition}

\begin{note}
    From Proposition \ref{7.4.3} (and Proposition \ref{3.6.4}), one can show that these definitions do not depend on the choice of \(g\), and so are well defined.
\end{note}

\begin{note}
    For finite sets \(X\) we adopt the convention that series \(\sum_{x \in X} f(x)\) are automatically considered to be absolutely convergent.
\end{note}

\begin{theorem}[Fubini's theorem for infinite sums]\label{8.2.2}
    Let \(f : \mathbf{N} \times \mathbf{N} \to \mathbf{R}\) be a function such that \(\sum_{(n, m) \in \mathbf{N} \times \mathbf{N}} f(n, m)\) is absolutely convergent.
    Then we have
    \begin{align*}
        \sum_{n = 0}^\infty \bigg(\sum_{m = 0}^\infty f(n, m)\bigg) & = \sum_{(n, m) \in \mathbf{N} \times \mathbf{N}} f(n, m)       \\
                                                                    & = \sum_{(m, n) \in \mathbf{N} \times \mathbf{N}} f(n, m)       \\
                                                                    & = \sum_{m = 0}^\infty \bigg(\sum_{n = 0}^\infty f(n, m)\bigg).
    \end{align*}
    In other words, we can switch the order of infinite sums \emph{provided that the entire sum is absolutely convergent}.
\end{theorem}

\begin{proof}
    The second equality follows easily from Proposition \ref{7.4.3} (and Proposition \ref{3.6.4}).

    Let us first consider the case when \(f(n, m)\) is always non-negative (we will deal with the general case later).
    Write
    \[
        L \coloneqq \sum_{(n, m) \in \mathbf{N} \times \mathbf{N}} f(n, m);
    \]
    our task is to show that the series \(\sum_{n = 0}^\infty (\sum_{m = 0}^\infty f(n, m))\) converges to \(L\).

    One can easily show that \(\sum_{(n, m) \in X} f(n, m) \leq L\) for all finite sets \(X \subseteq \mathbf{N} \times \mathbf{N}\).
    (Use a bijection \(g\) between \(\mathbf{N} \times \mathbf{N}\) and \(\mathbf{N}\), and then use the fact that \(g(X)\) is finite, hence bounded.)
    In particular, for every \(n \in \mathbf{N}\) and \(M \in \mathbf{N}\) we have \(\sum_{m = 0}^M f(n, m) \leq L\), which implies by Proposition \ref{6.3.8} that \(\sum_{m = 0}^\infty f(n, m)\) is convergent for each \(n\).
    Similarly, for any \(N \in \mathbf{N}\) and \(M \in \mathbf{N}\) we have (by Corollary \ref{7.1.14})
    \[
        \sum_{n = 0}^N \sum_{m = 0}^M f(n, m) = \sum_{(n, m) \in X} f(n, m) \leq L
    \]
    where \(X\) is the set \(\{(n,m) \in \mathbf{N} \times \mathbf{N} : n \leq N, m \leq M\}\) which is finite by Proposition \ref{3.6.14}.
    Taking limits of this as \(M \to \infty\) we have (by Exercise \ref{ex 7.1.5} and either Proposition \ref{6.3.8} or Lemma \ref{6.4.13})
    \[
        \sum_{n = 0}^N \sum_{m = 0}^\infty f(n, m) \leq L.
    \]
    By Proposition \ref{6.3.8}, this implies that \(\sum_{n = 0}^\infty \sum_{m = 0}^\infty f(n, m)\) converges, and
    \[
        \sum_{n = 0}^\infty \sum_{m = 0}^\infty f(n, m) \leq L.
    \]
    To finish the proof, it will suffice to show that
    \[
        \sum_{n = 0}^\infty \sum_{m = 0}^\infty f(n, m) \geq L - \varepsilon
    \]
    for every \(\varepsilon > 0\).
    \begin{align*}
                 & L \geq \sum_{n = 0}^\infty \sum_{m = 0}^\infty f(n, m) \geq L - \varepsilon               \\
        \implies & L + \varepsilon \geq \sum_{n = 0}^\infty \sum_{m = 0}^\infty f(n, m) \geq L - \varepsilon \\
        \implies & \varepsilon \geq \sum_{n = 0}^\infty \sum_{m = 0}^\infty f(n, m) - L \geq -\varepsilon    \\
        \implies & \abs*{\sum_{n = 0}^\infty \sum_{m = 0}^\infty f(n, m) - L} \leq \varepsilon               \\
    \end{align*}
    So, let \(\varepsilon > 0\).
    By definition of \(L\), we can then find a finite set \(X \subseteq \mathbf{N} \times \mathbf{N}\) such that \(\sum_{(n, m) \in X} f(n, m) \geq L - \varepsilon\).
    (Since \(\mathbf{N} \times \mathbf{N}\) is countable by Corollary \ref{8.1.13}, we can find a bijection \(g : \mathbf{N} \to \mathbf{N} \times \mathbf{N}\) such that \(\sum_{i = 0}^\infty f(g(i)) = L\), which means \(\forall\ \varepsilon > 0\), \(\exists\ H \in \mathbf{N} \land H \geq 0\) such that \(\abs*{\sum_{i = 0}^h f(g(i)) - L} \leq \varepsilon\) for all \(h \geq H\).
    Now we can choose \(X = \{g(i) : 0 \leq i \leq H\}\))
    This set, being finite, must be contained in some set of the form \(Y \coloneqq \{(n,m) \in \mathbf{N} \times \mathbf{N} : n \leq N; m \leq M \}\).
    Thus by Corollary \ref{7.1.14}
    \[
        \sum_{n = 0}^N \sum_{m = 0}^M f(n, m) = \sum_{(n, m) \in Y} f(n, m) \geq \sum_{(n, m) \in X} f(n, m) \geq L - \varepsilon
    \]
    and hence
    \[
        \sum_{n = 0}^\infty \sum_{m = 0}^\infty f(n, m) \geq \sum_{n = 0}^N \sum_{m = 0}^\infty f(n, m) \geq \sum_{n = 0}^N \sum_{m = 0}^M f(n, m) \geq L - \varepsilon
    \]
    as desired.

    This proves the claim when the \(f(n, m)\) are all non-negative.
    A similar argument works when the \(f(n, m)\) are all non-positive
    (in fact, one can simply apply the result just obtained to the function \(-f(n, m)\), and then use limit laws to remove the \(-\).
    For the general case, note that any function \(f(n, m)\) can be written as \(f_+(n, m) + f_-(n, m)\), where \(f_+(n, m)\) is the positive part of \(f(n, m)\)
    (i.e., it equals \(f(n, m)\) when \(f(n, m)\) is positive, and \(0\) otherwise),
    and \(f_-\) is the negative part of \(f(n, m)\)
    (it equals \(f(n, m)\) when \(f(n, m)\) is negative, and \(0\) otherwise).
    It is easy to show that if \(\sum_{(n, m) \in \mathbf{N} \times \mathbf{N}} f(n, m)\) is absolutely convergent, then so are \(\sum_{(n, m) \in \mathbf{N} \times \mathbf{N}} f_+(n, m)\) and \(\sum_{(n, m) \in \mathbf{N} \times \mathbf{N}} f_-(n, m)\).
    (We can construct a bijection \(g : \mathbf{N} \to \mathbf{N} \times \mathbf{N}\) and then since \(\forall\ n \in \mathbf{N}\) we have \(f_+(g(n)) \leq \abs*{f(g(n))}\) and \(\abs*{f_-(g(n))} \leq \abs*{f(g(n))}\), we know that \((f_+(g(n)))_{n = 0}^\infty\) and \((f_-(g(n)))_{n = 0}^\infty\) are absolutely convergent by comparison test (Proposition \ref{7.3.2}.))
    So now one applies the results just obtained to \(f_+\) and to \(f_-\) and adds them together using limit laws to obtain the result for a general \(f\).
\end{proof}

\begin{lemma}\label{8.2.3}
    Let \(X\) be a countable set, and let \(f : X \to \mathbf{R}\) be a function.
    Then the series \(\sum_{x \in X} f(x)\) is absolutely convergent if and only if
    \[
        \sup\Bigg\{\sum_{x \in A} \abs*{f(x)} : A \subseteq X, A \text{ finite}\Bigg\} < \infty.
    \]
\end{lemma}

\begin{proof}
    Let \(P(X, f)\) be the statement
    \[
        \sup\Bigg\{\sum_{x \in A} \abs*{f(x)} : A \subseteq X, A \text{ finite}\Bigg\} < \infty.
    \]
    We first show that if \(\sum_{x \in X} f(x)\) is absolutely convergent, then \(P(X, f)\) is true.
    Let \(L = \sum_{x \in X} f(x)\).
    Since \(\sum_{x \in X} f(x)\) is absolutely convergent, by Definition \ref{8.2.1} \(\exists\ g : \mathbf{N} \to X\) where \(g\) is a bijection such that
    \[
        L = \sum_{x \in X} \abs*{f(x)} = \sum_{n = 0}^\infty \abs*{f(g(n))}.
    \]
    Let \(A \subseteq X\) be a finite set.
    Since \(g\) is a bijection, we have
    \[
        \sum_{x \in A} \abs*{f(x)} = \sum_{n \in g^{-1}(A)} \abs*{f(g(n))}
    \]
    Since \(A\) is finite, by Exercise \ref{ex 3.6.3}, \(\exists\ M \in \mathbf{N}\) such that \(g^{-1}(A)\) is bounded by \(M\).
    So we have
    \[
        \sum_{x \in A} \abs*{f(x)} = \sum_{n \in g^{-1}(A)} \abs*{f(g(n))} \leq \sum_{n = 0}^M \abs*{f(g(n))} \leq L
    \]
    This is true \(\forall\ A \subseteq X\).
    Thus by Theorem \ref{5.5.9} \(P(X, f)\) is true.

    Now we show that if \(P(X, f)\) is true, then \(\sum_{x \in X} f(x)\) is absolutely convergent.
    Let \(L\) be the supremum described by \(P(X, f)\).
    Since \(X\) is countable, \(\exists\ g : \mathbf{N} \to X\) where \(g\) is a bijection.
    So we have
    \begin{align*}
                 & \forall\ n \in \mathbf{N} : \sum_{x \in g(\{i \in \mathbf{N} : 0 \leq i \leq n\})} \abs*{f(x)} \leq L & (P(X, f) \text{ is true})           \\
        \implies & \forall\ n \in \mathbf{N} : \sum_{i = 0}^n \abs*{f(g(i))} \leq L                                      & \text{(by Definition \ref{7.1.6})}  \\
        \implies & \sum_{i = 0}^\infty \abs*{f(g(i))} \text{ converges}                                                  & \text{(by Proposition \ref{7.3.1})} \\
        \implies & \sum_{x \in X} \abs*{f(x)} \text{ converges}.                                                         & \text{(by Definition \ref{8.2.1})}
    \end{align*}
\end{proof}

\begin{note}
    Inspired by Lemma \ref{8.2.3}, we may now define the concept of an absolutely convergent series even when the set \(X\) could be uncountable.
\end{note}

\begin{definition}\label{8.2.4}
    Let \(X\) be a set (which could be uncountable), and let \(f : X \to \mathbf{R}\) be a function.
    We say that the series \(\sum_{x \in X} f(x)\) is absolutely convergent iff
    \[
        \sup\Bigg\{\sum_{x \in A} \abs*{f(x)} : A \subseteq X, A \text{ finite}\Bigg\} < \infty.
    \]
\end{definition}

\begin{lemma}\label{8.2.5}
    Let \(X\) be a set (which could be uncountable), and let \(f : X \to \mathbf{R}\) be a function such that the series \(\sum_{x \in X} f(x)\) is absolutely convergent.
    Then the set \(\{x \in X : f(x) \neq 0\}\) is at most countable.
\end{lemma}

\begin{proof}
    Suppose that \(X\) is a set and \(f : X \to \mathbf{R}\) is a function such that \(\sum_{x \in X} f(x)\) is absolutely convergent.
    Since \(\sum_{x \in X} f(x)\) is absolutely convergent, by Definition \ref{8.2.4} we have
    \[
        M = \sup\Bigg\{\sum_{x \in A} \abs*{f(x)} : A \subseteq X, A \text{ finite}\Bigg\} < \infty.
    \]
    We first show that \(\forall\ n \in \mathbf{N} \setminus \{0\}\), the set \(S_n = \{x \in X : \abs*{f(x)} > 1 / n\}\) is finite and \(\#(S_n) \leq Mn\).

    Suppose for sake of contradiction that \(S_n\) is infinite.
    Then we can have a finite set \(S \subsetneq S_n\) where \(\#(S) = (M + 1)n\).
    Since \(S\) is finite, we have \(\sum_{x \in S} \abs*{f(x)} \leq M\).
    Since \(S \subsetneq S_n\), we have \(\forall\ x \in S : \abs*{x} > 1 / n\).
    But now we have
    \[
        M \geq \sum_{x \in S} \abs*{f(x)} > \frac{(M + 1)n}{n} = M + 1,
    \]
    a contradiction.
    Thus \(S\) must be finite.

    Now suppose for sake of contradiction \(\#(S_n) > Mn\).
    Again we have
    \[
        M \geq \sum_{x \in S} \abs*{f(x)} > \frac{\#(S_n)}{n} > \frac{Mn}{n} = M,
    \]
    a contradiction.
    Thus \(\#(S_n) \leq Mn\).

    Let \(x \in X\) where \(f(x) \neq 0\).
    If \(x\) does not exist, then we have \(\{x \in X : f(x) \neq 0\} = \emptyset\) which is at most countable.
    So suppose that such \(x\) exists.
    Since \(\abs*{f(x)} \in \mathbf{R}\), by Proposition \ref{5.4.12} we have
    \begin{align*}
                 & \exists\ N \in \mathbf{N} : \frac{1}{\abs*{f(x)}} < N                                                                       \\
        \implies & \abs*{f(x)} > \frac{1}{N}                                                                                                   \\
        \implies & x \in S_N                                                                           & \text{(by the definition of \(S_N\))} \\
        \implies & x \in \bigcup_{n \in \mathbf{N} \setminus \{0\}} S_n                                & \text{(by Axiom \ref{3.11})}          \\
        \implies & \{x \in X : f(x) \neq 0\} \subseteq \bigcup_{n \in \mathbf{N} \setminus \{0\}} S_n. & \text{(by Definition \ref{3.1.15})}
    \end{align*}
    Since \(\forall\ n \in \mathbf{N} \setminus \{0\}\), \(S_n\) is finite and thus at most countable, by Exercise \ref{8.1.9} we have \(\bigcup_{n \in \mathbf{N} \setminus \{0\}} S_n\) is at most countable.
    Since \(\{x \in X : f(x) \neq 0\} \subseteq \bigcup_{n \in \mathbf{N} \setminus \{0\}} S_n\), by Corollary \ref{8.1.7} we thus have \(\{x \in X : f(x) \neq 0\}\) is at most countable.
\end{proof}

\begin{note}
    Because Lemma \ref{8.2.5}, we can define the value of \(\sum_{x \in X} f(x)\) for any absolutely convergent series on an uncountable set \(X\) by the formula
    \[
        \sum_{x \in X} \coloneqq \sum_{x \in X : f(x) \neq 0} f(x),
    \]
    since we have replaced a sum on an uncountable set \(X\) by a sum on the countable set \(\{x \in X : f(x) \neq 0\}\).
    (If the former sum is absolutely convergent, then the latter one is also.)
    Definition \ref{8.2.4} is consistent with the definitions we already have for series on countable sets (Definition \ref{8.2.1}).
\end{note}

\begin{proposition}[Absolutely convergent series laws]\label{8.2.6}
    Let \(X\) be an arbitrary set (possibly uncountable), and let \(f : X \to \mathbf{R}\) and \(g : X \to \mathbf{R}\) be functions such that the series \(\sum_{x \in X} f(x)\) and \(\sum_{x \in X} g(x)\) are both absolutely convergent.
    \begin{enumerate}
        \item The series \(\sum_{x \in X} (f(x) + g(x))\) is absolutely convergent, and
              \[
                  \sum_{x \in X} (f(x) + g(x)) = \sum_{x \in X} f(x) + \sum_{x \in X} g(x).
              \]
        \item If \(c\) is a real number, then \(\sum_{x \in X} cf(x)\) is absolutely convergent, and
              \[
                  \sum_{x \in X} cf(x) = c \sum_{x \in X} f(x).
              \]
        \item If \(X = X_1 \cup X_2\) for some disjoint sets \(X_1\) and \(X_2\), then \(\sum_{x \in X_1} f(x)\) and \(\sum_{x \in X_2} f(x)\) are absolutely convergent, and
              \[
                  \sum_{x \in X_1 \cup X_2} f(x) = \sum_{x \in X_1} f(x) + \sum_{x \in X_2} f(x).
              \]
              Conversely, if \(h : X \to \mathbf{R}\) is such that \(\sum_{x \in X_1} h(x)\) and \(\sum_{x \in X_2} h(x)\) are absolutely convergent, then \(\sum_{x \in X_1 \cup X_2} h(x)\) is also absolutely convergent, and
              \[
                  \sum_{x \in X_1 \cup X_2} h(x) = \sum_{x \in X_1} h(x) + \sum_{x \in X_2} h(x).
              \]
        \item If \(Y\) is another set, and \(\phi : Y \to X\) is a bijection, then \(\sum_{y \in Y} f(\phi(y))\) is absolutely convergent, and
              \[
                  \sum_{y \in Y} f(\phi(y)) = \sum_{x \in X} f(x).
              \]
    \end{enumerate}
\end{proposition}

\begin{proof}{(a)}
    Suppose that \(X\) is a set and \(f : X \to \mathbf{R}, g : X \to \mathbf{R}\) are functions such that \(\sum_{x \in X} f(x)\) and \(\sum_{x \in X} g(x)\) are both absolutely convergent.
    By Proposition \ref{7.1.11}(f) we already show that the statement is true when \(X\) is finite.
    So suppose that \(X\) is infinite.

    We first show that \(\sum_{x \in X} (f(x) + g(x))\) is absolutely convergent.
    Since \(\sum_{x \in X} f(x)\) and \(\sum_{x \in X} g(x)\) are both absolutely convergent, by Definition \ref{8.2.4}, \(\exists\ N, M \in \mathbf{R}\) such that
    \[
        N = \sup\Bigg\{\sum_{x \in A} \abs*{f(x)} : A \subseteq X, A \text{ finite}\Bigg\} < \infty
    \]
    and
    \[
        M = \sup\Bigg\{\sum_{x \in A} \abs*{g(x)} : A \subseteq X, A \text{ finite}\Bigg\} < \infty.
    \]
    Let \(A \subseteq X\) be a finite set.
    Then we have
    \begin{align*}
        \sum_{x \in A} \abs*{f(x) + g(x)} & \leq \sum_{x \in A} (\abs*{f(x)} + \abs*{g(x)})                                                     \\
                                          & = \sum_{x \in A} \abs*{f(x)} + \sum_{x \in A} \abs*{g(x)} & \text{(by Proposition \ref{7.1.11}(f))} \\
                                          & \leq N + M.
    \end{align*}
    Since \(A\) is arbitrary, we have
    \[
        \sup\Bigg\{\sum_{x \in A} \abs*{f(x) + g(x)} : A \subseteq X, A \text{ finite}\Bigg\} \leq N + M < \infty.
    \]
    Thus by Definition \ref{8.2.4} we have \(\sum_{x \in X} (f(x) + g(x))\) is absolutely convergent.

    Now we show that \(\sum_{x \in X} (f(x) + g(x)) = \sum_{x \in X} f(x) + \sum_{x \in X} g(x)\).
    Let \(X_f = \{x \in X : f(x) \neq 0\}\), \(X_g = \{x \in X : g(x) \neq 0\}\) and \(X_h = \{x \in X : f(x) + g(x) \neq 0\}\) be sets.
    Then by Lemma \ref{8.2.5} we have all \(X_f\), \(X_g\) and \(X_h\) are at most countable.
    Since
    \begin{align*}
                 & \forall\ x \in X_h                                         \\
        \implies & f(x) + g(x) \neq 0                                         \\
        \implies & (f(x) \neq 0 \land g(x) = 0)                               \\
                 & \lor (f(x) = 0 \land g(x) \neq 0)                          \\
                 & \lor (f(x) \neq 0 \land g(x) \neq 0 \land f(x) \neq -g(x)) \\
        \implies & x \in X_f \lor x \in X_g                                   \\
        \implies & x \in X_f \cup X_g,
    \end{align*}
    we have \(X_h \subseteq X_f \cup X_g\).
    We also have
    \[
        (X_f \cup X_g) \setminus X_h = \{x \in X : f(x) \neq 0 \land g(x) \neq 0 \land f(x) + g(x) = 0\}.
    \]
    Now we split into two cases:
    \begin{enumerate}[label=(\Roman*)]
        \item If \(X_f \cup X_g\) is finite, then both \(X_h\) and \((X_f \cup X_g) \setminus X_h\) are finite.
              Thus
              \begin{align*}
                   & \sum_{x \in X} (f(x) + g(x))                                                                                                         \\
                   & = \sum_{x \in X_h} (f(x) + g(x))                                                           & \text{(by Definition \ref{8.2.4})}      \\
                   & = \sum_{x \in X_h} (f(x) + g(x)) + 0                                                                                                 \\
                   & = \sum_{x \in X_h} (f(x) + g(x)) + \sum_{x \in (X_f \cup X_g) \setminus X_h} (f(x) + g(x))                                           \\
                   & = \sum_{x \in X_f \cup X_g} (f(x) + g(x))                                                  & \text{(by Proposition \ref{7.1.11}(e))} \\
                   & = \sum_{x \in X_f \cup X_g} f(x) + \sum_{x \in X_f \cup X_g} g(x)                          & \text{(by Proposition \ref{7.1.11}(f))} \\
                   & = \sum_{x \in X_f} f(x) + \sum_{x \in (X_f \cup X_g) \setminus X_f} f(x)                   & \text{(by Proposition \ref{7.1.11}(e))} \\
                   & \quad + \sum_{x \in X_g} g(x) + \sum_{x \in (X_f \cup X_g) \setminus X_g} g(x)             & \text{(by Proposition \ref{7.1.11}(e))} \\
                   & = \sum_{x \in X_f} f(x) + \sum_{x \in X_g} g(x)                                                                                      \\
                   & = \sum_{x \in X} f(x) + \sum_{x \in X} g(x).                                               & \text{(by Definition \ref{8.2.4})}
              \end{align*}
        \item If \(X_f \cup X_g\) is countable, then by Definition \ref{8.1.1} \(\exists\ n_{fg} : \mathbf{N} \to X_f \cup X_g\) such that \(n_{fg}\) is bijective.
              By Corollary \ref{8.1.5} we know that both \(X_h\) and \((X_f \cup X_g) \setminus X_h\) are at most countable.
              Thus
              \begin{align*}
                   & \sum_{x \in X} (f(x) + g(x))                                                                                                         \\
                   & = \sum_{x \in X_h} (f(x) + g(x))                                                           & \text{(by Definition \ref{8.2.4})}      \\
                   & = \sum_{x \in X_h} (f(x) + g(x)) + 0                                                                                                 \\
                   & = \sum_{x \in X_h} (f(x) + g(x)) + \sum_{x \in (X_f \cup X_g) \setminus X_h} (f(x) + g(x))                                           \\
                   & = \sum_{x \in X_f \cup X_g} (f(x) + g(x))                                                  & \text{(by Proposition \ref{8.2.6}(c))}  \\
                   & = \sum_{n = 0}^\infty (f(n_{fg}(n)) + g(n_{fg}(n)))                                        & \text{(by Definition \ref{8.2.1})}      \\
                   & = \sum_{n = 0}^\infty f(n_{fg}(n)) + \sum_{n = 0}^\infty g(n_{fg}(n))                      & \text{(by Proposition \ref{7.2.14}(a))} \\
                   & = \sum_{x \in X_f \cup X_g} f(x) + \sum_{x \in X_f \cup X_g} g(x)                          & \text{(by Definition \ref{8.2.1})}      \\
                   & = \sum_{x \in X_f} f(x) + \sum_{x \in (X_f \cup X_g) \setminus X_f} f(x)                   & \text{(by Proposition \ref{8.2.6}(c))}  \\
                   & \quad + \sum_{x \in X_g} g(x) + \sum_{x \in (X_f \cup X_g) \setminus X_g} g(x)             & \text{(by Proposition \ref{8.2.6}(c))}  \\
                   & = \sum_{x \in X_f} f(x) + \sum_{x \in X_g} g(x)                                                                                      \\
                   & = \sum_{x \in X} f(x) + \sum_{x \in X} g(x).                                               & \text{(by Definition \ref{8.2.4})}
              \end{align*}
    \end{enumerate}
    From all cases above we can conclude that
    \[
        \sum_{x \in X} (f(x) + g(x)) = \sum_{x \in X} f(x) + \sum_{x \in X} g(x).
    \]
\end{proof}

\begin{proof}{(b)}
    Suppose that \(c \in \mathbf{R}\), \(X\) is a set and \(f : X \to \mathbf{R}\) is a function such that \(\sum_{x \in X} f(x)\) is absolutely convergent.
    Since \(\sum_{x \in X} f(x)\) is absolutely convergent, by Definition \ref{8.2.4}, \(\exists\ N \in \mathbf{R}\) such that
    \[
        N = \sup\Bigg\{\sum_{x \in A} \abs*{f(x)} : A \subseteq X, A \text{ finite}\Bigg\} < \infty.
    \]
    Let \(A \subseteq X\) be a finite set.
    Then we have
    \begin{align*}
        \sum_{x \in A} \abs*{cf(x)} & = \sum_{x \in A} \abs*{c}\abs*{f(x)}                                           \\
                                    & = \abs*{c}\sum_{x \in A} \abs*{f(x)} & \text{(by Proposition \ref{7.1.11}(g))} \\
                                    & \leq \abs*{c} N.
    \end{align*}
    Since \(A\) is arbitrary, we have
    \[
        \sup\Bigg\{\sum_{x \in A} \abs*{cf(x)} : A \subseteq X, A \text{ finite}\Bigg\} \leq \abs*{c}N < \infty.
    \]
    Thus by Definition \ref{8.2.4} we have \(\sum_{x \in X} cf(x)\) is absolutely convergent.

    Now we show that \(\sum_{x \in X} cf(x) = c \sum_{x \in X} f(x)\).
    Let \(X_f = \{x \in X : f(x) \neq 0\}\) and \(X_h = \{x \in X : cf(x) \neq 0\}\) be two sets.
    By Lemma \ref{8.2.5} we know that both \(X_f\) and \(X_h\) are at most countable.
    If \(c = 0\), then \(X_h = \emptyset\) and we have
    \begin{align*}
        \sum_{x \in X} 0f(x) & = \sum_{x \in X_h} 0f(x)  & \text{(by Definition \ref{8.2.4})}      \\
                             & = 0                       & \text{(by Proposition \ref{7.1.11}(a))} \\
                             & = 0 \sum_{x \in X_f} f(x)                                           \\
                             & = 0 \sum_{x \in X} f(x).  & \text{(by Definition \ref{8.2.4})}
    \end{align*}
    Thus the statement is true when \(c = 0\).
    Now suppose that \(c \neq 0\).
    Since \(\forall\ x \in X : cf(x) \neq 0 \iff f(x) \neq 0\), we have \(X_h = X_f\).
    We split into two cases:
    \begin{enumerate}[label=(\Roman*)]
        \item If \(X_h\) is finite, then we have
              \begin{align*}
                  \sum_{x \in X} cf(x) & = \sum_{x \in X_h} cf(x)  & \text{(by Definition \ref{8.2.4})}      \\
                                       & = c \sum_{x \in X_h} f(x) & \text{(by Proposition \ref{7.1.11}(g))} \\
                                       & = c \sum_{x \in X_f} f(x)                                           \\
                                       & = c \sum_{x \in X} f(x).  & \text{(by Definition \ref{8.2.4})}
              \end{align*}
        \item If \(X_h\) is countable, then by Definition \ref{8.1.1}, \(\exists\ n_h : X_h \to \mathbf{N}\) such that \(n_h\) is bijective.
              Thus
              \begin{align*}
                  \sum_{x \in X} cf(x) & = \sum_{x \in X_h} cf(x)          & \text{(by Definition \ref{8.2.4})}      \\
                                       & = \sum_{n = 0}^\infty cf(n_h(n))  & \text{(by Definition \ref{8.2.1})}      \\
                                       & = c \sum_{n = 0}^\infty f(n_h(n)) & \text{(by Proposition \ref{7.2.14}(b))} \\
                                       & = c \sum_{x \in X_h} f(x)         & \text{(by Definition \ref{8.2.1})}      \\
                                       & = c \sum_{x \in X_f} f(x)                                                   \\
                                       & = c \sum_{x \in X} f(x).          & \text{(by Definition \ref{8.2.4})}
              \end{align*}
    \end{enumerate}
    From all cases above we can conclude that \(\sum_{x \in X} cf(x) = c \sum_{x \in X} f(x)\).
\end{proof}

\begin{proof}{(c)}
    Suppose that \(X\) is a set and \(f : X \to \mathbf{R}\) is a function such that \(\sum_{x \in X} f(x)\) is absolutely convergent.
    Let \(X = X_1 \cup X_2\) where \(X_1 \cap X_2 = \emptyset\).
    Since \(\sum_{x \in X} f(x)\) is absolutely convergent, by Definition \ref{8.2.4}, \(\exists\ N \in \mathbf{R}\) such that
    \[
        N = \sup\Bigg\{\sum_{x \in A} \abs*{f(x)} : A \subseteq X, A \text{ finite}\Bigg\} < \infty.
    \]
    Let \(A_1 \subseteq X_1, A_2 \subseteq X_2\) such that both \(A_1, A_2\) are finite.
    Then we have
    \begin{align*}
         & \sum_{x \in A_1} \abs*{f(x)} \leq N, \\
         & \sum_{x \in A_2} \abs*{f(x)} \leq N.
    \end{align*}
    Since \(A_1, A_2\) are arbitrary, we have
    \[
        \sup\Bigg\{\sum_{x \in A} \abs*{f(x)} : A \subseteq X_1, A \text{ finite}\Bigg\} \leq N < \infty
    \]
    and
    \[
        \sup\Bigg\{\sum_{x \in A} \abs*{f(x)} : A \subseteq X_2, A \text{ finite}\Bigg\} \leq N < \infty.
    \]
    Thus by Definition \ref{8.2.4} both \(\sum_{x \in X_1} f(x)\) and \(\sum_{x \in X_2} f(x)\) are absolutely convergent.

    Now we show that \(\sum_{x \in X_1 \cup X_2} f(x) = \sum_{x \in X_1} f(x) + \sum_{x \in X_2} f(x)\).
    Let \(X_f = \{x \in X : f(x) \neq 0\}, X_{f1} = \{x \in X_1 : f(x) \neq 0\}, X_{f2} = \{x \in X_2 : f(x) \neq 0\}\) be sets.
    Clearly we have \(X_{f1} \cup X_{f2} = X_f\).
    By Lemma \ref{8.2.5} we know that \(X_f, X_{f1}, X_{f2}\) are at most countable.
    Now we split into two cases:
    \begin{enumerate}[label=(\Roman*)]
        \item If \(X_f\) is finite, then \(X_{f1}, X_{f2}\) are finite.
              Thus
              \begin{align*}
                   & \sum_{x \in X} f(x)                                                                             \\
                   & = \sum_{x \in X_f} f(x)                               & \text{(by Definition \ref{8.2.4})}      \\
                   & = \sum_{x \in X_{f1} \cup X_{f2}} f(x)                                                          \\
                   & = \sum_{x \in X_{f1}} f(x) + \sum_{x \in X_{f2}} f(x) & \text{(by Proposition \ref{7.1.11}(e))} \\
                   & = \sum_{x \in X_1} f(x) + \sum_{x \in X_2} f(x).      & \text{(by Definition \ref{8.2.4})}
              \end{align*}
        \item If \(X_f\) is countable, then \(\exists\ n_f : \mathbf{N} \to X_f\) such that \(n_f\) is bijective.
              Since \(X_f = X_{f1} \cup X_{f2}\), by Proposition \ref{8.1.10} we know that at least one of the sets \(X_{f1}\) and \(X_{f2}\) is countable.
              We now further split into two cases:
              \begin{enumerate}[label=(\roman*)]
                  \item If one of the sets is finite, say \(X_{f1}\) is finite, then we can set \(n_f\) as follow:
                        \[
                            \forall\ n \in \mathbf{N} : n_f(n) = \begin{cases}
                                n_{X_1}(n)              & \text{if } 0 \leq n \leq \#(X_{f1}) - 1, \\
                                n_{X_2}(n - \#(X_{f1})) & \text{otherwise}.
                            \end{cases}
                        \]
                        Where \(n_{X_1} : \{i \in \mathbf{N} : 0 \leq n \leq \#(X_{f1})\} \to X_{f1}\) and \(n_{X_2} : \mathbf{N} \to X_{f2}\) are bijections.
                        Thus
                        \begin{align*}
                             & \sum_{x \in X} f(x)                                                                                                          \\
                             & = \sum_{x \in X_f} f(x)                                                            & \text{(by Definition \ref{8.2.4})}      \\
                             & = \sum_{n = 0}^\infty f(n_f(n))                                                    & \text{(by Definition \ref{8.2.1})}      \\
                             & = \sum_{n = 0}^{\#(X_{f1}) - 1} f(n_f(n)) + \sum_{n = \#(X_{f1})}^\infty f(n_f(n)) & \text{(by Proposition \ref{7.2.14}(c))} \\
                             & = \sum_{n = 0}^{\#(X_{f1}) - 1} f(n_{X_1}(n))                                                                                \\
                             & \quad + \sum_{n = \#(X_{f1})}^\infty f(n_{X_2}(n - \#(X_{f1})))                                                              \\
                             & = \sum_{n = 0}^{\#(X_{f1}) - 1} f(n_{X_1}(n)) + \sum_{n = 0}^\infty f(n_{X_2}(n))  & \text{(by Proposition \ref{7.2.14}(d))} \\
                             & = \sum_{x \in X_{f1}} f(x) + \sum_{n = 0}^\infty f(n_{X_2}(n))                     & \text{(by Definition \ref{7.1.6})}      \\
                             & = \sum_{x \in X_{f1}} f(x) + \sum_{x \in X_{f2}} f(x)                              & \text{(by Definition \ref{8.2.1})}      \\
                             & = \sum_{x \in X_1} f(x) + \sum_{x \in X_2} f(x).                                   & \text{(by Definition \ref{8.2.4})}
                        \end{align*}
                  \item If both sets are countable, then by Definition \ref{8.1.1} \(\exists\ n_{X_1} : \mathbf{N} \to X_{f1}, n_{X_2} : \mathbf{N} \to X_{f2}\) such that both are bijections.
                        By Definition \ref{8.2.1} we have
                        \[
                            \sum_{x \in X_1} f(x) = \sum_{n = 0}^\infty f(n_{X_1}(n)) ; \sum_{x \in X_2} f(x) = \sum_{n = 0}^\infty f(n_{X_2}(n)).
                        \]
                        Let \((S_n^f)_{n = 0}^\infty, (S_n^{X_1})_{n = 0}^\infty, (S_n^{X_2})_{n = 0}^\infty\) be sequences of partial sums
                        \[
                            S_N^f = \sum_{n = 0}^N f(n_f(n)) ; S_N^{X_1} = \sum_{n = 0}^N f(n_{X_1}(n)) ; S_N^{X_2} = \sum_{n = 0}^N f(n_{X_2}(n)).
                        \]
                        To prove that
                        \[
                            \sum_{n = 0}^\infty f(n_f(x)) = \sum_{n = 0}^\infty f(n_{X_1}(n)) + \sum_{n = 0}^\infty f(n_{X_2}(n)),
                        \]
                        we can instead prove
                        \[
                            \lim_{N \to \infty} S_N^f = \lim_{N \to \infty} S_N^{X_1} + \lim_{N \to \infty} S_N^{X_2} = \lim_{N \to \infty} S_N^{X_1} + S_N^{X_2}.
                        \]
                        We can set \(n_f\) as follow:
                        \[
                            \forall\ n \in \mathbf{N} : n_f(n) = \begin{cases}
                                n_{X_1}(\frac{n}{2})     & \text{if } n \text{ is even}, \\
                                n_{X_2}(\frac{n - 1}{2}) & \text{if } n \text{ is odd}.
                            \end{cases}
                        \]
                        Then we have
                        \[
                            \sum_{n = 0}^{2N + 1} f(n_f(n)) = \sum_{n = 0}^N f(n_{X_1}(n)) + \sum_{n = 0}^N f(n_{X_2}(n)).
                        \]
                        Thus by Definition \ref{7.2.2} we have
                        \[
                            \lim_{N \to \infty} \sum_{n = 0}^{2N + 1} f(n_f(n)) = \lim_{N \to \infty} \Bigg(\sum_{n = 0}^N f(n_{X_1}(n)) + \sum_{n = 0}^N f(n_{X_2}(n))\Bigg)
                        \]
                        and
                        \begin{align*}
                             & \sum_{x \in X} f(x)                                                                                          \\
                             & = \sum_{x \in X_f} f(x)                                                 & \text{(by Definition \ref{8.2.4})} \\
                             & = \sum_{n = 0}^\infty f(n_f(n))                                         & \text{(by Definition \ref{8.2.1})} \\
                             & = \sum_{n = 0}^\infty f(n_{X_1}(n)) + \sum_{n = 0}^\infty f(n_{X_2}(n))                                      \\
                             & = \sum_{x \in X_{f1}} f(x) + \sum_{x \in X_{f2}} f(x)                   & \text{(by Definition \ref{8.2.1})} \\
                             & = \sum_{x \in X_1} f(x) + \sum_{x \in X_2} f(x).                        & \text{(by Definition \ref{8.2.4})}
                        \end{align*}
              \end{enumerate}
    \end{enumerate}
    From all cases above we can conclude that \(\sum_{x \in X} f(x) = \sum_{x \in X_1} f(x) + \sum_{x \in X_2} f(x)\).

    Finally we show that if \(h : X \to \mathbf{R}\) is a function such that \(\sum_{x \in X_1} h(x)\) and \(\sum_{x \in X_2} h(x)\) are absolutely convergent, then \(\sum_{x \in X} h(x)\) is also absolutely convergent.
    Since \(\sum_{x \in X_1} h(x)\) and \(\sum_{x \in X_2} h(x)\) are absolutely convergent, by Definition \ref{8.2.4}, \(\exists\ N, M \in \mathbf{R}\) such that
    \[
        N = \sup\Bigg\{\sum_{x \in A} \abs*{h(x)} : A \subseteq X_1, A \text{ finite}\Bigg\} < \infty
    \]
    and
    \[
        M = \sup\Bigg\{\sum_{x \in A} \abs*{h(x)} : A \subseteq X_2, A \text{ finite}\Bigg\} < \infty.
    \]
    Let \(A \subseteq X\) be a finite set.
    Let \(A_1 = A \cap X_1\) and \(A_2 = A \cap X_2\).
    Clearly we have
    \begin{align*}
        A_1 \cap A_2 & = \emptyset,       \\
        A_1 \cup A_2 & = A,               \\
        A_1          & \subseteq X_1,     \\
        A_2          & \subseteq X_2,     \\
        A_1          & \text{ is finite}, \\
        A_2          & \text{ is finite}.
    \end{align*}
    Then we have
    \begin{align*}
        \sum_{x \in A} \abs*{h(x)} & = \sum_{x \in A_1 \cup A_2} \abs*{h(x)}                       \\
                                   & = \sum_{x \in A_1} \abs*{h(x)} + \sum_{x \in A_2} \abs*{h(x)} \\
                                   & \leq N + M.
    \end{align*}
    Since \(A\) is arbitrary, we have
    \[
        \sup\Bigg\{\sum_{x \in A} \abs*{h(x)} : A \subseteq X, A \text{ finite}\Bigg\} \leq N + M < \infty
    \]
    Thus by Definition \ref{8.2.4} \(\sum_{x \in X} h(x)\) is absolutely convergent.
\end{proof}

\begin{proof}{(d)}
    Suppose that \(X, Y\) be sets and \(f : X \to \mathbf{R}, \phi : Y \to X\) are functions such that \(\sum_{x \in X} f(x)\) is absolutely convergent and \(\phi\) is bijective.
    Since \(\sum_{x \in X} f(x)\) is absolutely convergent, by Definition \ref{8.2.4}, \(\exists\ N \in \mathbf{R}\) such that
    \[
        N = \sup\Bigg\{\sum_{x \in A} \abs*{f(x)} : A \subseteq X, A \text{ finite}\Bigg\} < \infty
    \]
    Let \(A \subseteq Y\) be a finite set.
    Then we have
    \begin{align*}
        \sum_{y \in A} \abs*{f(\phi(y))} & = \sum_{x \in \phi(A)} \abs*{f(x)} & \text{(by Proposition \ref{7.1.11}(c))} \\
                                         & \leq N.                            & \text{(\(\phi(A)\) is finite)}
    \end{align*}
    Since \(A\) is arbitrary, we have
    \[
        \sup\Bigg\{\sum_{y \in A} \abs*{f(\phi(x))} : A \subseteq Y, A \text{ finite}\Bigg\} \leq N < \infty.
    \]
    Thus by Definition \ref{8.2.4} \(\sum_{y \in Y} f(\phi(y))\) is absolutely convergent.

    Now we show that \(\sum_{y \in Y} f(\phi(y)) = \sum_{x \in X} f(x)\).
    Let \(X_f = \{x \in X : f(x) \neq 0\}\) and \(Y_f = \{y \in Y : f(\phi(y)) \neq 0\}\) be sets.
    By Lemma \ref{8.2.5} we know that \(X_f\) is at most countable.
    Clearly we have \(\phi(Y_f) = X_f\), thus \(Y_f\) is at most countable.
    We now split into two cases:
    \begin{enumerate}[label=(\Roman*)]
        \item If \(X_f\) is finite, then we have
              \begin{align*}
                   & \sum_{y \in Y} f(\phi(y))                                               \\
                   & = \sum_{y \in Y_f} f(\phi(y)) & \text{(by Definition \ref{8.2.4})}      \\
                   & = \sum_{x \in X_f} f(x)       & \text{(by Proposition \ref{7.1.11}(c))} \\
                   & = \sum_{x \in X} f(x).        & \text{(by Definition \ref{8.2.4})}
              \end{align*}
        \item If \(X_f\) is countable, then \(\exists\ n_y : \mathbf{N} \to Y_f\) such that \(n_y\) is bijective.
              Let \(n_x = \phi \circ n_y\).
              By Exercise \ref{ex 3.3.7} \(n_x\) is bijective from \(\mathbf{N}\) to \(X_f\).
              Then we have
              \begin{align*}
                   & \sum_{y \in Y} f(\phi(y))                                                  \\
                   & = \sum_{y \in Y_f} f(\phi(y))         & \text{(by Definition \ref{8.2.4})} \\
                   & = \sum_{n = 0}^\infty f(\phi(n_y(n))) & \text{(by Definition \ref{8.2.1})} \\
                   & = \sum_{n = 0}^\infty f(n_x(n))                                            \\
                   & = \sum_{x \in X_f} f(x)               & \text{(by Definition \ref{8.2.1})} \\
                   & = \sum_{x \in X} f(x).                & \text{(by Definition \ref{8.2.4})}
              \end{align*}
    \end{enumerate}
    From all cases above we can conclude that \(\sum_{y \in Y} f(\phi(y)) = \sum_{x \in X} f(x)\).
\end{proof}

\begin{lemma}\label{8.2.7}
    Let \(\sum_{n = 0}^\infty a_n\) be a series of real numbers which is conditionally convergent, but not absolutely convergent.
    Define the sets \(A_+ \coloneqq \{n \in \mathbf{N} : a_n \geq 0\}\) and \(A_- \coloneqq \{n \in \mathbf{N} : a_n < 0\}\), thus \(A_+ \cup A_- = \mathbf{N}\) and \(A_+ \cap A_- = \emptyset\).
    Then both of the series \(\sum_{n \in A_+} a_n\) and \(\sum_{n \in A_-} a_n\) are not absolutely convergent.
\end{lemma}

\begin{proof}
    Suppose for sake of contradiction that at least one of the series \(\sum_{n \in A_+} a_n\) and \(\sum_{n \in A_-} a_n\) is absolutely convergent.
    Let \(b_n = \max(a_n, 0)\) and \(c_n = -\min(a_n, 0)\).
    Then we have \(a_n = b_n - c_n\) and
    \begin{align*}
        \sum_{n = 0}^\infty a_n & = \sum_{n = 0}^\infty b_n - c_n                                                                                 \\
                                & = \sum_{n = 0}^\infty b_n - \sum_{n = 0}^\infty c_n                   & \text{(by Proposition \ref{7.2.14}(a))} \\
                                & = \sum_{n = 0}^\infty \max(a_n, 0) + \sum_{n = 0}^\infty \min(a_n, 0)                                           \\
                                & = \sum_{n \in A} \max(a_n, 0) + \sum_{n \in A} \min(a_n, 0)           & \text{(by Definition \ref{8.2.1})}      \\
                                & = \sum_{n \in A_+} a_n + \sum_{n \in A_-} a_n.                        & \text{(by Lemma \ref{8.2.5})}
    \end{align*}
    We now split into two cases:
    \begin{enumerate}
        \item If \(\sum_{n \in A_+} a_n\) is absolutely convergent, then we have
              \[
                  \sum_{n = 0}^\infty a_n - \sum_{n \in A_+} a_n = \sum_{n \in A_-} a_n
              \]
              and
              \begin{align*}
                  \sum_{n \in A_-} \abs*{a_n} & = \sum_{n \in A_-} -a_n                                           \\
                                              & = -\sum_{n \in A_-} a_n. & \text{(by Proposition \ref{8.2.6}(b))}
              \end{align*}
              Thus \(\sum_{n \in A_-} a_n\) is also absolutely convergent.
        \item If \(\sum_{n \in A_-} a_n\) is absolutely convergent, then we have
              \[
                  \sum_{n = 0}^\infty a_n - \sum_{n \in A_-} a_n = \sum_{n \in A_+} a_n
              \]
              and
              \[
                  \sum_{n \in A_+} \abs*{a_n} = \sum_{n \in A_+} a_n.
              \]
              Thus \(\sum_{n \in A_+} a_n\) is also absolutely convergent.
    \end{enumerate}
    From all cases above we have both \(\sum_{n \in A_+} a_n\) and \(\sum_{n \in A_-} a_n\) are absolutely convergent.
    But by Proposition \ref{8.2.6}(c) we have
    \[
        \sum_{n \in A_+} a_n + \sum_{n \in A_-} a_n = \sum_{n \in A} a_n
    \]
    and \(\sum_{n \in A} a_n\) is absolutely convergent, a contradiction.
    Thus both \(\sum_{n \in A_+} a_n\) and \(\sum_{n \in A_-} a_n\) are not absolutely convergent.
\end{proof}

\begin{note}
    Theorem \ref{8.2.8} is done by Georg Riemann (1826 -- 1866), which asserts that a series which converges conditionally but not absolutely can be rearranged to converge to any value one pleases!
\end{note}

\begin{theorem}\label{8.2.8}
    Let \(\sum_{n = 0}^\infty a_n\) be a series which is conditionally convergent, but not absolutely convergent, and let \(L\) be any real number.
    Then there exists a bijection \(f : \mathbf{N} \to \mathbf{N}\) such that \(\sum_{m = 0}^\infty a_{f(m)}\) converges conditionally to \(L\).
\end{theorem}

\begin{proof}
    Let \(A_+\) and \(A_-\) be the sets in Lemma \ref{8.2.7};
    from Lemma \ref{8.2.7} we know that \(\sum_{n \in A_+} a_n\) and \(\sum_{n \in A_-} a_n\) both fail to be absolutely convergent.
    In particular \(A_+\) and \(A_-\) are infinite.
    (Since \(A_+ \cup A_- = \mathbf{N}\), we know that at least one of \(A_+\) and \(A_-\) is countable.
    If \(A_+\) is finite, then \(\sum_{n = 0}^\infty a_n - \sum_{n \in A_+} a_n = \sum_{n \in A_-} a_n\) is conditionally convergent.
    But this means \(\sum_{n \in A_-} \abs*{a_n} = \sum_{n \in A_-} -a_n = -\sum_{n \in A_-} a_n\) converges, which means \(\sum_{n \in A_-} a_n\) is absolutely convergent, contradict to Lemma \ref{8.2.7}.
    Similarly if \(A_-\) is finite, then \(\sum_{n \in A_+} a_n\) is absolutely convergent, again contradict to Lemma \ref{8.2.7}.
    Thus both \(A_+\) and \(A_-\) must be countable.)
    By Proposition \ref{8.1.5} we can then find increasing bijections \(f_+ : \mathbf{N} \to A_+\) and \(f_- : \mathbf{N} \to A_-\).
    Thus the sums \(\sum_{m = 0}^\infty a_{f_+(m)}\) and \(\sum_{m = 0}^\infty a_{f_-(m)}\) both fail to be absolutely convergent (first by Definition \ref{8.2.1} then by Lemma \ref{8.2.7}).
    The plan shall be to select terms from the divergent series \(\sum_{m = 0}^\infty a_{f_+(m)}\) and \(\sum_{m = 0}^\infty a_{f_-(m)}\) in a well-chosen order in order to keep their difference converging towards \(L\).

    We define the sequence \(n_0, n_1, n_2, \dots\) of natural numbers recursively as follows.
    Suppose that \(j\) is a natural number, and that \(n_i\) has already been defined for all \(i < j\) (this is vacuously true if \(j = 0\)).
    We then define \(n_j\) by the following rule:
    \begin{enumerate}[label=(\Roman*)]
        \item If \(\sum_{0 \leq i < j} a_{n_i} < L\), then we set
              \[
                  n_j \coloneqq \min\{n \in A_+ : n \neq n_i \ \forall\ i < j\}.
              \]
        \item If instead \(\sum_{0 \leq i < j} a_{n_i} \geq L\), then we set
              \[
                  n_j \coloneqq \min\{n \in A_- : n \neq n_i \ \forall\ i < j\}.
              \]
    \end{enumerate}
    Note that this recursive definition is well-defined because \(A_+\) and \(A_-\) are infinite, and so the sets \(\{n \in A_+ : n \neq n_i \ \forall\ i < j\}\) and \(\{n \in A_- : n \neq n_i \ \forall\ i < j\}\) are never empty.
    (Intuitively, we add a non-negative number to the series whenever the partial sum is too low, and add a negative number when the sum is too high.)
    One can then verify the following claims:
    \begin{enumerate}
        \item The map \(j \mapsto n_j\) is injective.
              This is true since
              \begin{align*}
                           & \forall\ i, j \in \mathbf{N} : i \neq j \\
                  \implies & i < j \lor i > j                        \\
                  \implies & n_i \neq n_j.
              \end{align*}
        \item Case I occurs an infinite number of times, and Case II also occurs an infinite number of times.
              We prove this by contradiction.
              Suppose that case I occurs only finite number of times.
              Then we have
              \[
                  \sum_{0 \leq i < j} a_{n_i} < L \land \sum_{0 \leq i < j} a_{n_i} + a_{n_j} + \sum_{i > j} a_{n_i} \geq L
              \]
              where \(j\) is the last time case I occurs.
              Since \(\sum_{0 \leq i < j} a_{n_i} + a_{n_j}\) is finite, \(\sum_{i > j} a_{n_i}\) have a lower bound.
              Since all \(i > j\) are cases II, \(\sum_{i > j} a_{n_i}\) is decreasing.
              Since \(\sum_{i > j} a_{n_i}\) is decreasing and has lower bound, by Additional Corollary \ref{ac 6.3.1} \(\sum_{i > j} a_{n_i}\) is convergent.
              But this means \(\sum_{n \in A_-} a_n\) is absolutely convergent (which proof can be found above), a contradiction.
              Thus case I occurs infinite number of times.
              Similar proof show that case II also occurs infinite number of times.
        \item The map \(j \mapsto n_j\) is surjective.
              \(\forall\ n \in \mathbf{N}\), either \(n \in A_+\) or \(n \in A_-\).
              If \(n \in A_+\) and there is no \(j \mapsto n\), then \(\forall\ n' > n\) there must also have no \(j \mapsto n'\), otherwise by definition we must have \(n = \min\{n \in A_+ : n \neq n_i \ \forall\ i < j\}\).
              But if \(\forall\ n' > n\) there is no \(j \to n'\), then case I only occur finite number of times, a contradiction.
              Thus \(\exists\ j \mapsto n\).
              Similar argument show that if \(n \in A_-\) then \(\exists\ j \mapsto n\).
              Thus \(j \mapsto n_j\) is surjective.
        \item We have \(\lim_{j \to \infty} a_{n_j} = 0\).
              By Corollary \ref{7.2.6} we have \(\lim_{j \to \infty} a_j = 0\).
              Since \(j \to n_j\) is bijective, we have \(\lim_{j \to \infty} a_{n_j} = 0\).
        \item We have \(\lim_{j \to \infty} \sum_{0 \leq i \leq j} a_{n_i} = L\).
              Since \(\lim_{j \to \infty} a_{n_j} = 0\), \(\forall\ \varepsilon \in \mathbf{R} \land \varepsilon > 0\), \(\exists\ j \geq 0\) such that
              \[
                  \abs*{a_{n_{j'}} - 0} \leq \varepsilon
              \]
              for all \(j' \geq j\).
              Now we split into two cases:
              \begin{enumerate}[label=(\Roman*)]
                  \item If \(\sum_{0 \leq i \leq j'} a_{n_i} < L\), then \(a_{n_{j' + 1}} \geq 0\) and \(\sum_{0 \leq i \leq j' + 1} a_{n_i} \geq L\).
                        This can be done from the claim (b) above.
                        Thus
                        \begin{align*}
                                     & \sum_{0 \leq i \leq j' + 1} a_{n_i} \geq L                             \\
                            \implies & \sum_{0 \leq i \leq j'} a_{n_i} + a_{n_{j' + 1}} \geq L                \\
                            \implies & \sum_{0 \leq i \leq j'} a_{n_i} \geq L - a_{n_{j' + 1}}                \\
                            \implies & \sum_{0 \leq i \leq j'} a_{n_i} \geq L - \varepsilon                   \\
                            \implies & L > \sum_{0 \leq i \leq j'} a_{n_i} \geq L - \varepsilon               \\
                            \implies & L + \varepsilon > \sum_{0 \leq i \leq j'} a_{n_i} \geq L - \varepsilon \\
                            \implies & \abs*{\sum_{0 \leq i \leq j'} a_{n_i} - L} < \varepsilon.
                        \end{align*}
                  \item If \(\sum_{0 \leq i \leq j'} a_{n_i} \geq L\), then \(a_{n_{j' + 1}} < 0\) and \(\sum_{0 \leq i \leq j' + 1} a_{n_i} < L\).
                        This can be done from the claim (b) above.
                        Thus
                        \begin{align*}
                                     & \sum_{0 \leq i \leq j' + 1} a_{n_i} < L                                \\
                            \implies & \sum_{0 \leq i \leq j'} a_{n_i} + a_{n_{j' + 1}} < L                   \\
                            \implies & \sum_{0 \leq i \leq j'} a_{n_i} < L - a_{n_{j' + 1}}                   \\
                            \implies & \sum_{0 \leq i \leq j'} a_{n_i} < L + \varepsilon                      \\
                            \implies & L \leq \sum_{0 \leq i \leq j'} a_{n_i} < L + \varepsilon               \\
                            \implies & L - \varepsilon \leq \sum_{0 \leq i \leq j'} a_{n_i} < L + \varepsilon \\
                            \implies & \abs*{\sum_{0 \leq i \leq j'} a_{n_i} - L} < \varepsilon.
                        \end{align*}
              \end{enumerate}
              From all cases above we have show that \(\forall\ \varepsilon > 0\), \(\exists\ j \geq 0\) such that
              \[
                  \abs*{\sum_{0 \leq i \leq j'} a_{n_i} - L} < \varepsilon.
              \]
              for all \(j' \geq j\).
              Thus \(\lim_{j \to \infty} \sum_{0 \leq i \leq j} a_{n_i} = L\).
    \end{enumerate}
    The claim then follows by setting \(f(i) \coloneqq n_i\) for all \(i\).
\end{proof}

\exercisesection

\begin{exercise}\label{ex 8.2.1}
    Prove Lemma \ref{8.2.3}.
\end{exercise}

\begin{proof}
    See Lemma \ref{8.2.3}.
\end{proof}

\begin{exercise}\label{ex 8.2.2}
    Prove Lemma \ref{8.2.5}.
\end{exercise}

\begin{proof}
    See Lemma \ref{8.2.5}.
\end{proof}

\begin{exercise}\label{ex 8.2.3}
    Prove Proposition \ref{8.2.6}.
\end{exercise}

\begin{proof}
    See Proposition \ref{8.2.6}.
\end{proof}

\begin{exercise}\label{ex 8.2.4}
    Prove Lemma \ref{8.2.7}.
\end{exercise}

\begin{proof}
    See Lemma \ref{8.2.7}.
\end{proof}

\begin{exercise}\label{ex 8.2.5}
    Explain the gaps marked (why?) in the proof of Theorem \ref{8.2.8}.
\end{exercise}

\begin{proof}
    See Theorem \ref{8.2.8}.
\end{proof}

\begin{exercise}\label{ex 8.2.6}
    Let \(\sum_{n = 0}^\infty a_n\) be a series which is conditionally convergent, but not absolutely convergent.
    Show that there exists a bijection \(f : \mathbf{N} \to \mathbf{N}\) such that \(\sum_{m = 0}^\infty a_{f(m)}\) diverges to \(+\infty\), or more precisely that
    \[
        \lim\inf_{N \to \infty} \sum_{m = N}^\infty a_{f(m)} = \lim\sup_{N \to \infty} \sum_{m = N}^\infty a_{f(m)} = +\infty.
    \]
    (Of course, a similar statement holds with \(+\infty\) replaced by \(-\infty\).)
\end{exercise}

\begin{proof}
    This shall be done once I learn Axiom of choice.
\end{proof}