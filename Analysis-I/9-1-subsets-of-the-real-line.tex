\section{Subsets of the real line}\label{sec 9.1}

\begin{definition}[Intervals]\label{9.1.1}
    Let \(a, b \in \mathbf{R}^*\) be extended real numbers.
    We define the \emph{closed interval} \([a, b]\) by
    \[
        [a, b] \coloneqq \{x \in \mathbf{R}^* : a \leq x \leq b\},
    \]
    the \emph{half-open intervals} \([a, b)\) and \((a, b]\) by
    \[
        [a, b) \coloneqq \{x \in \mathbf{R}^* : a \leq x < b\}; (a, b] \coloneqq \{x \in \mathbf{R}^* : a < x \leq b\},
    \]
    and the \emph{open interval} \((a, b)\) by
    \[
        (a, b) \coloneqq \{x \in \mathbf{R}^* : a < x < b\}.
    \]
    We call \(a\) the \emph{left endpoint} of these intervals, and \(b\) the \emph{right endpoint}.
\end{definition}

\begin{remark}\label{9.1.2}
    Once again, we are overloading the parenthesis notation;
    for instance, we are now using \((2, 3)\) to denote both an open interval from \(2\) to \(3\), as well as an ordered pair in the Cartesian plane \(\mathbf{R}^2 \coloneqq \mathbf{R} \times \mathbf{R}\).
    This can cause some genuine ambiguity, but the reader should still be able to resolve which meaning of the parentheses is intended from context.
    In some texts, this issue is resolved by using reversed brackets instead of parenthesis, thus for instance \([a, b)\) would now be \([a, b[\), \((a, b]\) would be \(]a, b]\), and \((a, b)\) would be \(]a, b[\).
\end{remark}

\begin{note}
    We sometimes refer to an interval in which one endpoint is infinite (either \(+\infty\) or \(-\infty\)) as \emph{half-infinite} intervals, and intervals in which both endpoints are infinite as \emph{doubly-infinite} intervals;
    all other intervals are \emph{bounded intervals}.
    Thus the positive and negative real axes are half-infinite intervals, and \(\mathbf{R}\) and \(\mathbf{R}^*\) are infinite intervals.
\end{note}

\setcounter{theorem}{3}
\begin{example}\label{9.1.4}
    If \(a > b\) then all four of the intervals \([a, b], [a, b), (a, b]\), and \((a, b)\) are the empty set (by trichotomy, see Proposition \ref{5.4.7}(a)).
    If \(a = b\), then the three intervals \([a, b), (a, b]\), and \((a, b)\) are the empty set, while \([a, b]\) is just the singleton set \(\{a\}\).
    Because of this, we call these intervals \emph{degenerate};
    most (but not all) of our analysis will be restricted to non-degenerate intervals.
\end{example}

\begin{definition}[\(\varepsilon\)-adherent points]\label{9.1.5}
    Let \(X\) be a subset of \(\mathbf{R}\), let \(\varepsilon > 0\), and let \(x \in \mathbf{R}\).
    We say that \(x\) is \emph{\(\varepsilon\)-adherent to \(X\)} iff there exists a \(y \in X\) which is \(\varepsilon\)-close to \(x\)
    (i.e., \(\abs*{x - y} \leq \varepsilon\)).
\end{definition}

\begin{remark}\label{9.1.6}
    The terminology ``\(\varepsilon\)-adherent'' is not standard in the literature.
    However, we shall shortly use it to define the notion of an adherent point, which is standard.
\end{remark}

\setcounter{theorem}{7}
\begin{definition}[Adherent points]\label{9.1.8}
    Let \(X\) be a subset of \(\mathbf{R}\), and let \(x \in \mathbf{R}\).
    We say that \(x\) is an \emph{adherent point} of \(X\) iff it is \(\varepsilon\)-adherent to \(X\) for every \(\varepsilon > 0\).
\end{definition}

\setcounter{theorem}{9}
\begin{definition}[Closure]\label{9.1.10}
    Let \(X\) be a subset of \(\mathbf{R}\).
    The \emph{closure} of \(X\), sometimes denoted \(\overline{X}\) is defined to be the set of all the adherent points of \(X\).
\end{definition}

\begin{lemma}[Elementary properties of closures]\label{9.1.11}
    Let \(X\) and \(Y\) be arbitrary subsets of \(\mathbf{R}\).
    Then \(X \subseteq \overline{X}\), \(\overline{X \cup Y} = \overline{X} \cup \overline{Y}\), and \(\overline{X \cap Y} \subseteq \overline{X} \cap \overline{Y}\).
    If \(X \subseteq Y\), then \(\overline{X} \subseteq \overline{Y}\).
\end{lemma}

\begin{proof}
    Let \(\varepsilon \in \mathbf{R}^+\).
    Since
    \begin{align*}
                 & \forall\ x \in X                                                        \\
        \implies & \abs*{x - x} = 0 \leq \varepsilon                                       \\
        \implies & x \in \overline{X},               & \text{(by Definition \ref{9.1.10})}
    \end{align*}
    by Definition \ref{3.1.15} we have \(X \subseteq \overline{X}\).
    Since
    \begin{align*}
                 & \forall\ x \in \overline{X \cup Y}                                                            \\
        \implies & \exists\ y \in X \cup Y : \abs*{x - y} \leq \varepsilon & \text{(by Definition \ref{9.1.10})} \\
        \implies & y \in X \lor y \in Y                                    & \text{(by Axiom \ref{3.4})}         \\
        \implies & x \in \overline{X} \lor x \in \overline{Y}              & \text{(by Definition \ref{9.1.10})} \\
        \implies & x \in \overline{X} \cup \overline{Y}                    & \text{(by Axiom \ref{3.4})}
    \end{align*}
    and
    \begin{align*}
                 & \forall\ x \in \overline{X} \cup \overline{Y}                                                 \\
        \implies & x \in \overline{X} \lor x \in \overline{Y}              & \text{(by Axiom \ref{3.4})}         \\
        \implies & (\exists\ y \in X : \abs*{x - y} \leq \varepsilon)                                            \\
                 & \lor (\exists\ y \in Y : \abs*{x - y} \leq \varepsilon) & \text{(by Definition \ref{9.1.10})} \\
        \implies & \exists\ y \in X \cup Y : \abs*{x - y} \leq \varepsilon & \text{(by Axiom \ref{3.4})}         \\
        \implies & x \in \overline{X \cup Y},                              & \text{(by Definition \ref{9.1.10})}
    \end{align*}
    by Proposition \ref{3.1.18} we have \(\overline{X \cup Y} = \overline{X} \cup \overline{Y}\).
    Since
    \begin{align*}
                 & \forall\ x \in \overline{X \cap Y}                                                            \\
        \implies & \exists\ y \in X \cap Y : \abs*{x - y} \leq \varepsilon & \text{(by Definition \ref{9.1.10})} \\
        \implies & y \in X \land y \in Y                                   & \text{(by Definition \ref{3.1.23})} \\
        \implies & x \in \overline{X} \land x \in \overline{Y}             & \text{(by Definition \ref{9.1.10})} \\
        \implies & x \in \overline{X} \cap \overline{Y},                   & \text{(by Definition \ref{3.1.23})}
    \end{align*}
    by Definition \ref{3.1.15} we have \(\overline{X \cap Y} \subseteq \overline{X} \cap \overline{Y}\).
    Now suppose that \(X \subseteq Y\).
    Then we have
    \begin{align*}
                 & \forall\ x \in \overline{X}                                                            \\
        \implies & \exists\ y \in X : \abs*{x - y} \leq \varepsilon & \text{(by Definition \ref{9.1.10})} \\
        \implies & y \in Y                                          & (X \subseteq X)                     \\
        \implies & x \in \overline{Y}.                              & \text{(by Definition \ref{9.1.10})}
    \end{align*}
    Thus by Definition \ref{3.1.15} we have \(\overline{X} \subseteq \overline{Y}\).
    And we conclude that \(X \subseteq Y \implies \overline{X} \subseteq \overline{Y}\).
\end{proof}

\begin{lemma}[Closures of intervals]\label{9.1.12}
    Let \(a < b\) be real numbers, and let \(I\) be any one of the four intervals \((a, b)\), \((a, b]\), \([a, b)\), or \([a, b]\).
    Then the closure of \(I\) is \([a, b]\).
    Similarly, the closure of \((a, \infty)\) or \([a, \infty)\) is \([a, \infty)\), while the closure of \((-\infty, a)\) or \((-\infty, a]\) is \((-\infty, a]\).
    Finally, the closure of \((-\infty, \infty)\) is \((-\infty, \infty)\).
\end{lemma}

\begin{proof}
    First let us show that every element of \([a, b]\) is adherent to \((a, b)\).
    Let \(x \in [a, b]\).
    If \(x \in (a, b)\) then it is definitely adherent to \((a, b)\).
    This is true since \(\forall\ \varepsilon \in \mathbf{R}^+\) we have \(\abs*{x - x} \leq \varepsilon\).
    If \(x = b\) then \(x\) is also adherent to \((a, b)\).
    Otherwise \(\exists\ \varepsilon \in \mathbf{R}^+\) such that
    \[
        \forall\ y \in (a, b), \abs*{x - y} > \varepsilon.
    \]
    But this means
    \begin{align*}
                 & \abs*{x - y} > \varepsilon                                                               \\
        \implies & \abs*{b - y} > \varepsilon                        & (x = b)                              \\
        \implies & b - y > \varepsilon                               & (y < b)                              \\
        \implies & b - \varepsilon > y                                                                      \\
        \implies & b > b - \varepsilon > y > a                       & (\varepsilon > 0 \land y \in (a, b)) \\
        \implies & b - \varepsilon \in (a, b)                        & \text{(by Definition \ref{9.1.1})}   \\
        \implies & 0 = \abs*{b - (b - \varepsilon)} \leq \varepsilon                                        \\
        \implies & \abs*{x - (b - \varepsilon)} \leq \varepsilon,
    \end{align*}
    a contradiction.
    Thus \(x = b\) implies \(x\) is also adherent to \((a, b)\).
    Similarly when \(x = a\).
    Thus every point in \([a, b]\) is adherent to \((a, b)\).

    Now we show that every point \(x\) that is adherent to \((a, b)\) lies in \([a, b]\).
    Suppose for sake of contradiction that \(x\) does not lie in \([a, b]\), then either \(x > b\) or \(x < a\).
    If \(x > b\) then \(x\) is not \((x - b)\)-adherent to \((a, b)\), and is hence not an adherent point to \((a, b)\)
    (by setting \(\varepsilon = x - b\) we have \(\forall\ y \in (a, b)\), \(\abs*{x - y} = x - y > x - b = \varepsilon\)).
    Similarly, if \(x < a\), then \(x\) is not \((a - x)\)-adherent to \((a, b)\), and is hence not an adherent point to \((a, b)\).
    This contradiction shows that \(x\) is in fact in \([a, b]\) as claimed.

    Using similar arguments we can show that every point in \([a, b]\) is also adherent to \((a, b]\) and \([a, b)\), and every point \(x\) that is adherent to \((a, b]\) and \([a, b)\) lies in \([a, b]\).

    Now we show that the closure of \((a, \infty)\) or \([a, \infty)\) is \([a, \infty)\).
    From the proof above we know that the closure of \((a, \infty)\) and \([a, \infty)\) is \([a, \infty]\).
    But since \(\forall\ x \in (a, \infty)\) the statement \(\abs*{x - \infty} \leq \varepsilon\) is undefined, thus we can only have \([a, \infty)\) as the closure of \((a, \infty)\) and \([a, \infty)\).
                    Similar arguments show that the closure of \((-\infty, a)\) or \((-\infty, a]\) is \((-\infty, a]\), and the closure of \((-\infty, \infty)\) is \((-\infty, \infty)\).
\end{proof}

\begin{lemma}\label{9.1.13}
    The closure of \(\mathbf{N}\) is \(\mathbf{N}\).
    The closure of \(\mathbf{Z}\) is \(\mathbf{Z}\).
    The closure of \(\mathbf{Q}\) is \(\mathbf{R}\), and the closure of \(\mathbf{R}\) is \(\mathbf{R}\).
    The closure of the empty set \(\emptyset\) is \(\emptyset\).
\end{lemma}

\begin{proof}
    We first show that \(\overline{\mathbf{N}} = \mathbf{N}\).
    Let \(\overline{\mathbf{N}}\) be the closure of \(\mathbf{N}\).
    By Lemma \ref{9.1.11} we have \(\mathbf{N} \subseteq \overline{\mathbf{N}}\).
    Since
    \begin{align*}
                 & \forall\ n \in \mathbf{N}                                      \\
        \implies & 0 \leq n < \infty                                              \\
        \implies & n \in [0, \infty),        & \text{(by Definition \ref{9.1.1})}
    \end{align*}
    by Definition \ref{3.1.15} we have \(\mathbf{N} \subseteq [0, \infty)\), thus
    \begin{align*}
                 & \mathbf{N} \subseteq [0, \infty)                                                        \\
        \implies & \overline{\mathbf{N}} \subseteq \overline{[0, \infty)} & \text{(by Lemma \ref{9.1.11})} \\
        \implies & \overline{\mathbf{N}} \subseteq [0, \infty)            & \text{(by Lemma \ref{9.1.12})} \\
        \implies & \overline{\mathbf{N}} \subseteq \mathbf{R}.
    \end{align*}
    Now we show that \(\overline{\mathbf{N}} \subseteq \mathbf{N}\).
    Suppose for sake of contradiction that \(\overline{\mathbf{N}} \not\subseteq \mathbf{N}\), i.e., \(\exists\ x \in \overline{\mathbf{N}}\) such that \(x \notin \mathbf{N}\).
    Then we have \(x > 0\) and by Proposition \ref{5.4.12} \(\exists\ n \in \mathbf{N} : n < x < n + 1\).
    Let \(\varepsilon = \min(x - n, n + 1 - x) / 2\).
    By Definition \ref{9.1.10}, \(\exists\ m \in \mathbf{N}\) such that \(\abs*{x - m} \leq \varepsilon\).
    We now split into three cases:
    \begin{enumerate}
        \item If \(m = n\), then we have \(x - n \geq \min(x - n, n + 1 - x) > \varepsilon\), a contradiction.
        \item If \(m < n\), then we have \(x - m > x - n \geq \min(x - n, n + 1 - x) > \varepsilon\), a contradiction.
        \item If \(m > n\), then we have \(m \geq n + 1\) and \(m - x \geq n + 1 - x \geq \min(x - n, n + 1 - x) > \varepsilon\), a contradiction.
    \end{enumerate}
    From all cases above we derived contradictions.
    Thus such \(m\) does not exists and by Definition \ref{9.1.10} \(x \notin \overline{\mathbf{N}}\).
    So we have \(\overline{\mathbf{N}} \subseteq \mathbf{N}\).
    Since \(\mathbf{N} \subseteq \overline{\mathbf{N}} \land \overline{\mathbf{N}} \subseteq \mathbf{N}\), by Proposition \ref{3.1.18} we have \(\mathbf{N} = \overline{\mathbf{N}}\).

    Next we show that \(\overline{\mathbf{Z}} = \mathbf{Z}\).
    Let \(\overline{\mathbf{Z}}\) be the closure of \(\mathbf{Z}\).
    Let \(\mathbf{Z}^- = \{z \in \mathbf{Z} : z < 0\}\).
    Then we have
    \begin{align*}
        \overline{\mathbf{Z}} & = \overline{\mathbf{N} \cup \mathbf{Z}^-}                                             \\
                              & = \overline{\mathbf{N}} \cup \overline{\mathbf{Z}^-} & \text{(by Lemma \ref{9.1.11})} \\
                              & = \mathbf{N} \cup \overline{\mathbf{Z}^-}            & \text{(from proof above)}
    \end{align*}
    Thus to show that \(\mathbf{Z} = \overline{\mathbf{Z}}\) it is suffice to show that \(\mathbf{Z}^- = \overline{\mathbf{Z}^-}\).
    By Lemma \ref{9.1.11} we have \(\mathbf{Z}^- \subseteq \overline{\mathbf{Z}^-}\).
    We now to show that \(\overline{\mathbf{Z}^-} \subseteq \mathbf{Z}^-\).
    Suppose for sake of contradiction that \(\overline{\mathbf{Z}^-} \not\subseteq \mathbf{Z}^-\), i.e., \(\exists\ x \in \overline{\mathbf{Z}^-}\) such that \(x \notin \mathbf{Z}^-\).
    Then we have \(x < 0\) and by Proposition \ref{5.4.12} \(\exists\ n \in \mathbf{Z}^- : n < x < n + 1\).
    Let \(\varepsilon = \min(x - n, n + 1 - x) / 2\).
    By Definition \ref{9.1.10}, \(\exists\ m \in \mathbf{Z}^-\) such that \(\abs*{x - m} \leq \varepsilon\).
    We now split into three cases:
    \begin{enumerate}
        \item If \(m = n\), then we have \(x - n \geq \min(x - n, n + 1 - x) > \varepsilon\), a contradiction.
        \item If \(m < n\), then we have \(x - m > x - n \geq \min(x - n, n + 1 - x) > \varepsilon\), a contradiction.
        \item If \(m > n\), then we have \(m \geq n + 1\) and \(m - x \geq n + 1 - x \geq \min(x - n, n + 1 - x) > \varepsilon\), a contradiction.
    \end{enumerate}
    From all cases above we derived contradictions.
    Thus such \(m\) does not exists and by Definition \ref{9.1.10} \(x \notin \overline{\mathbf{Z}^-}\).
    So we have \(\overline{\mathbf{Z}^-} \subseteq \mathbf{Z}^-\).
    Since \(\mathbf{Z}^- \subseteq \overline{\mathbf{Z}^-} \land \overline{\mathbf{Z}^-} \subseteq \mathbf{Z}^-\), by Proposition \ref{3.1.18} we have \(\mathbf{Z}^- = \overline{\mathbf{Z}^-}\), and thus \(\mathbf{Z} = \overline{\mathbf{Z}}\).

    Next we show that \(\overline{\mathbf{Q}} = \mathbf{R}\).
    Let \(\overline{\mathbf{Q}}\) be the closure of \(\mathbf{Q}\).
    We have
    \begin{align*}
                 & \mathbf{Q} \subseteq \mathbf{R}                                                                   \\
        \implies & \mathbf{Q} \subseteq (-\infty, \infty)                       & \text{(by Definition \ref{9.1.1})} \\
        \implies & \overline{\mathbf{Q}} \subseteq \overline{(-\infty, \infty)} & \text{(by Lemma \ref{9.1.11})}     \\
        \implies & \overline{\mathbf{Q}} \subseteq (-\infty, \infty)            & \text{(by Lemma \ref{9.1.12})}     \\
        \implies & \overline{\mathbf{Q}} \subseteq \mathbf{R}.
    \end{align*}
    Since
    \begin{align*}
                 & \forall\ x \in \mathbf{R}                                                                                            \\
        \implies & \forall\ \varepsilon \in \mathbf{R}^+ : x - \varepsilon < x < x + \varepsilon                                        \\
        \implies & \exists\ q \in \mathbf{Q} : x - \varepsilon < q < x + \varepsilon             & \text{(by Proposition \ref{5.4.14})} \\
        \implies & \abs*{x - q} < \varepsilon                                                                                           \\
        \implies & x \in \overline{\mathbf{Q}},                                                  & \text{(by Definition \ref{9.1.10})}
    \end{align*}
    by Definition \ref{3.1.15} we have \(\mathbf{R} \subseteq \overline{\mathbf{Q}}\).
    Since \(\mathbf{R} \subseteq \overline{\mathbf{Q}} \land \overline{\mathbf{Q}} \subseteq \mathbf{R}\), by Proposition \ref{3.1.18} we have \(\mathbf{R} = \overline{\mathbf{Q}}\).

    Next we show that \(\overline{\mathbf{R}} = \mathbf{R}\).
    Since
    \begin{align*}
             & \forall\ x \in \mathbf{R}                                              \\
        \iff & -\infty < x < \infty                                                   \\
        \iff & x \in (\infty, \infty)            & \text{(by Definition \ref{9.1.1})} \\
        \iff & x \in \overline{(\infty, \infty)} & \text{(by Lemma \ref{9.1.12})}     \\
        \iff & x \in \overline{\mathbf{R}},
    \end{align*}
    we know that \(\overline{\mathbf{R}} = \mathbf{R}\).

    Finally we show that \(\overline{\emptyset} = \emptyset\).
    Suppose for sake of contradiction that \(\overline{\emptyset} \neq \emptyset\).
    Let \(x \in \overline{\emptyset}\)
    Then by Definition \ref{9.1.10} \(\forall\ \varepsilon \in \mathbf{R}^+\), \(\exists\ y \in \emptyset\) such that \(\abs*{x - y} \leq \varepsilon\), a contradiction.
    Thus \(\overline{\emptyset} = \emptyset\).
\end{proof}

\begin{lemma}\label{9.1.14}
    Let \(X\) be a subset of \(\mathbf{R}\), and let \(x \in \mathbf{R}\).
    Then \(x\) is an adherent point of \(X\) if and only if there exists a sequence \((a_n)_{n = 0}^\infty\), consisting entirely of elements in \(X\), which converges to \(x\).
\end{lemma}

\begin{proof}
    We first show that if \(x\) is an adherent point of \(X\), then there exists a sequence \((a_n)_{n = 0}^\infty\) such that \(\forall\ n \in \mathbf{N}\), \(a_n \in X\) and \(\lim_{n \to \infty} a_n = x\).
    For each \(n \in \mathbf{N}\) let \(A_n\) be a set where
    \[
        A_n = \{y \in X : \abs*{x - y} \leq \frac{1}{n}\}.
    \]
    We know by Definition \ref{9.1.10} that \(A_n \neq \emptyset\).
    By axiom of choice (Axiom \ref{8.1}) we know \(\prod_{n \in \mathbf{N}} A_n \neq \emptyset\).
    Let \(f \in \prod_{n \in \mathbf{N}} A_n\).
    We can define a sequence \((a_n)_{n = 0}^\infty\) by setting \(a_n = f(n)\).
    Then we have
    \begin{align*}
                 & \forall\ n \in \mathbf{N}                                                                                           \\
        \implies & 0 \leq \abs*{x - a_n} \leq \frac{1}{n}                                                                              \\
        \implies & \lim_{n \to \infty} \abs*{x - a_n} = 0                                         & \text{(by Corollary \ref{6.4.14})} \\
        \implies & \lim_{n \to \infty} \max(x - a_n, a_n - x) = 0                                                                      \\
        \implies & \max(\lim_{n \to \infty} x - a_n, \lim_{n \to \infty} a_n - x) = 0             & \text{(by Theorem \ref{6.1.19})}   \\
        \implies & \max\big(x - (\lim_{n \to \infty} a_n), (\lim_{n \to \infty} a_n) - x\big) = 0 & \text{(by Theorem \ref{6.1.19})}   \\
        \implies & x = \lim_{n \to \infty} a_n.
    \end{align*}

    Now we show that if there exists a sequence \((a_n)_{n = 0}^\infty\) such that \(\forall\ n \in \mathbf{N}\), \(a_n \in X\) and \(\lim_{n \to \infty} a_n = x\), then \(x\) is an adherent point of \(X\).
    Since \(\lim_{n \to \infty} a_n = x\), by Proposition \ref{6.4.5} \(x\) is the only limit point of \((a_n)_{n = m}^\infty\).
    So we have
    \begin{align*}
                 & \forall\ \varepsilon \in \mathbf{R}^+, \exists\ n \in \mathbf{N} : \abs*{x - a_n} \leq \varepsilon & \text{(by Definition \ref{6.4.1})}  \\
        \implies & \forall\ \varepsilon \in \mathbf{R}^+, \exists\ a_n \in X : \abs*{x - a_n} \leq \varepsilon                                              \\
        \implies & x \in \overline{X}.                                                                                & \text{(by Definition \ref{9.1.10})}
    \end{align*}
    And we conclude that \(x\) is an adherent point of \(X\) if and only if there exists a sequence \((a_n)_{n = 0}^\infty\) such that \(\forall\ n \in \mathbf{N}\), \(a_n \in X\) and \(\lim_{n \to \infty} a_n = x\).
\end{proof}