\section{Continuous functions}\label{sec 9.4}

\begin{definition}[Continuity]\label{9.4.1}
    Let \(X\) be a subset of \(\mathbf{R}\), and let \(f : X \to \mathbf{R}\) be a function.
    Let \(x_0\) be an element of \(X\).
    We say that \(f\) is \emph{continuous at \(x_0\)} iff we have
    \[
        \lim_{x \to x_0 ; x \in X} f(x) = f(x_0);
    \]
    in other words, the limit of \(f(x)\) as \(x\) converges to \(x_0\) in \(X\) exists and is equal to \(f(x_0)\).
    We say that \(f\) is \emph{continuous on \(X\)} (or simply \emph{continuous}) iff \(f\) is continuous at \(x_0\) for every \(x_0 \in X\).
    We say that \(f\) is \emph{discontinuous at \(x_0\)} iff it is not continuous at \(x_0\).
\end{definition}

\begin{note}
    Restricting the domain of a function can make a discontinuous function continuous again.
\end{note}

\setcounter{theorem}{6}
\begin{proposition}[Equivalent formulations of continuity]\label{9.4.7}
    Let \(X\) be a subset of \(\mathbf{R}\), let \(f : X \to \mathbf{R}\) be a function, and let \(x_0\) be an element of \(X\).
    Then the following four statements are logically equivalent:
    \begin{enumerate}
        \item \(f\) is continuous at \(x_0\).
        \item For every sequence \((a_n)_{n = 0}^\infty\) consisting of elements of \(X\) with \(\lim_{n \to \infty} a_n = x_0\), we have \(\lim_{n \to \infty} f(a_n) = f(x_0)\).
        \item For every \(\varepsilon > 0\), there exists a \(\delta > 0\) such that \(\abs*{f(x) - f(x_0)} < \varepsilon\) for all \(x \in X\) with \(\abs*{x - x_0} < \delta\).
        \item For every \(\varepsilon > 0\), there exists a \(\delta > 0\) such that \(\abs*{f(x) - f(x_0)} \leq \varepsilon\) for all \(x \in X\) with \(\abs*{x - x_0} \leq \delta\).
    \end{enumerate}
\end{proposition}

\begin{proof}
    We first show that the statement (a) and the statement (b) are equivalent.
    By Definition \ref{9.4.1}, \(f\) is continuous at \(x_0\) iff \(f\) converges to \(f(x_0)\) at \(x_0\) in \(X\).
    Thus by Proposition \ref{9.3.9} we know that the statement (a) and the statement (b) are equivalent.

    Next we show that the statement (a) and the statement (c) are equivalent.
    By Definition \ref{9.4.1}, \(f\) is continuous at \(x_0\) iff \(f\) converges to \(f(x_0)\) at \(x_0\) in \(X\).
    By Definition \ref{9.3.6} this is equivalent to the statement
    \[
        \forall\ \varepsilon' \in \mathbf{R}^+, \exists\ \delta \in \mathbf{R}^+ : \bigg(\forall\ x \in X, \abs*{x - x_0} < \delta \implies \abs*{f(x) - f(x_0)} \leq \varepsilon'\bigg).
    \]
    Let \(\varepsilon \in \mathbf{R}^+ \land \varepsilon > \varepsilon'\).
    Then we have
    \[
        \forall\ \varepsilon \in \mathbf{R}^+, \exists\ \delta \in \mathbf{R}^+ : \bigg(\forall\ x \in X, \abs*{x - x_0} < \delta \implies \abs*{f(x) - f(x_0)} \leq \varepsilon' < \varepsilon\bigg).
    \]
    Thus the statement (a) and the statement (c) are equivalent.

    Finally we show that the statement (a) and the statement (d) are equivalent.
    By Definition \ref{9.4.1}, \(f\) is continuous at \(x_0\) iff \(f\) converges to \(f(x_0)\) at \(x_0\) in \(X\).
    By Definition \ref{9.3.6} this is equivalent to the statement
    \[
        \forall\ \varepsilon \in \mathbf{R}^+, \exists\ \delta' \in \mathbf{R}^+ : \bigg(\forall\ x \in X, \abs*{x - x_0} < \delta' \implies \abs*{f(x) - f(x_0)} \leq \varepsilon\bigg).
    \]
    Let \(\delta \in \mathbf{R}^+ \land \abs*{x - x_0} \leq \delta < \delta'\).
    By Proposition \ref{5.4.14} we know such \(\delta\) exists.
    Then we have
    \[
        \forall\ \varepsilon \in \mathbf{R}^+, \exists\ \delta \in \mathbf{R}^+ : \bigg(\forall\ x \in X, \abs*{x - x_0} \leq \delta \implies \abs*{f(x) - f(x_0)} \leq \varepsilon\bigg).
    \]
    Thus the statement (a) and the statement (d) are equivalent.
\end{proof}

\begin{remark}\label{9.4.8}
    A particularly useful consequence of Proposition \ref{9.4.7} is the following:
    if \(f\) is continuous at \(x_0\), and \(a_n \to x_0\) as \(n \to \infty\), then \(f(a_n) \to f(x_0)\) as \(n \to \infty\)
    (provided that all the elements of the sequence \((a_n)_{n = 0}^\infty\) lie in the domain of \(f\), of course).
    Thus continuous functions are very useful in computing limits.
\end{remark}

\begin{proposition}[Arithmetic preserves continuity]\label{9.4.9}
    Let \(X\) be a subset of \(\mathbf{R}\), and let \(f : X \to \mathbf{R}\) and \(g : X \to \mathbf{R}\) be functions.
    Let \(x_0 \in X\).
    Then if \(f\) and \(g\) are both continuous at \(x_0\), then the functions \(f + g\), \(f - g\), \(\max(f, g)\), \(\min(f, g)\) and \(fg\) are also continuous at \(x_0\).
    If \(g\) is non-zero on \(X\), then \(f / g\) is also continuous at \(x_0\).
\end{proposition}

\begin{proof}
    By Proposition \ref{9.3.14}, we have
    \begin{align*}
        \lim_{x \to x_0 ; x \in X} f(x) + g(x)      & = \lim_{x \to x_0 ; x \in X} f(x) + \lim_{x \to x_0 ; x \in X} g(x)                                                            \\
                                                    & = f(x_0) + g(x_0);                                                                       & \text{(by Definition \ref{9.4.1})}  \\
        \lim_{x \to x_0 ; x \in X} f(x) - g(x)      & = \lim_{x \to x_0 ; x \in X} f(x) - \lim_{x \to x_0 ; x \in X} g(x)                                                            \\
                                                    & = f(x_0) - g(x_0);                                                                       & \text{(by Definition \ref{9.4.1})}  \\
        \lim_{x \to x_0 ; x \in X} \max(f(x), g(x)) & = \max(\lim_{x \to x_0 ; x \in X} f(x), \lim_{x \to x_0 ; x \in X} g(x))                                                       \\
                                                    & = \max(f(x_0), g(x_0));                                                                  & \text{(by Definition \ref{9.4.1})}  \\
        \lim_{x \to x_0 ; x \in X} \min(f(x), g(x)) & = \min(\lim_{x \to x_0 ; x \in X} f(x), \lim_{x \to x_0 ; x \in X} g(x))                                                       \\
                                                    & = \min(f(x_0), g(x_0));                                                                  & \text{(by Definition \ref{9.4.1})}  \\
        \lim_{x \to x_0 ; x \in X} f(x) g(x)        & = \bigg(\lim_{x \to x_0 ; x \in X} f(x)\bigg)\bigg(\lim_{x \to x_0 ; x \in X} g(x)\bigg)                                       \\
                                                    & = f(x_0) g(x_0);                                                                         & \text{(by Definition \ref{9.4.1})}  \\
        \lim_{x \to x_0 ; x \in X} f(x) / g(x)      & = \lim_{x \to x_0 ; x \in X} f(x) / \lim_{x \to x_0 ; x \in X} g(x)                      & \text{(\(g\) is non-zero on \(X\))} \\
                                                    & = f(x_0) / g(x_0).                                                                       & \text{(by Definition \ref{9.4.1})}  \\
    \end{align*}
\end{proof}

\begin{proposition}[Exponentiation is continuous, I]\label{9.4.10}
    Let \(a > 0\) be a positive real number.
    Then the function \(f : \mathbf{R} \to \mathbf{R}\) defined by \(f(x) \coloneqq a^x\) is continuous.
\end{proposition}

\begin{proof}
    If \(a = 1\), then by Exercise \ref{ex 9.4.2} we know that
    \[
        \forall\ x_0 \in X, \lim_{x \to x_0 ; x \in \mathbf{R}} 1^x = \lim_{x \to x_0 ; x \in \mathbf{R}} 1 = 1.
    \]
    So suppose that \(a \neq 1\).
    Let \(x_0 \in \mathbf{R}\).
    By Lemma \ref{9.1.13}, \(x_0\) is an adherent point.
    By Proposition \ref{6.7.3} we know that \(a^{x_0} > 0\).
    By Lemma \ref{6.5.3}, we know that \(\lim_{n \to \infty} a^{1 / n} = 1\).
    This means
    \[
        \forall\ \varepsilon \in \mathbf{R}^+, \exists\ n \geq 0 : \abs*{a^{1 / N} - 1} \leq \varepsilon \ \forall\ N \geq n.
    \]
    In particular, we have
    \[
        \forall\ \varepsilon \in \mathbf{R}^+, \exists\ n \geq 0 : \abs*{a^{1 / N} - 1} \leq \varepsilon / a^{x_0} \ \forall\ N \geq n.
    \]
    Now we fix \(\varepsilon\) and \(n\).
    Let \(x \in \mathbf{R} \land x - x_0 \in [0, 1 / n)\).
    By Exercise \ref{ex 5.4.3} \(\exists\ k \geq n\) such that \(1 / (k + 1) < x - x_0 < 1 / k\).
    Now we split into two cases:
    \begin{enumerate}
        \item If \(a > 1\), then by Proposition \ref{6.7.3} we have
              \begin{align*}
                           & 1 / (k + 1) < x - x_0 < 1 / k                                                                \\
                  \implies & a^{1 / (k + 1)} < a^{x - x_0} < a^{1 / k}                                                    \\
                  \implies & a^{1 / (k + 1)} - 1 < a^{x - x_0} - 1 < a^{1 / k} - 1                                        \\
                  \implies & \bigg(\abs*{a^{x - x_0} - 1} < \abs*{a^{1 / k} - 1} < \varepsilon / a^{x_0}\bigg)            \\
                           & \lor \bigg(\abs*{a^{x - x_0} - 1} < \abs*{a^{1 / (k + 1)} - 1} < \varepsilon / a^{x_0}\bigg) \\
                  \implies & \abs*{a^{x - x_0} - 1} \leq \varepsilon / a^{x_0}                                            \\
                  \implies & \abs*{a^x - a^{x_0}} = a^{x_0} \abs*{a^{x - x_0} - 1} \leq \varepsilon                       \\
              \end{align*}
        \item if \(a < 1\), then by Proposition \ref{6.7.3} we have
              \begin{align*}
                           & 1 / (k + 1) < x - x_0 < 1 / k                                                                \\
                  \implies & a^{1 / k} < a^{x - x_0} < a^{1 / (k + 1)}                                                    \\
                  \implies & a^{1 / k} - 1 < a^{x - x_0} - 1 < a^{1 / (k + 1)} - 1                                        \\
                  \implies & \bigg(\abs*{a^{x - x_0} - 1} < \abs*{a^{1 / k} - 1} < \varepsilon / a^{x_0}\bigg)            \\
                           & \lor \bigg(\abs*{a^{x - x_0} - 1} < \abs*{a^{1 / (k + 1)} - 1} < \varepsilon / a^{x_0}\bigg) \\
                  \implies & \abs*{a^{x - x_0} - 1} \leq \varepsilon / a^{x_0}                                            \\
                  \implies & \abs*{a^x - a^{x_0}} = a^{x_0} \abs*{a^{x - x_0} - 1} \leq \varepsilon                       \\
              \end{align*}
    \end{enumerate}
    From all cases above we have \(\abs*{a^x - a^{x_0}} \leq \varepsilon\).
    Now let \(\delta = 1 / n\).
    Then we have
    \[
        \forall\ \varepsilon \in \mathbf{R}^+, \exists\ \delta \in \mathbf{R}^+ : \bigg(\forall\ x \in \mathbf{R} \land \abs*{x - x_0} < \delta \implies \abs*{a^x - a^{x_0}} \leq \varepsilon\bigg).
    \]
    Thus by Definition \ref{9.3.6} we have \(\lim_{x \to x_0 ; x \in \mathbf{R}} a^x = a^{x_0}\).
    Since \(x_0\) is arbitrary, by Definition \ref{9.4.1} \(a^x\) is continuous on \(\mathbf{R}\).
\end{proof}

\begin{exercise}\label{ex 9.4.2}

\end{exercise}