\section{Monotonic functions}\label{sec 9.8}

\begin{definition}[Monotonic functions]\label{9.8.1}
    Let \(X\) be a subset of \(\mathbf{R}\), and let \(f : X \to \mathbf{R}\) be a function.
    We say that \(f\) is \emph{monotone increasing} iff \(f(y) \geq f(x)\) whenever \(x, y \in X\) and \(y > x\).
    We say that \(f\) is \emph{strictly monotone increasing} iff \(f(y) > f(x)\) whenever \(x, y \in X\) and \(y > x\).
    Similarly, we say \(f\) is \emph{monotone decreasing} iff \(f(y) \leq f(x)\) whenever \(x, y \in X\) and \(y > x\), and \emph{strictly monotone decreasing} iff \(f(y) < f(x)\) whenever \(x, y \in X\) and \(y > x\).
    We say that \(f\) is \emph{monotone} if it is monotone increasing or monotone decreasing, and \emph{strictly monotone} if it is strictly monotone increasing or strictly monotone decreasing.
\end{definition}

\begin{note}
    If a function is strictly monotone on a domain \(X\), it is automatically monotone as well on the same domain \(X\).
    Constant functions, when restricted to an arbitrary domain \(X \subseteq \mathbf{R}\), are both monotone increasing and monotone decreasing, but is not strictly monotone
    (unless \(X\) consists of at most one point).
\end{note}

\begin{note}
    Continuous functions are not necessarily monotone, and monotone functions are not necessarily continuous.
\end{note}

\setcounter{theorem}{2}
\begin{proposition}\label{9.8.3}
    Let \(a < b\) be real numbers, and let \(f : [a, b] \to \mathbf{R}\) be a function which is both continuous and strictly monotone increasing.
    Then \(f\) is a bijection from \([a, b]\) to \([f(a), f(b)]\), and the inverse \(f^{-1} : [f(a), f(b)] \to [a, b]\) is also continuous and strictly monotone increasing.
\end{proposition}

\begin{proof}
    We first show that \(f\) is bijective from \([a, b]\) to \([f(a), f(b)]\).
    Since \(a < b\) and \(f\) is strictly monotone increasing, by Definition \ref{9.8.1} we know that \(f(a) < f(b)\).
    In particular, \(\forall\ c \in (a, b)\), we have \(a < c < b\), and thus \(f(a) < f(c) < f(b)\).
    By Definition \ref{9.6.5}, this means \(f\) attains its minimum at \(a\) and attains its maximum at \(b\).
    By Corollary \ref{9.7.4}, we know that \(f([a, b]) = [f(a), f(b)]\), thus \(f\) is surjective from \([a, b]\) to \([f(a), f(b)]\).
    Since \(f\) is strictly monotone increasing, by Definition \ref{9.8.1} \(x \neq y \implies f(x) \neq f(y)\), thus \(f\) is injective from \([a, b]\) to \([f(a), f(b)]\).
    Since \(f\) is both injective and surjective from \([a, b]\) to \([f(a), f(b)]\), we know that \(f\) is bijective from \([a, b]\) to \([f(a), f(b)]\).

    Next we show that \(f^{-1}\) is continuous.
    Let \(y_0 \in [f(a), f(b)]\).
    By Lemma \ref{9.1.12} we know that \([f(a), f(b)]\) is closed, so \(y_0\) is an adherent point of \([f(a), f(b)]\).
    Since \(f\) is bijective from \([a, b]\) to \([f(a), f(b)]\), we know that \(\exists!\ x_0 \in [a, b]\) such that \(f(x_0) = y_0\) and thus \(f^{-1}(y_0) = x_0\).
    Again by Lemma \ref{9.1.12} we know that \([a, b]\) is closed, so \(x_0\) is an adherent point of \([a, b]\).
    To show that \(f^{-1}\) is continuous at \(y_0\), by Definition \ref{9.4.1} we need to show that
    \[
        \lim_{y \to y_0 ; y \in [f(a), f(b)]} f^{-1}(y) = f^{-1}(y_0) = x_0.
    \]
    By Definition \ref{9.3.6}, it suffice to show that
    \[
        \forall\ \varepsilon \in \mathbf{R}^+, \exists\ \delta \in \mathbf{R}^+ : \bigg(\forall\ y \in [f(a), f(b)], \abs*{y - y_0} < \delta \implies \abs*{f^{-1}(y) - x_0} < \varepsilon\bigg).
    \]
    Now fix \(\varepsilon\).
    Let \(x_L = \max(x_0 - \varepsilon, a)\) and \(x_H = \min(x_0 + \varepsilon, b)\).
    Then \(x_L, x_H \in [a, b]\) and \(f(x_L), f(x_H)\) are well-defined.
    Since \(x_L \leq x_0 \leq x_H\) and \(f\) is strictly monotone increasing, we have \(f(x_L) < y_0 < f(x_H)\) and thus \(f(x_L) - y_0 < 0 < f(x_H) - y_0\).
    Let \(\delta = \min(-(f(x_L) - y_0), f(x_H) - y_0)\).
    Then we have
    \begin{align*}
                 & \forall\ y \in [f(a), f(b)] \land \abs*{y - y_0} < \delta                                           \\
        \implies & -\delta < y - y_0 < \delta                                                                          \\
        \implies & f(x_L) - y_0 \leq -\delta < y - y_0 < \delta \leq f(x_H) - y_0                                      \\
        \implies & f(x_L) \leq y \leq f(x_H)                                                                           \\
        \implies & \exists\ x \in [x_L, x_H] : f(x) = y \land x_L \leq x \leq x_H    & \text{(by Theorem \ref{9.7.1})} \\
        \implies & x_0 - \varepsilon \leq x_L \leq x \leq x_H \leq x_0 + \varepsilon                                   \\
        \implies & -\varepsilon \leq x - x_0 \leq \varepsilon                                                          \\
        \implies & \abs*{x - x_0} \leq \varepsilon                                                                     \\
        \implies & \abs*{f^{-1}(y) - x_0} \leq \varepsilon.
    \end{align*}
    Since \(\varepsilon\) is arbitrary, \(f^{-1}\) is continuous at \(y_0\).
    Since \(y_0\) is arbitrary, \(f^{-1}\) is continuous on \([f(a), f(b)]\).

    Next we show that \(f^{-1}\) is strictly monotone increasing.
    Let \(y_1, y_2 \in [f(a), f(b)]\) and \(y_1 < y_2\).
    We want to show that \(f^{-1}(y_1) < f^{-1}(y_2)\).
    Suppose for sake of contradiction that \(f^{-1}(y_1) \geq f^{-1}(y_2)\).
    Since \(f\) is strictly monotone increasing, we know that
    \begin{align*}
                 & f^{-1}(y_1) \geq f^{-1}(y_2)                                            \\
        \implies & f(f^{-1}(y_1)) \geq f(f^{-1}(y_2)) & \text{(by Definition \ref{9.8.1})} \\
        \implies & y_1 \geq y_2.
    \end{align*}
    But this contradict to \(y_1 < y_2\), thus \(f^{-1}(y_1) < f^{-1}(y_2)\).

    Next we show that if the continuity assumption is dropped, then the proposition is false.
    Let \(f : [0, 1] \to \mathbf{R}\) be a function
    \[
        f(x) = \begin{cases}
            x     & \text{if } x \in [0, 0.5)  \\
            x + 1 & \text{if } x \in [0.5, 1].
        \end{cases}
    \]
    Then \(f\) is not continuous and \(f([0, 1]) = [0, 0.5) \cup [1.5, 2] \neq [0, 2]\).

    Next we show that if strict monotonicity is replaced just by monotonicity, then the proposition is false.
    Let \(f : [0, 1] \to \mathbf{R}\) be a function where \(f(x) = 1\).
    Then \(f\) is not bijective.

    Next we deal with strictly monotone decreasing functions.
    Let \(a < b\) be real numbers, and let \(g : [a, b] \to \mathbf{R}\) be a function which is both continuous and strictly monotone decreasing.
    Then we claim that \(g\) is a bijection from \([a, b]\) to \([g(b), g(a)]\), and the inverse \(g^{-1} : [g(b), g(a)] \to [a, b]\) is also continuous and strictly monotone decreasing.
    To proof the claim, We first show that \(g\) is bijective from \([a, b]\) to \([g(b), g(a)]\).
    Since \(a < b\) and \(g\) is strictly monotone decreasing, by Definition \ref{9.8.1} we know that \(g(a) > g(b)\).
    In particular, \(\forall\ c \in (a, b)\), we have \(a < c < b\), and thus \(g(a) > g(c) > g(b)\).
    By Definition \ref{9.6.5}, this means \(g\) attains its minimum at \(b\) and attains its maximum at \(a\).
    By Corollary \ref{9.7.4}, we know that \(g([a, b]) = [g(b), g(a)]\), thus \(g\) is surjective from \([a, b]\) to \([g(b), g(a)]\).
    Since \(g\) is strictly monotone decreasing, by Definition \ref{9.8.1} \(x \neq y \implies g(x) \neq g(y)\), thus \(g\) is injective from \([a, b]\) to \([g(b), g(a)]\).
    Since \(g\) is both injective and surjective from \([a, b]\) to \([g(b), g(a)]\), we know that \(g\) is bijective from \([a, b]\) to \([g(b), g(a)]\).

    Next we show that \(g^{-1}\) is continuous.
    Let \(y_0 \in [g(b), g(a)]\).
    By Lemma \ref{9.1.12} we know that \([g(b), g(a)]\) is closed, so \(y_0\) is an adherent point of \([g(b), g(a)]\).
    Since \(g\) is bijective from \([a, b]\) to \([g(b), g(a)]\), we know that \(\exists!\ x_0 \in [a, b]\) such that \(g(x_0) = y_0\) and thus \(g^{-1}(y_0) = x_0\).
    Again by Lemma \ref{9.1.12} we know that \([a, b]\) is closed, so \(x_0\) is an adherent point of \([a, b]\).
    To show that \(g^{-1}\) is continuous at \(y_0\), by Definition \ref{9.4.1} we need to show that
    \[
        \lim_{y \to y_0 ; y \in [g(b), g(a)]} g^{-1}(y) = g^{-1}(y_0) = x_0.
    \]
    By Definition \ref{9.3.6}, it suffice to show that
    \[
        \forall\ \varepsilon \in \mathbf{R}^+, \exists\ \delta \in \mathbf{R}^+ : \bigg(\forall\ y \in [g(b), g(a)], \abs*{y - y_0} < \delta \implies \abs*{g^{-1}(y) - x_0} < \varepsilon\bigg).
    \]
    Now fix \(\varepsilon\).
    Let \(x_L = \max(x_0 - \varepsilon, a)\) and \(x_H = \min(x_0 + \varepsilon, b)\).
    Then \(x_L, x_H \in [a, b]\) and \(f(x_L), f(x_H)\) are well-defined.
    Since \(x_L \leq x_0 \leq x_H\) and \(g\) is strictly monotone decreasing, we have \(g(x_L) > y_0 > g(x_H)\) and thus \(g(x_L) - y_0 > 0 > g(x_H) - y_0\).
    Let \(\delta = \min(-(g(x_H) - y_0), g(x_L) - y_0)\).
    Then we have
    \begin{align*}
                 & \forall\ y \in [g(b), g(a)] \land \abs*{y - y_0} < \delta                                           \\
        \implies & -\delta < y - y_0 < \delta                                                                          \\
        \implies & g(x_H) - y_0 \leq -\delta < y - y_0 < \delta \leq g(x_L) - y_0                                      \\
        \implies & g(x_H) \leq y \leq g(x_L)                                                                           \\
        \implies & \exists\ x \in [x_L, x_H] : g(x) = y \land x_L \leq x \leq x_H    & \text{(by Theorem \ref{9.7.1})} \\
        \implies & x_0 - \varepsilon \leq x_L \leq x \leq x_H \leq x_0 + \varepsilon                                   \\
        \implies & -\varepsilon \leq x - x_0 \leq \varepsilon                                                          \\
        \implies & \abs*{x - x_0} \leq \varepsilon                                                                     \\
        \implies & \abs*{g^{-1}(y) - x_0} \leq \varepsilon.
    \end{align*}
    Since \(\varepsilon\) is arbitrary, \(g^{-1}\) is continuous at \(y_0\).
    Since \(y_0\) is arbitrary, \(g^{-1}\) is continuous on \([g(b), g(a)]\).

    Finally we show that \(g^{-1}\) is strictly monotone decreasing.
    Let \(y_1, y_2 \in [g(b), g(a)]\) and \(y_1 < y_2\).
    We want to show that \(g^{-1}(y_1) > g^{-1}(y_2)\).
    Suppose for sake of contradiction that \(g^{-1}(y_1) \leq g^{-1}(y_2)\).
    Since \(g\) is strictly monotone decreasing, we know that
    \begin{align*}
                 & g^{-1}(y_1) \leq g^{-1}(y_2)                                            \\
        \implies & g(g^{-1}(y_1)) \geq g(g^{-1}(y_2)) & \text{(by Definition \ref{9.8.1})} \\
        \implies & y_1 \geq y_2.
    \end{align*}
    But this contradict to \(y_1 < y_2\), thus \(g^{-1}(y_1) > g^{-1}(y_2)\).
\end{proof}

\begin{example}\label{9.8.4}
    Let \(n\) be a positive integer and \(R > 0\).
    Since the function \(f(x) \coloneqq x^n\) is strictly increasing on the interval \([0, R]\), we see from Proposition \ref{9.8.3} that this function is a bijection from \([0, R]\) to \([0, R^n]\), and hence there is an inverse from \([0, R^n]\) to \([0, R]\).
    This can be used to give an alternate means to construct the \(n^\text{th}\) root \(x^{1 / n}\) of a number \(x \in [0, R]\) than what was done in Lemma \ref{5.6.5}.
\end{example}

\exercisesection

\begin{exercise}\label{ex 9.8.1}
    Explain why the maximum principle remains true if the hypothesis that \(f\) is continuous is replaced with \(f\) being monotone, or with \(f\) being strictly monotone.
\end{exercise}

\begin{proof}
    Let \(a < b\) be real numbers, and let \(f : [a, b] \to \mathbf{R}\) be a function.
    Suppose that \(f\) is monotone.
    Then we have
    \begin{align*}
                 & \forall\ c \in [a, b]                                                                                           \\
        \implies & a \leq c \leq b                                                            & \text{(by Definition \ref{9.1.1})} \\
        \implies & \big(f(a) \leq f(c) \leq f(b)\big) \lor \big(f(a) \geq f(c) \geq f(b)\big) & \text{(by Definition \ref{9.8.1})} \\
    \end{align*}
    Thus \(f\) attains its maximum at \(f(b)\) and attains its minimum at \(f(a)\) when \(f\) is monotone increasing;
    \(f\) attains its maximum at \(f(a)\) and attains its minimum at \(f(b)\) when \(f\) is monotone decreasing.
    The same argument holds when \(f\) is strictly monotone.
\end{proof}

\begin{exercise}\label{ex 9.8.2}
    Give an example to show that the intermediate value theorem becomes false if the hypothesis that \(f\) is continuous is replaced with \(f\) being monotone, or with \(f\) being strictly monotone.
\end{exercise}

\begin{proof}
    Let \(f : [0, 1] \to \mathbf{R}\) be a function where
    \[
        f(x) = \begin{cases}
            x     & \text{if } x \in [0, 0.5); \\
            x + 1 & \text{if } x \in [0.5, 1].
        \end{cases}
    \]
    Then \(f\) is strictly monotone and thus monotone.
    Since \(\forall\ y \in [0.5, 1.5)\), \(\nexists\ x \in \mathbf{N}\) such that \(f(x) = y\), the intermediate value theorem (Theorem \ref{9.7.1}) does not hold.
\end{proof}

\begin{exercise}\label{ex 9.8.3}
    Let \(a < b\) be real numbers, and let \(f : [a, b] \to \mathbf{R}\) be a function which is both continuous and one-to-one.
    Show that \(f\) is strictly monotone.
\end{exercise}

\begin{proof}
    Since \(a < b\) and \(f\) is injective, we cannot have \(f(a) = f(b)\).
    So we have two cases:
    \begin{enumerate}
        \item \(f(a) < f(b)\).
              Suppose for sake of contradiction that \(f\) is not strictly monotone.
              Then \(\exists\ c \in [a, b]\) such that
              \[
                  \bigg(f(c) \geq f(a) \land f(c) \geq f(b)\bigg) \lor \bigg(f(c) \leq f(a) \land f(c) \leq f(b)\bigg).
              \]
              Since \(f\) is injective, we cannot have \(c = a \land c = b\), thus \(f(c) \neq f(a) \lor f(c) \neq f(b)\).
              Since \(f(a) < f(b)\), we have \(f(c) \neq f(a) \land f(c) \neq f(b)\).
              Then we have
              \begin{align*}
                           & f(c) > f(a) \land f(c) > f(b)                                                                   \\
                  \implies & \exists\ d \in (f(a), f(c)) \cap (f(b), f(c)) :                                                 \\
                           & \bigg(f(c) > d > f(a)\bigg) \land \bigg(f(c) > d > f(b)\bigg)                                   \\
                  \implies & \big(\exists\ c_1 \in (a, c) : f(c_1) = d\big)                & \text{(by Theorem \ref{9.7.1})} \\
                           & \land \big(\exists\ c_2 \in (c, b) : f(c_2) = d\big)          & \text{(by Theorem \ref{9.7.1})} \\
              \end{align*}
              and
              \begin{align*}
                           & f(c) < f(a) \land f(c) < f(b)                                                                   \\
                  \implies & \exists\ d \in (f(c), f(a)) \cap (f(c), f(b)) :                                                 \\
                           & \bigg(f(c) < d < f(a)\bigg) \land \bigg(f(c) < d < f(b)\bigg)                                   \\
                  \implies & \big(\exists\ c_1 \in (a, c) : f(c_1) = d\big)                & \text{(by Theorem \ref{9.7.1})} \\
                           & \land \big(\exists\ c_2 \in (c, b) : f(c_2) = d\big).         & \text{(by Theorem \ref{9.7.1})} \\
              \end{align*}
              But \(f\) is injective, in both case we have \(c_1 \neq c_2\) and \(f(c_1) = f(c_2)\), a contradiction.
              Thus \(f\) is strictly monotone.
              Since \(f(a) < f(b)\), by Definition \ref{9.8.1} \(f\) is strictly monotone increasing.
        \item \(f(a) > f(b)\).
              Suppose for sake of contradiction that \(f\) is not strictly monotone.
              Then \(\exists\ c \in [a, b]\) such that
              \[
                  \bigg(f(c) \geq f(a) \land f(c) \geq f(b)\bigg) \lor \bigg(f(c) \leq f(a) \land f(c) \leq f(b)\bigg).
              \]
              Since \(f\) is injective, we cannot have \(c = a \land c = b\), thus \(f(c) \neq f(a) \lor f(c) \neq f(b)\).
              Since \(f(a) > f(b)\), we have \(f(c) \neq f(a) \land f(c) \neq f(b)\).
              Then we have
              \begin{align*}
                           & f(c) > f(a) \land f(c) > f(b)                                                                   \\
                  \implies & \exists\ d \in (f(a), f(c)) \cap (f(b), f(c)) :                                                 \\
                           & \bigg(f(c) > d > f(a)\bigg) \land \bigg(f(c) > d > f(b)\bigg)                                   \\
                  \implies & \big(\exists\ c_1 \in (a, c) : f(c_1) = d\big)                & \text{(by Theorem \ref{9.7.1})} \\
                           & \land \big(\exists\ c_2 \in (c, b) : f(c_2) = d\big)          & \text{(by Theorem \ref{9.7.1})} \\
              \end{align*}
              and
              \begin{align*}
                           & f(c) < f(a) \land f(c) < f(b)                                                                   \\
                  \implies & \exists\ d \in (f(c), f(a)) \cap (f(c), f(b)) :                                                 \\
                           & \bigg(f(c) < d < f(a)\bigg) \land \bigg(f(c) < d < f(b)\bigg)                                   \\
                  \implies & \big(\exists\ c_1 \in (a, c) : f(c_1) = d\big)                & \text{(by Theorem \ref{9.7.1})} \\
                           & \land \big(\exists\ c_2 \in (c, b) : f(c_2) = d\big).         & \text{(by Theorem \ref{9.7.1})} \\
              \end{align*}
              But \(f\) is injective, in both case we have \(c_1 \neq c_2\) and \(f(c_1) = f(c_2)\), a contradiction.
              Thus \(f\) is strictly monotone.
              Since \(f(a) > f(b)\), by Definition \ref{9.8.1} \(f\) is strictly monotone decreasing.
    \end{enumerate}
    In all cases above we have \(f\) is either strictly monotone increasing or strictly monotone decreasing.
    Thus by Definition \ref{9.8.1} we know that \(f\) is strictly monotone.
\end{proof}

\begin{exercise}\label{ex 9.8.4}
    Prove Proposition \ref{9.8.3}.
    Is the proposition still true if the continuity assumption is dropped, or if strict monotonicity is replaced just by monotonicity?
    How should one modify the proposition to deal with strictly monotone decreasing functions instead of strictly monotone increasing functions?
\end{exercise}

\begin{proof}
    See Proposition \ref{9.8.3}.
\end{proof}

\begin{exercise}\label{ex 9.8.5}
    In this exercise we give an example of a function which has a discontinuity at every rational point, but is continuous at every irrational.
    Since the rationals are countable, we can write them as \(\mathbf{Q} = \{q(0), q(1), q(2), \dots\}\), where \(q : \mathbf{N} \to \mathbf{Q}\) is a bijection from \(\mathbf{N}\) to \(\mathbf{Q}\).
    Now define a function \(g : \mathbf{Q} \to \mathbf{R}\) by setting \(g(q(n)) \coloneqq 2^{-n}\) for each natural number \(n\);
    thus \(g\) maps \(q(0)\) to \(1\), \(q(1)\) to \(2^{-1}\), etc.
    Since \(\sum_{n = 0}^\infty 2^{-n}\) is absolutely convergent, we see that \(\sum_{r \in \mathbf{Q}} g(r)\) is also absolutely convergent.
    Now define the function \(f : \mathbf{R} \to \mathbf{R}\) by
    \[
        f(x) \coloneqq \sum_{r \in \mathbf{Q} : r < x} g(r).
    \]
    Since \(\sum_{r \in \mathbf{Q}} g(r)\) is absolutely convergent, we know that \(f(x)\) is well-defined for every real number \(x\).
    \begin{enumerate}
        \item Show that \(f\) is strictly monotone increasing.
        \item Show that for every rational number \(r\), \(f\) is discontinuous at \(r\).
        \item Show that for every irrational number \(x\), \(f\) is continuous at \(x\).
    \end{enumerate}
\end{exercise}

\begin{proof}{(a)}
    Let \(a, b \in \mathbf{R}\) and \(a < b\).
    By Proposition \ref{5.4.14}, \(\exists\ c \in \mathbf{Q}\) such that \(a < c < b\).
    Then we have
    \begin{align*}
        f(b) & = \sum_{r \in \mathbf{Q} : r < b} g(r)                                                                                                                                      \\
             & = \sum_{r \in \mathbf{Q} : r < a} g(r) + \sum_{r \in \mathbf{Q} : a \leq r < c} g(r) + \sum_{r \in \mathbf{Q} : c \leq r < b} g(r) & \text{(by Proposition \ref{8.2.6}(c))} \\
             & = f(a) + \sum_{r \in \mathbf{Q} : a \leq r < c} g(r) + g(c) + \sum_{r \in \mathbf{Q} : c < r < b} g(r)                             & \text{(by Proposition \ref{8.2.6}(c))} \\
             & > f(a).
    \end{align*}
    and by Definition \ref{9.8.1} \(f\) is strictly monotone increasing.
\end{proof}

\begin{proof}{(b)}
    Let \(\gamma \in \mathbf{Q}\).
    Since \(q\) is bijective, \(\exists!\ n \in \mathbf{N}\) such that \(q(n) = \gamma\).
    Then \(\forall\ x \in (\gamma, \infty)\), we have
    \begin{align*}
        f(x) & = \sum_{r \in \mathbf{Q} : r < x} g(r)                                                                                                           \\
             & = \sum_{r \in \mathbf{Q} : r < \gamma} g(r) + g(\gamma) + \sum_{r \in \mathbf{Q} : \gamma < r < x} g(r) & \text{(by Proposition \ref{8.2.6}(c))} \\
             & = f(\gamma) + g(\gamma) + \sum_{r \in \mathbf{Q} : \gamma < r < x} g(r)                                                                          \\
             & > f(\gamma) + g(\gamma)                                                                                                                          \\
             & = f(\gamma) + 2^{-n}.
    \end{align*}
    Since \(f\) is strictly monotone increasing, we have
    \begin{align*}
                 & x \in (\gamma, \infty)                                                                            \\
        \implies & x > \gamma                                                  & \text{(by Definition \ref{9.1.1})}  \\
        \implies & f(x) > f(\gamma)                                            & \text{(by Definition \ref{9.8.1})}  \\
        \implies & f(x) - f(\gamma) > 2^{-n}                                                                         \\
        \implies & \abs*{f(x) - f(\gamma)} = f(x) - f(\gamma) > 2^{-n}                                               \\
        \implies & f(\gamma^+) \neq f(\gamma)                                  & \text{(by Definition \ref{9.5.1})}  \\
        \implies & \lim_{r \to \gamma ; r \in \mathbf{R}} f(x) \neq f(\gamma). & \text{(by Proposition \ref{9.5.3})}
    \end{align*}
\end{proof}

\begin{proof}{(c)}
    Let \(n \in \mathbf{N}\), let \(E_n\) be a set where
    \[
        E_n = \{r \in \mathbf{Q} : g(r) \geq 2^{-n}\},
    \]
    and let \(f_n : \mathbf{R} \to \mathbf{R}\) be a function
    \[
        f_n(x) = \sum_{r \in E_n : r < x} g(r) = \sum_{r \in \mathbf{Q} : r < x \land g(r) \geq 2^{-n}} g(r).
    \]
    Since \(q\) is bijective, there are at most \(n + 1\) rationals satisfying \(r \in \mathbf{Q} \land g(r) \geq 2^{-n}\), thus \(E_n\) is finite and non-empty.
    Since \(\mathbf{R} \setminus \mathbf{Q} \subseteq \mathbf{R}\), by Lemma \ref{9.1.11} \(\forall\ x_0 \in \mathbf{R} \setminus \mathbf{Q}\), \(x_0\) is an adherent point of \(\mathbf{R} \setminus \mathbf{Q}\).
    Let \(\varepsilon \in \mathbf{R}^+\) and let \(\delta = \min\{\abs*{r - x_0} : r \in E_n\}\).
    Since \(x_0 \notin \mathbf{Q}\), we have \(\delta > 0\).
    Then we have
    \begin{align*}
                 & \forall\ x \in \mathbf{R} \setminus \mathbf{Q}, \abs*{x - x_0} < \delta   \\
        \implies & \big(\forall\ r \in E_n, \abs*{x - x_0} < \delta \leq \abs*{r - x_0}\big) \\
        \implies & \big(\forall\ r \in E_n, \abs*{x - x_0} < \abs*{r - x_0}\big)             \\
        \implies & \big(\forall\ r \in E_n, -\abs*{r - x_0} < x - x_0 < \abs*{r - x_0}\big)  \\
        \implies & \big(\forall\ r \in E_n \land r < x_0, r - x_0 < x - x_0 < x_0 - r\big)   \\
        \implies & \big(\forall\ r \in E_n, r < x_0 \land r < x\big)                         \\
        \implies & \{r \in E_n : r < x\} = \{r \in E_n : r < x_0\}                           \\
        \implies & f_n(x) = f_n(x_0)                                                         \\
        \implies & 0 = \abs*{f_n(x) - f_n(x_0)} < \varepsilon.
    \end{align*}
    Since \(\varepsilon\) is arbitrary, by Definition \ref{9.3.6} we have \(\lim_{x \to x_0 ; x \in \mathbf{R} \setminus \mathbf{Q}} f_n(x) = f_n(x_0)\), and by Definition \ref{9.4.1} \(f_n\) is continuous at \(x_0\).

    Now we show that \(f\) is continuous at \(x_0\).
    We have
    \begin{align*}
         & \forall\ x \in \mathbf{R} \setminus \mathbf{Q}, \abs*{f(x) - f_n(x)}                                                                                 \\
         & = \abs*{\sum_{r \in \mathbf{Q} : r < x} g(r) - \sum_{r \in E_n : r < x} g(r)}                                                                        \\
         & = \abs*{\sum_{r \in \mathbf{Q} : r < x} g(r) - \sum_{r \in \mathbf{Q} : r < x \land g(r) \geq 2^{-n}} g(r)}                                          \\
         & = \abs*{\sum_{r \in \mathbf{Q} : r < x \land g(r) < 2^{-n}} g(r)}                                           & \text{(by Proposition \ref{8.2.6}(c))} \\
         & = \sum_{r \in \mathbf{Q} : r < x \land g(r) < 2^{-n}} g(r)                                                                                           \\
         & = \sum_{r \in \mathbf{Q} : r < x \land g(r) \leq 2^{-(n + 1)}} g(r)                                                                                  \\
         & \leq \sum_{r \in \mathbf{Q} : g(r) \leq 2^{-(n + 1)}} g(r)                                                                                           \\
         & \leq \sum_{k = n + 1}^\infty 2^{-k}                                                                                                                  \\
         & = 2^{-(n + 1)} \bigg(\sum_{k = 0}^\infty 2^{-k}\bigg)                                                                                                \\
         & = 2^{-n}.                                                                                                   & \text{(by Lemma \ref{7.3.3})}
    \end{align*}
    By Proposition \ref{5.4.14}, \(\forall\ \varepsilon \in \mathbf{R}^+\), \(\exists\ n \in \mathbf{N}\) such that \(2^{-n} < \varepsilon / 2\).
    From the proof above we also have
    \[
        \forall\ x \in \mathbf{R} \setminus \mathbf{Q}, \abs*{x - x_0} < \delta \implies f_n(x) = f_n(x_0) \\
    \]
    Combine the results above we have
    \begin{align*}
         & \abs*{f(x) - f(x_0)}                               \\
         & = \abs*{f(x) - f_n(x) + f_n(x) - f(x_0)}           \\
         & \leq \abs*{f(x) - f_n(x)} + \abs*{f_n(x) - f(x_0)} \\
         & = \abs*{f(x) - f_n(x)} + \abs*{f_n(x_0) - f(x_0)}  \\
         & \leq 2^{-n} + 2^{-n}                               \\
         & < \varepsilon / 2 + \varepsilon / 2                \\
         & = \varepsilon.
    \end{align*}
    Since \(\varepsilon\) is arbitrary, by Definition \ref{9.3.6} we have \(\lim_{x \to x_0 ; x \in \mathbf{R} \setminus \mathbf{Q}} f(x) = f(x_0)\), and by Definition \ref{9.4.1} \(f\) is continuous at \(x_0\).
\end{proof}