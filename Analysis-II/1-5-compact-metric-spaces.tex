\section{Compact metric spaces}\label{sec 1.5}

\begin{definition}[Compactness]\label{1.5.1}
    A metric space \((X, d)\) is said to be \emph{compact} iff every sequence in \((X, d)\) has at least one convergent subsequence.
    A subset \(Y\) of a metric space \(X\) is said to be \emph{compact} if the subspace \((Y, d|_{Y \times Y})\) is compact.
\end{definition}

\begin{remark}\label{1.5.2}
    The notion of a set \(Y\) being compact is \emph{intrinsic}, in the sense that it only depends on the metric function \(d|_{Y \times Y}\) restricted to \(Y\), and not on the choice of the ambient space \(X\).
    The notions of completeness in Definition \ref{1.4.10}, and of boundedness in Definition \ref{1.5.3}, are also intrinsic, but the notions of open and closed are not
    (see the discussion in Section \ref{sec 1.3}).
\end{remark}

\begin{note}
    The notion of a set \(Y\) being compact only depends on the metric function \(d_{Y \times Y}\) but not ambient space \(X\) since the elements of a sequence in \(Y\) stays the same no matter which spaces \(Y\) is subset to.
    But the notion of a set being open or close depends on the definition of a metric ball, which may be different when given different ambient spaces.
\end{note}

\begin{note}
    Heine-Borel theorem shows that in the real line \(\mathbf{R}\) with the usual metric, every closed and bounded set is compact, and conversely every compact set is closed and bounded.
\end{note}

\begin{definition}[Bounded sets]\label{1.5.3}
    Let \((X, d)\) be a metric space, and let \(Y\) be a subset of \(X\).
    We say that \(Y\) is \emph{bounded} iff for every \(x \in X\) there exists a ball \(B(x, r)\) in \(X\) which contains \(Y\).
    We call \((X, d)\) bounded if \(X\) is bounded.
\end{definition}

\begin{remark}\label{1.5.4}
    Definition \ref{1.5.3} is compatible with the definition of a bounded set on \(\mathbf{R}\).
\end{remark}

\begin{proposition}\label{1.5.5}
    Let \((X, d)\) be a compact metric space.
    Then \((X, d)\) is both complete and bounded.
\end{proposition}

\begin{proof}
    We first show that \((X, d)\) is complete.
    Let \((a_n)_{n = 1}^\infty\) be a Cauchy sequence in \((X, d)\).
    Since \((X, d)\) is compact, by Definition \ref{1.5.1} we know that there exists a subsequence of \((a_n)_{n = 1}^\infty\) which converges to some \(x_0 \in X\).
    Since \((a_n)_{n = 1}^\infty\) is a Cauchy sequence, by Lemma \ref{1.4.9} we know that \((a_n)_{n = 1}^\infty\) must converge to \(x_0 \in X\).
    Since \((a_n)_{n = 1}^\infty\) is arbitrary, by Definition \ref{1.4.10} we know that \((X, d)\) is complete.

    Now we show that \((X, d)\) is bounded by contradiction.
    Suppose for sake of contradiction that \((X, d)\) is not bounded.
    Then by Definition \ref{1.5.3} we have
    \begin{align*}
                 & \lnot\big(\forall\ x_0 \in X, \exists\ r \in \mathbf{R}^+ : X \subseteq B_{(X, d)}(x_0, r)\big)            \\
        \implies & \exists\ x_0 \in X : \forall\ r \in \mathbf{R}^+, X \not\subseteq B_{(X, d)}(x_0, r)                       \\
        \implies & \exists\ x_0 \in X : \forall\ r \in \mathbf{R}^+, \big(X \setminus B_{(X, d)}(x_0, r)\big) \neq \emptyset  \\
        \implies & \exists\ x_0 \in X : \forall\ n \in \mathbf{Z}^+, \big(X \setminus B_{(X, d)}(x_0, n)\big) \neq \emptyset.
    \end{align*}
    If \(X = \emptyset\), then we must have \((\emptyset, d)\) is bound (since \(x_0 \notin \emptyset\)).
    So we only considered the cases \(X \neq \emptyset\).
    Let \((a_n)_{n = 1}^\infty\) be the sequence where \(a_n \in X \setminus B_{(X, d)}(x_0, n)\) for all \(n \in \mathbf{Z}^+\).
    Note that such sequence is well-defined by axiom of choice.
    Since \(a_n \in X \setminus B_{(X, d)}(x_0, n)\), by Definition \ref{1.2.1} we know that \(d(a_n, x_0) \geq n\) for all \(n \in \mathbf{Z}^+\).
    Since \((X, d)\) is compact, by Definition \ref{1.5.1} there exists a subsequence \((a_{n_j})_{j = 1}^\infty\) of \((a_n)_{n = 1}^\infty\) such that \((a_{n_j})_{j = 1}^\infty\) converges in \(X\).
    Let \(\lim_{j \to \infty} d(a_{n_j}, L) = 0\) for some \(L \in X\).
    By Definition \ref{1.1.14} we know that
    \[
        \forall\ \varepsilon \in \mathbf{R}^+, \exists\ J \in \mathbf{Z}^+ : \forall\ j \geq J, d(a_{n_j}, L) \leq \varepsilon.
    \]
    In particular,
    \[
        \exists\ J \in \mathbf{Z}^+ : \forall\ j \geq J, d(a_{n_j}, L) \leq 1.
    \]
    Now we fix such \(J\) and let \(i = \max\big(J + 1, \ceil{d(L, x_0)} + 2\big)\).
    Then we have
    \begin{align*}
        d(a_{n_i}, x_0) & \leq d(a_{n_i}, L) + d(L, x_0) & \text{(by Definition \ref{1.1.2}(d))} \\
                        & \leq 1 + d(L, x_0)             & (i > J)
    \end{align*}
    and
    \begin{align*}
        d(a_{n_i}, x_0) & \geq n_i            & \text{(by the definition of \(a_{n_i}\))} \\
                        & \geq i                                                          \\
                        & \geq d(L, x_0) + 2. & \text{(by the definition of \(i\))}
    \end{align*}
    But this means \(d(L, x_0) + 2 \leq d(L, x_0) + 1\), a contradiction.
    Thus \((X, d)\) is bounded.
\end{proof}

\begin{corollary}[Compact sets are closed and bounded]\label{1.5.6}
    Let \((X, d)\) be a metric space, and let \(Y\) be a compact subset of \(X\).
    Then \(Y\) is closed and bounded.
\end{corollary}

\begin{proof}
    Since \((Y, d|_{Y \times Y})\) is compact, by Proposition \ref{1.5.5} we know that \((Y, d)\) is complete and bounded.
    Thus by Proposition \ref{1.4.12}(a) we know that \(Y\) is closed in \(X\).
\end{proof}

\begin{theorem}[Heine-Borel theorem]\label{1.5.7}
    Let \((\mathbf{R}^n, d)\) be a Euclidean space with either the Euclidean metric, the taxicab metric, or the supnorm metric.
    Let \(E\) be a subset of \(\mathbf{R}^n\).
    Then \(E\) is compact if and only if it is closed and bounded.
\end{theorem}

\begin{proof}
    We first show that for any \(E \subseteq \mathbf{R}^n\), \((E, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n})\) is closed and bounded iff \((E, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n})\) is compact.
    By Exercise \ref{ex 1.1.7} we know that \((\mathbf{R}^n, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n})\) is a metric space, and by Corollary \ref{1.5.6} we know that if \((E, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n})\) is compact, then \((E, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n})\) is closed and bounded.
    So we only need to show that if \((E, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n})\) is closed and bounded, then \((E, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n})\) is compact.
    Suppose that \(E \subseteq \mathbf{R}^n\) and \((E, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n})\) is closed and bounded.
    Since \(E \subseteq \mathbf{R}^n\), we know that for every \(x \in E\), \(x\) is in the form \(x = (x_1, \dots, x_n) = (x_i)_{i = 1}^n \in \mathbf{R}^n\).
    Let \(I_n = \{i \in \mathbf{N} : 1 \leq i \leq n\}\).
    For each \(i \in I_n\), let \(E_i\) be the set
    \[
        E_i = \{y \in \mathbf{R} | \exists\ x \in E : x_i = y\},
    \]
    i.e., \(E_i\) is the collection of \(i^{\text{th}}\) coordinate of all element \(x \in E\).
    We claim that for every \(i \in I_n\), \(E_i\) is a subset of some closed interval and thus \((E_i, d_{l^1}|_{\mathbf{R} \times \mathbf{R}})\) is bounded.
    This is true since
    \begin{align*}
                 & (E, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n}) \text{ is bounded}                                                                                                                           \\
        \implies & \forall\ y \in \mathbf{R}^n, \exists\ r \in \mathbf{R}^+ : E \subseteq B_{(\mathbf{R}^n, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n})}(y, r)             & \text{(by Definition \ref{1.5.3})} \\
        \implies & \forall\ y \in \mathbf{R}^n, \exists\ r \in \mathbf{R}^+ : \forall\ x \in E, x \in B_{(\mathbf{R}^n, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n})}(y, r)                                      \\
        \implies & \forall\ y \in \mathbf{R}^n, \exists\ r \in \mathbf{R}^+ : \forall\ x \in E,                                                                                                                  \\
                 & d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n}(x, y) = \sum_{i = 1}^n \abs*{x_i - y_i} < r                                                                  & \text{(by Definition \ref{1.2.1})} \\
        \implies & \forall\ y \in \mathbf{R}^n, \exists\ r \in \mathbf{R}^+ : \forall\ x \in E, \forall\ i \in I_n,                                                                                              \\
                 & d_{l^1}|_{\mathbf{R} \times \mathbf{R}}(x_i, y_i) = \abs*{x_i - y_i} < r                                                                                                                      \\
        \implies & \forall\ y \in \mathbf{R}^n, \exists\ r \in \mathbf{R}^+ : \forall\ x \in E, \forall\ i \in I_n,                                                                                              \\
                 & x_i \in (y_i - r, y_i + r)                                                                                                                                                                    \\
        \implies & \forall\ y \in \mathbf{R}^n, \exists\ r \in \mathbf{R}^+ : \forall\ i \in I_n,                                                                                                                \\
                 & E_i \subseteq (y_i - r, y_i + r) \subseteq [y_i - r, y_i + r]                                                                                                                                 \\
        \implies & \forall\ y \in \mathbf{R}^n, \exists\ r \in \mathbf{R}^+ : \forall\ i \in I_n,                                                                                                                \\
                 & E_i \subseteq B_{(\mathbf{R}, d_{l^1}|_{\mathbf{R} \times \mathbf{R}})}(y_i, r)                                                                          & \text{(by Definition \ref{1.2.1})} \\
        \implies & \forall\ i \in I_n, (E_i, d_{l^1}|_{\mathbf{R} \times \mathbf{R}}) \text{ is bounded}.                                                                   & \text{(by Definition \ref{1.5.3})}
    \end{align*}

    Let \(P(n)\) be the statement ``If \(F \subseteq \mathbf{R}^n\) such that for every \(i \in I_n\), \((F_i, d_{l^1}|_{\mathbf{R} \times \mathbf{R}})\) is bounded and \(F_i \subseteq C_i\) for some closed interval \(C_i \subseteq \mathbf{R}\), then for any sequence in \(F\) there exists a subsequence which converges in \(\mathbf{R}^n\) with respect to \(d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n}\)''.
    We use induction on \(n\) to show that \(P(n)\) is true for all \(n \in \mathbf{Z}^+\).

    For \(n = 1\), by hypothesis we have \((F, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n}) = (F_1, d_{l^1}|_{\mathbf{R} \times \mathbf{R}})\) is bounded and \(F_1 \subseteq C_1\) for some closed interval \(C_1 \subseteq \mathbf{R}\).
    By Heine-Borel theorem on real line (Theorem 9.1.24 in Analysis I) we know that for every sequence \((a^{(k)})_{k = 1}^\infty\) in \(F\), there exists a subsequence \((a^{(k_j)})_{j = 1}^\infty\) which converges in \(C_1 \subseteq \mathbf{R}\) with respect to \(d_{l^1}|_{\mathbf{R} \times \mathbf{R}}\).
    Thus the base case holds.

    Suppose inductively that \(P(n)\) is true for some \(n \geq 1\).
    Then we need to show that \(P(n + 1)\) is true.
    Let \(F \subseteq \mathbf{R}^{n + 1}\) such that for every \(i \in I_{n + 1}\), \((F_i, d_{l^1}|_{\mathbf{R} \times \mathbf{R}})\) is bounded and \(F_i \subseteq C_i\) for some closed interval \(C_i \in \mathbf{R}\).
    Let \((a^{(k)})_{k = 1}^\infty\) be arbitrary sequence in \(F\).
    We define \((b^{(k)})_{k = 1}^\infty\) by setting \(b^{(k)} = (a_1^{(k)}, \dots, a_n^{(k)})\) for each \(k \geq 1\), i.e., \(b^{(k)}\) is the first \(n\) coordinates of \(a^{(k)}\).
    Since for all \(k \geq 1\), \(b^{(k)} \in \mathbf{R}^n\) and \(b_i^{(k)} \in F_i\) for all \(i \in I_n\), by induction hypothesis there exists a subsequence \((b^{(k_j)})_{j = 1}^\infty\) which converges in \(\mathbf{R}^n\) with respect to \(d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n}\).
    Since \((a_{n + 1}^{(k_j)})_{j = 1}^\infty\) is in \(F_{n + 1}\) and \(F_{n + 1} \subseteq C_{n + 1}\) for some close interval \(C_{n + 1} \subseteq \mathbf{R}\), by Heine-Borel theorem on real line (Theorem 9.1.24 in Analysis I) we know that there exists a subsequence \((a^{(k_{j_p})})_{p = 1}^\infty\) which converges in \(C_{n + 1}\) with respect to \(d_{l^1}|_{\mathbf{R} \times \mathbf{R}}\).
    But by Lemma \ref{1.4.3} we know that every subsequence of \((b^{(k_j)})_{j = 1}^\infty\) also converges in \(\mathbf{R}^n\) with respect to \(d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n}\).
    In particular, \((b^{k_{j_p}})_{p = 1}^\infty\) converges in \(\mathbf{R}^n\) with respect to \(d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n}\).
    Thus by Proposition \ref{1.1.18}(b)(d) we know that \((a^{(k_{j_p})})_{p = 1}^\infty\) converges in \(\mathbf{R}^{n + 1}\) with respect to \(d_{l^1}|_{\mathbf{R}^{n + 1} \times \mathbf{R}^{n + 1}}\), and this close the induction.

    From the proof above we know that if \(E \subseteq \mathbf{R}^n\) such that \((E, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n})\) is closed and bounded, then for every \(i \in I_n\), \((E_i, d_{l^1}|_{\mathbf{R} \times \mathbf{R}})\) is bounded and \(E_i \subseteq C_i\) for some closed interval \(C_i \subseteq \mathbf{R}\).
    Thus we know that for every sequence in \(E\) there exists a subsequence which converges in \(\mathbf{R}^n\) with respect to \(d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n}\).
    Since \(E\) is closed, by Proposition \ref{1.2.15}(b) we know that such subsequence must converges in \(E\) with respect to \(d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n}\).
    Thus by Definition \ref{1.5.1} \((E, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n})\) is compact.
    Since every sequence in \(E\) has a subsequence which converges in \(E\) with respect to \(d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n}\), by Proposition \ref{1.1.18} we know that such subsequence also converges with respect to \(d_{l^2}|_{\mathbf{R}^n \times \mathbf{R}^n}\) and \(d_{l^\infty}|_{\mathbf{R}^n \times \mathbf{R}^n}\).
    Thus \((E, d_{l^2}|_{\mathbf{R}^n \times \mathbf{R}^n})\) and \((E, d_{l^\infty}|_{\mathbf{R}^n \times \mathbf{R}^n})\) are also compact when \((E, d_{l^1}|_{\mathbf{R}^n \times \mathbf{R}^n})\) is closed and bounded.
\end{proof}

\begin{note}
    The Heine-Borel theorem is not true for more general metric spaces.
    However, a version of the Heine-Borel theorem is available if one is willing to replace closedness with the stronger notion of completeness, and boundedness with the stronger notion of \emph{total boundedness}.
\end{note}

\begin{note}
    One can characterize compactness topologically via Theorem \ref{1.5.8}:
    every open cover of a compact set has a ﬁnite subcover.
\end{note}

\begin{theorem}\label{1.5.8}
    Let \((X, d)\) be a metric space, and let \(Y\) be a compact subset of \(X\).
    Let \((V_{\alpha})_{\alpha \in A}\) be a collection of open sets in \(X\), and suppose that
    \[
        Y \subseteq \bigcup_{\alpha \in A} V_{\alpha}.
    \]
    (i.e., the collection \((V_{\alpha})_{\alpha \in A}\) \emph{covers} \(Y\)).
    Then there exists a \emph{finite} subset \(F\) of \(A\) such that
    \[
        Y \subseteq \bigcup_{\alpha \in F} V_{\alpha}.
    \]
\end{theorem}

\begin{proof}
    We assume for sake of contradiction that there does not exist any finite subset \(F\) of \(A\) for which \(Y \subseteq \bigcup_{\alpha \in F} V_{\alpha}\).

    Let \(y\) be any element of \(Y\).
    Then \(y\) must lie in at least one of the sets \(V_{\alpha}\).
    Since each \(V_{\alpha}\) is open, by Proposition \ref{1.2.15}(a) there must therefore be an \(r > 0\) such that \(B_{(X, d)}(y, r) \subseteq V_{\alpha}\).
    Now let \(r(y)\) denote the quantity
    \[
        r(y) \coloneqq \sup\big\{r \in (0, \infty) : B_{(X, d)}(y, r) \subseteq V_{\alpha} \text{ for some } \alpha \in A\big\}.
    \]
    By the above discussion, we know that \(r(y) > 0\) for all \(y \in Y\).
    Now, let \(r_0\) denote the quantity
    \[
        r_0 \coloneqq \inf\big\{r(y) : y \in Y\big\}.
    \]
    Since \(r(y) > 0\) for all \(y \in Y\), we have \(r_0 \geq 0\).
    There are three cases: \(r_0 = 0\), \(0 < r_0 < \infty\) and \(r_0 = \infty\).
    \begin{itemize}
        \item Case 1:
              \(r_0 = 0\).
              Then for every integer \(n \geq 1\), there is at least one point \(y\) in \(Y\) such that \(r(y) < 1 / n\) (otherwise the infimum cannot be \(0\)).
              We thus choose, for each \(n \geq 1\), a point \(y^{(n)}\) in \(Y\) such that \(r(y^{(n)}) < 1 / n\)
              (we can do this because of the axiom of choice, see Proposition 8.4.7 in Analysis I).
              In particular we have \(\lim_{n \to \infty} r(y^{(n)}) = 0\), by the squeeze test.
              The sequence \((y^{(n)})_{n = 1}^\infty\) is a sequence in \(Y\);
              since \(Y\) is compact, we can thus find a subsequence \((y^{(n_j)})_{j = 1}^\infty\) which converges to a point \(y_0 \in Y\) with respect to \(d|_{Y \times Y}\).

              As before, we know that there exists some \(\alpha \in A\) such that \(y_0 \in V_{\alpha}\), and hence (since \(V_{\alpha}\) is open) there exists some \(\varepsilon > 0\) such that \(B_{(X, d)}(y_0, \varepsilon) \subseteq V_{\alpha}\).
              Since \((y^{(n_j)})_{j = 1}^\infty\) converges to \(y_0\), there must exist an \(N \geq 1\) such that \(y^{(n_j)} \in B_{(X, d)}(y_0, \varepsilon / 2)\) for all \(n_j \geq N\).
              In particular, by the triangle inequality we have \(B_{(X, d)}(y^{(n_j)}, \varepsilon / 2) \subseteq B_{(X, d)}(y_0, \varepsilon)\), and thus \(B_{(X, d)}(y^{(n_j)}, \varepsilon / 2) \subseteq V_{\alpha}\).
              By definition of \(r(y^{(n_j)})\), this implies that \(r(y^{(n_j)}) \geq \varepsilon / 2\) for all \(n_j \geq N\).
              But this contradicts the fact that \(\lim_{n \to \infty} r(y^{(n)}) = 0\).
        \item Case 2:
              \(0 < r_0 < \infty\).
              In this case we now have \(r(y) > r_0 / 2\) for all \(y \in Y\).
              This implies that for every \(y \in Y\) there exists an \(\alpha \in A\) such that \(B_{(X, d)}(y, r_0 / 2) \subseteq V_{\alpha}\) (by the definition of \(r(y)\)).

              We now construct a sequence \(y^{(1)}, y^{(2)}, \dots\) by the following recursive procedure.
              We let \(y^{(1)}\) be any point in \(Y\).
              The ball \(B_{(X, d)}(y^{(1)}, r_0 / 2)\) is contained in one of the \(V_{\alpha}\) and thus cannot cover all of \(Y\), since we would then obtain a finite cover, a contradiction.
              Thus there exists a point \(y^{(2)}\) which does not lie in \(B_{(X, d)}(y^{(1)}, r_0 / 2)\), so in particular \(d(y^{(2)}, y^{(1)}) \geq r_0 / 2\).
              Choose such a point \(y^{(2)}\).
              The set \(B_{(X, d)}(y^{(1)}, r_0 / 2) \cup B_{(X, d)}(y^{(2)}, r_0 / 2)\) cannot cover all of \(Y\), since we would then obtain two sets \(V_{\alpha_1}\) and \(V_{\alpha_2}\) which covered \(Y\), a contradiction again.
              So we can choose a point \(y^{(3)}\) which does not lie in \(B_{(X, d)}(y^{(1)}, r_0 / 2) \cup B_{(X, d)}(y^{(2)}, r_0 / 2)\), so in particular \(d(y^{(3)}, y^{(1)}) \geq r_0 / 2\) and \(d(y^{(3)}, y^{(2)}) \geq r_0 / 2\).
              Continuing in this fashion we obtain a sequence \((y^{(n)})_{n = 1}^\infty\) in \(Y\) with the property that \(d(y^{(k)}, y^{(j)}) \geq r_0 / 2\) for all \(k > j\).
              In particular the sequence \((y^{(n)})_{n = 1}^\infty\) is not a Cauchy sequence, and in fact no subsequence of \((y^{(n)})_{n = 1}^\infty\) can be a Cauchy sequence either.
              But this contradicts the assumption that \(Y\) is compact (by Lemma \ref{1.4.7}).
        \item Case 3:
              \(r_0 = \infty\).
              For this case we argue as in Case 2, but replacing the role of \(r_0 / 2\) by (say) \(1\).
    \end{itemize}
\end{proof}

\begin{note}
    It turns out that Theorem \ref{1.5.8} has a converse:
    if \(Y\) has the property that every open cover has a ﬁnite sub-cover, then it is compact.
    In fact, this property is often considered the more fundamental notion of compactness than the sequence-based one.
    (For metric spaces, the two notions, that of compactness and sequential compactness, are equivalent, but for more general \emph{topological spaces}, the two notions are slightly diﬀerent.)
\end{note}

\begin{corollary}\label{1.5.9}
    Let \((X, d)\) be a metric space, and let \(K_1, K_2, K_3, \dots\) be a sequence of non-empty compact subsets of \(X\) such that
    \[
        K_1 \supseteq K_2 \supseteq K_3 \supseteq \dots.
    \]
    Then the intersection \(\bigcap_{n = 1}^\infty K_n\) is non-empty.
\end{corollary}

\begin{proof}
    Since for every \(n \geq 1\), \((K_n, d)\) is compact and \(K_n \subseteq K_1\), by Corollary \ref{1.5.6} we know that \((K_n, d)\) is closed in \(K_1\).
    Let \(V_n = K_1 \setminus K_n\) for every \(n \geq 1\).
    Then for every \(n \geq 1\), we have \(V_n \subseteq K_1\) and by Proposition \ref{1.2.15}(e) \((V_n, d)\) is open in \(K_1\).

    Suppose for sake of contradiction that \(\bigcap_{n = 1}^\infty K_n = \emptyset\).
    Since
    \[
        \bigcup_{n = 1}^\infty V_n = \bigcup_{n = 1}^\infty (K_1 \setminus K_n) = K_1 \setminus \bigg(\bigcap_{n = 1}^\infty K_n\bigg) = K_1
    \]
    and \((K_1, d)\) is compact, by Theorem \ref{1.5.8} we know that there exists a finite set \(F \subseteq \mathbf{Z}^+\) such that
    \[
        K_1 \subseteq \bigcup_{i \in F} V_i.
    \]
    Since \(F\) is finite subset of \(\mathbf{Z}^+\), by well-ordering principle \(\min(F)\) is well-defined.
    Then we have
    \begin{align*}
                 & K_1 \subseteq \bigcup_{i \in F} V_i \subseteq \bigcup_{n = 1}^\infty V_i = K_1                                                          \\
        \implies & K_1 = \bigcup_{i \in F} V_i                                                                                                             \\
        \implies & K_1 = \bigcup_{i \in F} (K_1 \setminus K_i)                                                                                             \\
        \implies & K_1 = K_1 \setminus \bigg(\bigcap_{i \in F} K_i\bigg)                                                                                   \\
        \implies & \bigcap_{i \in F} K_i = \emptyset                                              & \text{(since \(\bigcap_{i \in F} K_i \subseteq K_1)\)} \\
        \implies & K_{\min(F)} = \emptyset.                                                       & \text{(since \(K_{\min(F)} = \bigcap_{i \in F} K_i)\)}
    \end{align*}
    But by hypothesis we know that \(K_{\min(F)} \neq \emptyset\), a contradiction.
    Thus \(\bigcap_{n = 1}^\infty K_n \neq \emptyset\).
\end{proof}

\begin{theorem}\label{1.5.10}
    Let \((X, d)\) be a metric space.
    \begin{enumerate}
        \item If \(Y\) is a compact subset of \(X\), and \(Z \subseteq Y\), then \(Z\) is compact if and only if \(Z\) is closed.
        \item If \(Y_1, \dots, Y_n\) are a finite collection of compact subsets of \(X\), then their union \(Y_1 \cup \dots \cup Y_n\) is also compact.
        \item Every finite subset of \(X\) (including the empty set) is compact.
    \end{enumerate}
\end{theorem}

\begin{proof}{(a)}
    By Corollary \ref{1.5.6} we know that if \((Z, d|_{Y \times Y})\) is compact then \((Z, d|_{Y \times Y})\) is closed in \(Y\).
    Now we show that if \((Z, d|_{Y \times Y})\) is closed in \(Y\) then \((Z, d|_{Y \times Y})\) is compact.

    Since \((Y, d|_{Y \times Y})\) is compact and \(Z \subseteq Y\), by Definition \ref{1.5.1} we know that every sequence \((z^{(n)})_{n = 1}^\infty\) in \(Z\) has a convergent subsequence \((z^{(n_j)})_{j = 1}^\infty\) which converges in \(Y\) with respect to \(d|_{Y \times Y}\).
    Since \((Z, d|_{Y \times Y})\) is closed in \(Y\), by Proposition \ref{1.2.15}(b) we know that \((z^{(n_j)})_{j = 1}^\infty\) converges in \(Z\) with respect to \(d|_{Y \times Y}\).
    Since \((z^{(n)})_{n = 1}^\infty\) is arbitrary, by Definition \ref{1.5.1} we know that \((Z, d|_{Y \times Y})\) is compact.
\end{proof}

\begin{proof}{(b)}
    We use induction on \(n\) to show that \((\bigcup_{i = 1}^n Y_i, d)\) is compact for every \(n \in \mathbf{Z}^+\).
    For \(n = 1\), we know that \(\bigcup_{i = 1}^1 Y_i = Y_1\) and by hypothesis \((Y_1, d)\) is compact, thus the base case holds.
    Suppose inductively that \((\bigcup_{i = 1}^n Y_i, d)\) is compact for some \(n \geq 1\).
    Then for \(n + 1\), we need to show that \((\bigcup_{i = 1}^{n + 1} Y_i, d)\) is compact.
    Let \((y^{(k)})_{k = 1}^\infty\) be a sequence in \(\bigcup_{i = 1}^{n + 1} Y_i\).
    We now split into two cases:
    \begin{itemize}
        \item If there exists a subsequence \((y^{(k_j)})_{j = 1}^\infty\) whose elements are in \(\bigcup_{i = 1}^n Y_i\), then by induction hypothesis we know that \((y^{(k_j)})_{j = 1}^\infty\) converges in \(\bigcup_{i = 1}^n Y_i\) with respect to \(d\).
              This means \((y^{(k_j)})_{j = 1}^\infty\) also converges in \(\bigcup_{i = 1}^{n + 1} Y_i\) with respect to \(d\) since \(\bigcup_{i = 1}^n Y_i \subseteq \bigcup_{i = 1}^{n + 1} Y_i\).
        \item If there does not exist a subsequence \((y^{(k_j)})_{j = 1}^\infty\) whose elements are in \(\bigcup_{i = 1}^n Y_i\), then there is only finitely many elements in \((y^{(k)})_{k = 1}^\infty\) which are in \(\bigcup_{i = 1}^n Y_i\).
              This means there exists a subsequence \((y^{(k_j)})_{j = 1}^\infty\) whose elements are in \(Y_{n + 1}\).
              By hypothesis we know that \((Y_{n + 1}, d)\) is compact, thus by Definition \ref{1.5.1} there exists a subsequence \((y^{(k_{j_p})})_{p = 1}^\infty\) of \((y^{(k_j)})_{j = 1}^\infty\) converges in \(Y_{n + 1}\) with respect to \(d\).
              Since \(Y_{n + 1} \subseteq \bigcup_{i = 1}^{n + 1} Y_i\), we know that \((y^{(k_{j_p})})_{p = 1}^\infty\) also converges in \(\bigcup_{i = 1}^{n + 1} Y_i\) with respect to \(d\).
    \end{itemize}
    From all cases above we conclude that there exists a subsequence of \((y^{(k)})_{k = 1}^\infty\) which converges in \(\bigcup_{i = 1}^{n + 1} Y_i\) with respect to \(d\).
    Since \((y^{(k)})_{k = 1}^\infty\) is arbitrary, by Definition \ref{1.5.1} \((\bigcup_{i = 1}^{n + 1} Y_i, d)\) is compact.
    This close the induction.
\end{proof}

\begin{proof}{(c)}
    Let \(Y \subseteq X\) and \(\#(Y) = n\).
    Let \(P(n)\) be the statement ``\(\#(Y) = n\) and for every sequence \((y^{(k)})_{k = 1}^\infty\) in \(Y\), there exists a subsequence of \((y^{(k)})_{k = 1}^\infty\) which converges in \(Y\) with respect to \(d\)''.
    We use induction on \(n\) to show that \(P(n)\) is true for all \(n \in \mathbf{N}\).
    For \(n = 0\), we have \(Y = \emptyset\) and the statement \(P(0)\) is trivially true.
    Thus by Definition \ref{1.5.1} \((\emptyset, d)\) is compact and the base case holds.
    Suppose inductively that \(P(n)\) is true for some \(n \geq 0\).
    Then we need to show that \(P(n + 1)\) is true.
    Let \(Y \subseteq X\) such that \(\#(Y) = n + 1\) and let \(x_0 \in Y\).
    Let \((y^{(k)})_{k = 1}^\infty\) be arbitrary sequence in \(Y\).
    Now we split into two cases:
    \begin{itemize}
        \item If the set \(\{k \in \mathbf{N} : y^{(k)} = x_0\}\) is finite, then we can have a subsequence \((y^{(k_j)})_{j = 1}^\infty\) whose elements are in \(Y \setminus \{x_0\}\).
              Since \((y^{(k_j)})_{j = 1}^\infty\) is in \(Y \setminus \{x_0\}\) and \(\#(Y \setminus \{x_0\}) = n\), by induction hypothesis we know that there exists a subsequence of \((y^{(k_j)})_{j = 1}^\infty\) which converges in \(Y \setminus \{x_0\}\) with respect to \(d\).
              But \((y^{(k_j)})_{j = 1}^\infty\) is also in \(Y\), thus we know that there exists a subsequence of \((y^{(k_j)})_{j = 1}^\infty\) which converges in \(Y\) with respect to \(d\).
        \item If the set \(\{k \in \mathbf{N} : y^{(k)} = x_0\}\) is finite, then we can have a subsequence \((y^{(k_j)})_{j = 1}^\infty\) whose elements are all \(x_0\) and obviously \((y^{(k_j)})_{j = 1}^\infty\) converges to \(x_0\) with respect to \(d\).
              Since \(x_0 \in Y\), we know that \((y^{(k_j)})_{j = 1}^\infty\) converges in \(Y\) with respect to \(d\).
    \end{itemize}
    From all cases above we conclude that there exists a subsequence of \((y^{(k)})_{k = 1}^\infty\) which converges in \(Y\) with respect to \(d\).
    Thus \(P(n + 1)\) is true and this close the induction.
    Since \(P(n)\) is true for every \(n \in \mathbf{N}\), by Definition \ref{1.5.1} we know that if \(Y\) is a finite subset of \(X\), then \((Y, d)\) is compact.
\end{proof}

\exercisesection

\begin{exercise}\label{ex 1.5.1}
    Show that Definitions 9.1.22 in Analysis I and Definition \ref{1.5.3} match when talking about subsets of the real line with the standard metric.
\end{exercise}

\begin{proof}
    Let \(X \subseteq \mathbf{R}\) and is bounded by some \(M \in \mathbf{R}^+\).
    By Definition 9.1.22 in Analysis I this means \(X \subseteq [-M, M]\).
    Then we have \(X \subseteq (-M + 1, M + 1)\) and by Definition \ref{1.5.3} we know that \(X\) is bounded by \(B_{(\mathbf{R}, d_{l^1})}(0, M + 1)\).
    Thus the two definition are matched.
\end{proof}

\begin{exercise}\label{ex 1.5.2}
    Prove Proposition \ref{1.5.5}.
\end{exercise}

\begin{proof}
    See Proposition \ref{1.5.5}.
\end{proof}

\begin{exercise}\label{ex 1.5.3}
    Prove Theorem \ref{1.5.7}.
\end{exercise}

\begin{proof}
    See Theorem \ref{1.5.7}.
\end{proof}

\begin{exercise}\label{ex 1.5.4}
    Let \((\mathbf{R}, d)\) be the real line with the standard metric.
    Give an example of a continuous function \(f : \mathbf{R} \to \mathbf{R}\), and an open set \(V \subseteq \mathbf{R}\), such that the image \(f(V) \coloneqq \{f(x) : x \in V\}\) of \(V\) is \emph{not} open.
\end{exercise}

\begin{proof}
    Let \(f(x) = 1\) for all \(x \in \mathbf{R}\).
    Since \(f\) is a constant function, we know that \(f\) is continuous.
    By Definition \ref{1.2.1} and Proposition \ref{1.2.15}(c) we know that
    \[
        B_{(\mathbf{R}, d_{l^1})}(1, 1) = (0, 2)
    \]
    is a open set.
    Similarly by Proposition \ref{1.2.15}(c) we know that
    \[
        f((0, 2)) = \{1\} = \{f(x) \in \mathbf{R} : d_{l^1}(f(x), 0) = \abs*{f(x)} \leq 1\} = [1, 1]
    \]
    is a closed set (which is a closed ball).
    By Proposition \ref{1.2.15}(a) we know that \(\{1\}\) is not a open set since we cannot find an \(r > 0\) such that \(B_{(\mathbf{R}, d_{l^1})}(1, r) \subseteq \{1\}\).
    Thus such \(f\) satisfy the requirements.
\end{proof}

\begin{exercise}\label{ex 1.5.5}
    Let \((\mathbf{R}, d)\) be the real line with the standard metric.
    Give an example of a continuous function \(f : \mathbf{R} \to \mathbf{R}\), and a closed set \(F \subseteq \mathbf{R}\), such that \(f(F)\) is \emph{not} closed.
\end{exercise}

\begin{proof}
    Let \(f(x) = 2^x\) for all \(x \in \mathbf{R}\).
    We know that \(2^x\) is continuous on \((-\infty, \infty)\).
    Let \(F = (-\infty, 0]\).
    If \(x_0 \in F\) is a boundary point, then by Definition \ref{1.2.5} we must have \(B(x_0, r) \not\subseteq F\) and \(B(x_0, r) \cap F \neq \emptyset\) for every \(r \in \mathbf{R}^+\).
    Thus the only boundary point is \(0\).
    Since \(0\) is the only boundary point of \(F\) and \(0 \in F\), by Definition \ref{1.2.12} we know that \(F\) is closed.
    Since
    \[
        f(F) = f((-\infty, 0]) = (0, 1]
    \]
    and \(0 \notin (0, 1)\), by Definition \ref{1.2.12} we know that \(f(F)\) is not closed.
    Thus such \(f\) satisfy the requirements.
\end{proof}

\begin{exercise}\label{ex 1.5.6}
    Prove Corollary \ref{1.5.9}.
\end{exercise}

\begin{proof}
    See Corollary \ref{1.5.9}.
\end{proof}

\begin{exercise}\label{ex 1.5.7}
    Prove Theorem \ref{1.5.10}.
\end{exercise}

\begin{proof}
    See Theorem \ref{1.5.10}.
\end{proof}

\begin{exercise}\label{ex 1.5.8}
    Let \((X, d_{l^1})\) be the metric space from Exercise \ref{ex 1.1.15}.
    For each natural number \(n\), let \(e^{(n)} = (e_j^{(n)})_{j = 0}^\infty\) be the sequence in \(X\) such that \(e_j^{(n)} \coloneqq 1\) when \(n = j\) and \(e_j^{(n)} \coloneqq 0\) when \(n \neq j\).
    Show that the set \(\{e^{(n)} : n \in \mathbf{N}\}\) is a closed and bounded subset of \(X\), but is not compact.
    (This is despite the fact that \((X, d_{l^1})\) is even a complete metric space
    - a fact which we will not prove here.
    The problem is that not that \(X\) is incomplete, but rather that it is ``infinite-dimensional'', in a sense that we will not discuss here.)
\end{exercise}

\begin{proof}
    Let \(E = \{e^{(n)} : n \in \mathbf{N}\}\).
    We first show that \(E\) is bounded.
    Since
    \[
        \sum_{j = 0}^\infty \abs*{e_j^{(n)}} = 1
    \]
    for every \(n \in \mathbf{N}\), we know that \(e^{(n)}\) is absolutely convergent and by Exercise \ref{ex 1.1.15} \(e^{(n)} \in X\).
    Since
    \begin{align*}
        d_{l^1}(e^{(0)}, e^{(n)}) & = \sum_{j = 0}^\infty \abs*{e_j^{(0)} - e_j^{(n)}}            \\
                                  & = \abs*{e_0^{(0)} - e_0^{(n)}} + \abs*{e_n^{(0)} - e_n^{(n)}} \\
                                  & = \abs*{1 - e_0^{(n)}} + \abs*{e_n^{(0)} - 1}                 \\
                                  & = \begin{cases}
            0 & \text{if } n = 0    \\
            2 & \text{if } n \neq 0
        \end{cases}                                  \\
                                  & < 3,
    \end{align*}
    by Definition \ref{1.2.1} we know that the ball \(B_{(X, d_{l^1})}(e^{(0)}, 3)\) contains the set \(E\).
    Thus by Definition \ref{1.5.3} we know that the set \(E\) is bounded.

    Next we show that \(E\) is closed.
    Let \(\overline{E}\) be the closure of \(E\) and let \(a \in \overline{E}\).
    By Proposition \ref{1.2.10}(c) we know that there exists a sequence \((a^{(k)})_{k = 0}^\infty\) in \(E\) such that \(\lim_{k \to \infty} d(a, a^{(k)}) = 0\).
    By Lemma \ref{1.4.7}, \((a^{(k)})_{k = 0}^\infty\) is a Cauchy sequence.
    By Definition \ref{1.4.6}, this means \(\forall\ \varepsilon \in \mathbf{R}^+\), \(\exists\ N \in \mathbf{N}\) such that \(\forall\ k, k' \in \mathbf{N}\) and \(k, k' \geq N\), we have
    \[
        d(a^{(k)}, a^{(k')}) \leq \varepsilon.
    \]
    In particular, \(\exists\ N \in \mathbf{N}\) such that \(\forall\ k, k' \geq N\), we have
    \[
        d(a^{(k)}, a^{(k')}) \leq \frac{1}{2} < 1.
    \]
    Since \(a^{(k)}, a^{(k')} \in E\), we know that
    \[
        d(a^{(k)}, a^{(k')}) = \begin{cases}
            0 & \text{if } a^{(k)} = a^{(k')};    \\
            2 & \text{if } a^{(k)} \neq a^{(k')}.
        \end{cases}
    \]
    Thus we must have \(a^{(k)} = a^{(N)}\) for all \(k \geq N\).
    By Definition \ref{1.1.14}, we know that \(a\) converges to \(a^{(N)}\), thus \(a \in E\).
    Since \(a\) is arbitrary adherent point, by Proposition \ref{1.2.15}(b) we know that \(E\) is closed.

    Finally we show that \(E\) is not compact.
    Let \((e^{(n)})_{n = 0}^\infty\) be a sequence.
    Since \((e^{(n)})_{n = 0}^\infty\) in \(E\), we know that \(\forall\ N \in \mathbf{N}\), \(\forall\ n, n' \in \mathbf{N}\) and \(n, n' \geq N\), we have
    \[
        d(e^{(n)}, e^{(n')}) = 2.
    \]
    Thus by Definition \ref{1.4.6} \((e^{(n)})_{n = 0}^\infty\) is not a Cauchy sequence.
    Similarly any subsequence of \((e^{(n)})_{n = 0}^\infty\) is not a Cauchy sequence, by Lemma \ref{1.4.7} this means no subsequence is convergent, and by Definition \ref{1.5.1} \(E\) is not compact.
\end{proof}

\begin{exercise}\label{ex 1.5.9}
    Show that a metric space \((X, d)\) is compact if and only if every sequence in \(X\) has at least one limit point.
\end{exercise}

\begin{proof}
    We first show that if \((X, d)\) is compact, then every sequence in \(X\) has at least one limit point.
    Let \((a^{(n)})_{n = 1}^\infty\) be a sequence in \(X\).
    Since \((X, d)\) is compact, by Definition \ref{1.5.1} we know that there exists a subsequence \((a^{(n_j)})_{j = 1}^\infty\) of \((a^{(n)})_{n = 1}^\infty\) which converges to \(L \in X\).
    Then by Proposition \ref{1.4.5} we know that \(L\) is a limit point of \((a^{(n)})_{n = 1}^\infty\).

    Now we show that if every sequence in \(X\) has at least one limit point, then \((X, d)\) is compact.
    Since every sequence in \(X\) has at least one limit point, by Proposition \ref{1.4.5} we know that every sequence has a subsequence which converges in \(X\).
    Thus by Definition \ref{1.5.1} \((X, d)\) is compact.
\end{proof}

\begin{exercise}\label{ex 1.5.10}
    A metric space \((X, d)\) is called \emph{totally bounded} if for every \(\varepsilon > 0\), there exists a integer \(n\) and a finite number of balls \(B(x^{(1)}, \varepsilon), \dots, B(x^{(n)}, \varepsilon)\) which cover \(X\) (i.e., \(X = \bigcup_{i = 1}^n B(x^{(i)}, \varepsilon)\)).
    (Note that \(x^{(1)}, \dots, x^{(n)} \in X\))
    \begin{enumerate}
        \item Show that every totally bounded space is bounded.
        \item Show the following stronger version of Proposition \ref{1.5.5}:
              if \((X, d)\) is compact, then complete and totally bounded.
        \item Conversely, show that if \(X\) is complete and totally bounded, then \(X\) is compact.
    \end{enumerate}
\end{exercise}

\begin{proof}{(a)}
    Suppose that \((X, d)\) is totally bounded.
    Then \(\forall\ \varepsilon \in \mathbf{R}^+\), \(\exists\ n \in \mathbf{N}\) such that \(X = \bigcup_{i = 1}^n B_{(X, d)}(x^{(i)}, \varepsilon)\).
    Fix such \(\varepsilon\) and let \(r_{\varepsilon} = \max_{1 \leq i \leq n} d(x_1, x_i)\).
    Then have
    \begin{align*}
                 & \forall\ y \in X                                                                                                                    \\
        \implies & y \in \bigcup_{i = 1}^n B_{(X, d)}(x^{(i)}, \varepsilon)                                                                            \\
        \implies & \exists\ j \in \mathbf{N} \land 1 \leq j \leq n : y \in B_{(X, d)}(x^{(j)}, \varepsilon)                                            \\
        \implies & d(y, x^{(j)}) < \varepsilon                                                              & \text{(by Definition \ref{1.2.1})}       \\
        \implies & d(y, x^{(j)}) + d(x^{(j)}, x^{(1)}) < \varepsilon + r_{\varepsilon}                                                                 \\
        \implies & d(y, x^{(1)}) < \varepsilon + r_{\varepsilon}                                            & \text{(by Definition \ref{1.1.2}(c)(d))} \\
        \implies & y \in B_{(X, d)}(x^{(1)}, \varepsilon + r_{\varepsilon}).                                & \text{(by Definition \ref{1.2.1})}
    \end{align*}
    Thus \(X \subseteq B_{(X, d)}(x^{(1)}, \varepsilon + r_{\varepsilon})\) and by Definition \ref{1.5.3} \((X, d)\) is bounded.
\end{proof}

\begin{exercise}\label{ex 1.5.11}
    Let \((X, d)\) have the property that every open cover of \(X\) has a finite subcover.
    Show that \(X\) is compact.
\end{exercise}

\begin{exercise}\label{ex 1.5.12}
    Let \((X, d_{\text{disc}})\) be a metric space with the discrete metric \(d_{\text{disc}}\).
    \begin{enumerate}
        \item Show that \(X\) is always complete.
        \item When is \(X\) compact, and when is \(X\) not compact?
              Prove your claim.
    \end{enumerate}
\end{exercise}

\begin{exercise}\label{ex 1.5.13}
    Let \(E\) and \(F\) be two compact subsets of \(\mathbf{R}\) (with the standard metric \(d(x, y) = \abs*{x - y}\)).
    Show that the Cartesian product \(E \times F \coloneqq \{(x, y) : x \in E, y \in F\}\) is a compact subset of \(\mathbf{R}^2\) (with the Euclidean metric \(d_{l^2}\)).
\end{exercise}

\begin{exercise}\label{ex 1.5.14}
    Let \((X, d)\) be a metric space, let \(E\) be a non-empty compact subset of \(X\), and let \(x_0\) be a point in \(X\).
    Show that there exists a point \(x \in E\) such that
    \[
        d(x_0, x) = \inf\{d(x_0, y) : y \in E\},
    \]
    i.e., \(x\) is the closest point in \(E\) to \(x_0\).
\end{exercise}

\begin{exercise}\label{ex 1.5.15}
    Let \((X, d)\) be a compact metric space.
    Suppose that \((K_{\alpha})_{\alpha \in I}\) is a collection of closed sets in \(X\) with the property that any finite subcollection of these sets necessarily has non-empty intersection, thus \(\bigcap_{\alpha \in F} K_{\alpha} \neq \emptyset\) for all finite \(F \subseteq I\).
    (This property is known as the \emph{finite intersection property}.)
    Show that the \emph{entire} collection has non-empty intersection, thus \(\bigcap_{\alpha \in I} K_{\alpha} \neq \emptyset\).
    Show by counterexample that this statement fails if \(X\) is not compact.
\end{exercise}