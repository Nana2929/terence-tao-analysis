\section{Continuity and connectedness}\label{sec 2.4}

\begin{definition}[Connected spaces]\label{2.4.1}
    Let \((X, d)\) be a metric space.
    We say that \(X\) is \emph{disconnected} iff there exist disjoint non-empty open sets \(V\) and \(W\) in \(X\) such that \(V \cup W = X\).
    (Equivalently, \(X\) is disconnected if and only if \(X\) contains a non-empty proper subset which is simultaneously closed and open, see Proposition \ref{1.2.15}(e).)
    We say that \(X\) is \emph{connected} iff it is non-empty and not disconnected.
\end{definition}

\begin{note}
    We declare the empty set \(\emptyset\) as being special
    - it is neither connected nor disconnected;
    one could think of the empty set as ``unconnected''.
\end{note}

\setcounter{theorem}{2}
\begin{definition}[Connected sets]\label{2.4.3}
    Let \((X, d)\) be a metric space, and let \(Y\) be a subset of \(X\).
    We say that \(Y\) is \emph{connected} iff the metric space \((Y, d|_{Y \times Y})\) is connected, and we say that \(Y\) is \emph{disconnected} iff the metric space \((Y, d|_{Y \times Y})\) is disconnected.
\end{definition}

\begin{remark}\label{2.4.4}
    This definition is intrinsic;
    whether a set \(Y\) is connected or not depends only on what the metric is doing on \(Y\), but not on what ambient space \(X\) one placing \(Y\) in.
\end{remark}

\begin{theorem}\label{2.4.5}
    Let \(X\) be a non-empty subset of the real line \(\mathbf{R}\).
    Then the following statements are equivalent.
    \begin{enumerate}
        \item \(X\) is connected.
        \item Whenever \(x, y \in X\) and \(x < y\), the interval \([x, y]\) is also contained in \(X\).
        \item \(X\) is an interval (in the sense of Definition 9.1.1 in Analysis I).
    \end{enumerate}
\end{theorem}

\begin{proof}
    First we show that (a) implies (b).
    Let \(d = d_{l^1}|_{\mathbf{R} \times \mathbf{R}}\).
    Suppose that \((X, d)\) is connected, and suppose for sake of contradiction that we could find points \(x < y\) in \(X\) such that \([x, y]\) is not contained in \(X\).
    Then there exists a real number \(x < z < y\) such that \(z \notin X\).
    Thus the sets \((-\infty, z) \cap X\) and \((z, \infty) \cap X\) will cover \(X\).
    But these sets are non-empty (because they contain \(x\) and \(y\) respectively) and are open relative to \((X, d)\), and so \(X\) is disconnected, a contradiction.

    Now we show that (b) implies (a).
    Let \(X\) be a set obeying the property (b).
    Suppose for sake of contradiction that \(X\) is disconnected.
    Then there exist disjoint non-empty sets \(V , W\) which are open relative to \(X\), such that \(V \cup W = X\).
    Since \(V\) and \(W\) are non-empty, we may choose an \(x \in V\) and \(y \in W\).
    Since \(V\) and \(W\) are disjoint, we have \(x \neq y\);
    without loss of generality we may assume \(x < y\).
    By property (b), we know that the entire interval \([x, y]\) is contained in \(X\).

    Now consider the set \([x, y] \cap V\).
    This set is both bounded and non-empty (because it contains \(x\)).
    Thus it has a supremum
    \[
        z \coloneqq \sup([x, y] \cap V).
    \]
    Clearly \(z \in [x, y]\), and hence \(z \in X\).
    Thus either \(z \in V\) or \(z \in W\).
    Suppose first that \(z \in V\).
    Then \(z \neq y\) (since \(y \in W\) and \(V\) is disjoint from \(W\)).
    But \(V\) is open relative to \(X\), which contains \([x, y]\), so there is some ball \(B_{\big([x,y], d\big)}(z, r) = (z - r, z + r)\) which is contained in \(V\).
    But this contradicts the fact that \(z\) is the supremum of \([x, y] \cap V\).
    Now suppose that \(z \in W\).
    Then \(z \neq x\) (since \(x \in V\) and \(V\) is disjoint from \(W\)).
    But \(W\) is open relative to \(X\), which contains \([x, y]\), so there is some ball \(B_{\big([x,y], d\big)}(z, r) = (z - r, z + r)\) which is contained in \(W\).
    But this again contradicts the fact that \(z\) is the supremum of \([x, y] \cap V\).
    Thus in either case we obtain a contradiction, which means that \(X\) cannot be disconnected, and must therefore be connected.

    Next we show that (b) implies (c).
    Suppose that
    \[
        \forall\ x, y \in X, x < y \implies [x, y] \subseteq X.
    \]
    Suppose for sake of contradiction that \(X\) is not an interval.
    Then we would have
    \[
        \exists\ x, y \in X : x < y \implies \exists\ z \in \mathbf{R} \setminus X : x < z < y.
    \]
    Clearly this contradicts to hypothesis, thus \(X\) is an interval.

    Finally we show that (c) implies (b).
    Suppose that \(X\) is an interval.
    Then we have
    \begin{align*}
                 & \forall\ x, y \in X, x < y                                                                \\
        \implies & \inf(X) \leq x < y \leq \sup(X)                                                           \\
        \implies & \big(\forall\ z \in \mathbf{R}, x \leq z \leq y \implies \inf(X) \leq z \leq \sup(X)\big) \\
        \implies & \big(\forall\ z \in \mathbf{R}, x \leq z \leq y \implies z \in X\big)                     \\
        \implies & [x, y] \subseteq X.
    \end{align*}
\end{proof}

\begin{theorem}[Continuity preserves connectedness]\label{2.4.6}
    Let f : \(X \to Y\) be a continuous map from one metric space \((X, d_X)\) to another \((Y, d_Y)\).
    Let \(E\) be any connected subset of \(X\).
    Then \(f(E)\) is also connected.
\end{theorem}

\begin{proof}
    Suppose for sake of contradiction that \(\big(f(E), d_Y|_{f(E) \times f(E)}\big)\) is disconnected.
    Then there exists two open set \(V_1, V_2\) in \(\big(f(E), d_Y|_{f(E) \times f(E)}\big)\) such that \(V_1 \cap V_2 = \emptyset\) and \(V_1 \cup V_2 = f(E)\).
    But then we have
    \begin{align*}
                 & f \text{ is continuous from } (X, d_X) \text{ to } (Y, d_Y)                                                                                 \\
        \implies & f^{-1}(V_1), f^{-1}(V_2) \text{ are open in } (E, d_X|_{E \times E})                                & \text{(by Theorem \ref{2.1.5}(a)(c))} \\
        \implies & \big(f^{-1}(V_1) \cap f^{-1}(V_2) = \emptyset\big) \land \big(f^{-1}(V_1) \cup f^{-1}(V_2) = E\big)                                         \\
        \implies & (E, d_X|_{E \times E}) \text{ is disconnected},                                                     & \text{(by Definition \ref{2.4.1})}
    \end{align*}
    a contradiction.
    Thus \(\big(f(E), d_Y|_{f(E) \times f(E)}\big)\) is connected.
\end{proof}

\begin{corollary}[Intermediate value theorem]\label{2.4.7}
    Let \(f : X \to \mathbf{R}\) be a continuous map from one metric space \((X, d_X)\) to the real line.
    Let \(E\) be any connected subset of \(X\), and let \(a, b\) be any two elements of \(E\).
    Let \(y\) be a real number between \(f(a)\) and \(f(b)\), i.e., either \(f(a) \leq y \leq f(b)\) or \(f(a) \geq y \geq f(b)\).
    Then there exists \(c \in E\) such that \(f(c) = y\).
\end{corollary}

\begin{proof}
    Since \(f\) is continuous from \((X, d_X)\) to \((\mathbf{R}, d_{l^1}|_{\mathbf{R} \times \mathbf{R}})\) and \((E, d_X|_{E \times E})\) is connected, by Theorem \ref{2.4.6} we know that \(\big(f(E), d_{l^1}|_{f(E) \times f(E)}\big)\) is connected.
    By Theorem \ref{2.4.5}(a)(c) we know that \(f(E)\) is an interval.
    Thus we have
    \begin{align*}
                 & \forall\ a, b \in E, \forall\ y \in \Big[\min\big(f(a), f(b)\big), \max\big(f(a), f(b)\big)\Big] \\
        \implies & y \in f(E)                                                                                       \\
        \implies & \exists\ c \in X : f(c) = y.
    \end{align*}
\end{proof}

\exercisesection

\begin{exercise}\label{ex 2.4.1}
    Let \((X, d_{\text{disc}})\) be a metric space with the discrete metric.
    Let \(E\) be a subset of \(X\) which contains at least two elements.
    Show that \(E\) is disconnected.
\end{exercise}

\begin{proof}
    Let \(x, y \in E\), let \(V = \{x\}\) and let \(W = E \setminus V\).
    By Example \ref{1.2.8} we know that \(V, W\) are open in \((E, d_{\text{disc}}|_{E \times E})\).
    Since \(V \cup W = E\) and \(V \cap W = \emptyset\), by Definition \ref{2.4.3} we know that \((E, d_{\text{disc}}|_{E \times E})\) is disconnected.
\end{proof}

\begin{exercise}\label{ex 2.4.2}
    Let \(f : X \to Y\) be a function from a connected metric space \((X, d)\) to a metric space \((Y, d_{\text{disc}})\) with the discrete metric.
    Show that \(f\) is continuous if and only if it is constant.
\end{exercise}

\begin{exercise}\label{ex 2.4.3}
    Prove the equivalence of statements (b) and (c) in Theorem \ref{2.4.5}.
\end{exercise}

\begin{proof}
    See Theorem \ref{2.4.5}.
\end{proof}

\begin{exercise}\label{ex 2.4.4}
    Prove Theorem \ref{2.4.6}.
\end{exercise}

\begin{proof}
    See Theorem \ref{2.4.6}.
\end{proof}

\begin{exercise}\label{ex 2.4.5}
    Use Theorem \ref{2.4.6} to prove Corollary \ref{2.4.7}.
\end{exercise}

\begin{proof}
    See Corollary \ref{2.4.7}.
\end{proof}

\begin{exercise}\label{ex 2.4.6}
    Let \((X, d)\) be a metric space, and let \((E_\alpha)_{\alpha \in I}\) be a collection of connected sets in \(X\).
    Suppose also that \(\bigcap_{\alpha \in I} E_\alpha\) is non-empty.
    Show that \(\bigcup_{\alpha \in I} E_\alpha\) is connected.
\end{exercise}

\begin{exercise}\label{ex 2.4.7}
    Let \((X, d)\) be a metric space, and let \(E\) be a subset of \(X\).
    We say that \(E\) is \emph{path-connected} iff, for every \(x, y \in E\), there exists a continuous function \(\gamma : [0, 1] \to E\) from the unit interval \([0, 1]\) to \(E\) such that \(\gamma(0) = x\) and \(\gamma(1) = y\).
    Show that every non-empty path-connected set is connected.
    (The converse is false, but is a bit tricky to show and will not be detailed here.)
\end{exercise}

\begin{exercise}\label{ex 2.4.8}
    Let \((X, d)\) be a metric space, and let \(E\) be a subset of \(X\).
    Show that if \(E\) is connected, then the closure \(\overline{E}\) of \(E\) is also connected.
    Is the converse true?
\end{exercise}

\begin{exercise}\label{ex 2.4.9}
    Let \((X, d)\) be a metric space. Let us define a relation \(x \sim y\) on \(X\) by declaring \(x \sim y\) iff there exists a connected subset of \(X\) which contains both \(x\) and \(y\).
    Show that this is an equivalence relation (i.e., it obeys the reflexive, symmetric, and transitive axioms).
    Also, show that the equivalence classes of this relation (i.e., the sets of the form \(\{y \in  X : y \sim x\}\) for some \(x \in X\)) are all closed and connected.
    These sets are known as the \emph{connected components} of \(X\).
\end{exercise}

\begin{exercise}\label{ex 2.4.10}
    Combine Proposition \ref{2.3.2} and Corollary \ref{2.4.7} to deduce a theorem for continuous functions on a compact connected domain which generalizes Corollary 9.7.4 in Analysis I.
\end{exercise}